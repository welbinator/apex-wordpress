{"version":3,"file":"wpstg-admin.min.js","sources":["../src/modules/wpstg-polyfill.js","../src/modules/wpstg-dom-utils.js","../src/modules/wpstg-clone-staging.js","../src/modules/wpstg-directory-navigation.js","../src/modules/wpstg-exclude-filters.js","../src/modules/wpstg-modal.js","../src/modules/wpstg-hover-intent.js","../src/wpstg.js","../src/modules/wpstg-reset-modal.js","../src/modules/wpstg-cloning-advance-settings.js","../src/modules/wpstg-main-menu.js","../src/wpstg-admin.js"],"sourcesContent":["/**\n * Polyfills the `Element.prototype.closest` function if not available in the browser.\n *\n * @return {Function} A function that will return the closest element, by selector, to this element.\n */\nfunction polyfillClosest() {\n  if (Element.prototype.closest) {\n    if (!Element.prototype.matches) {\n      Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n    }\n\n    Element.prototype.closest = function(s) {\n      let el = this;\n\n      do {\n        if (Element.prototype.matches.call(el, s)) return el;\n        el = el.parentElement || el.parentNode;\n      } while (el !== null && el.nodeType === 1);\n      return null;\n    };\n  }\n\n  return function(element, selector) {\n    return element instanceof Element ? element.closest(selector) : null;\n  };\n}\n\nexport const closest = polyfillClosest();\n","import {closest} from './wpstg-polyfill';\n\n/**\n * WP STAGING basic jQuery replacement\n */\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return single element only\n */\nexport function qs(selector) {\n  return document.querySelector(selector);\n}\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return collection of elements\n */\nexport function all(selector) {\n  return document.querySelectorAll(selector);\n}\n\n/**\n * alternative of jQuery - $(parent).on(event, selector, handler)\n */\nexport function addEvent(parent, evt, selector, handler) {\n  if (!parent instanceof Element) {\n    return;\n  }\n\n  parent.addEventListener(evt, function(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      handler(event.target.closest(selector), event);\n    }\n  }, false);\n}\n\nexport function slideDown(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = '0px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = height + 'px';\n    window.setTimeout(() => {\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function slideUp(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = height + 'px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = '0px';\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function fadeOut(element, duration = 300) {\n  element.style.opacity = 1;\n  element.style.transitionProperty = 'opacity';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.opacity = 0;\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('opacity');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function getNextSibling(element, selector) {\n  let sibling = element.nextElementSibling;\n\n  while (sibling) {\n    if (sibling.matches(selector)) {\n      return sibling;\n    }\n\n    sibling = sibling.nextElementSibling;\n  }\n};\n\nexport function getParents(element, selector) {\n  const result = [];\n  for (let parent = element && element.parentElement; parent; parent = parent.parentElement) {\n    if (parent.matches(selector)) {\n      result.push(parent);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Check if element has class name\n * @param element\n * @param className\n * @return {boolean}\n */\nexport function hasClass(element, className) {\n  return (' ' + element.className + ' ').indexOf(' ' + className+ ' ') > -1;\n}\n\n/**\n * Dispatches a change on an element that will trigger, depending on the element type,\n * cascading changes on elements dependant on the one that triggered the change and that\n * belong in the same container.\n *\n * @param {Element} element A reference to the Element the change was triggered from.\n *\n * @return {void} The function does not return any value and will have the side-effect of\n *                hiding or showing dependant elements.\n */\nexport function handleDisplayDependencies(element) {\n  if (!element instanceof Element || !element.id) {\n    return;\n  }\n\n  const containerSelector = '.wpstg-container';\n  // Use the default WordPress CSS class to hide and show the objects.\n  const hiddenClass = 'hidden';\n  const elementType = element.getAttribute('type');\n\n  switch (elementType) {\n    case 'checkbox':\n      // Go as high as the container that contains this element.\n      const container = closest(element, containerSelector);\n\n      if (container === null) {\n        return;\n      }\n\n      const showIfChecked = container.querySelectorAll(`[data-show-if-checked=\"${element.id}\"]`);\n      const showIfUnchecked = container.querySelectorAll(`[data-show-if-unchecked=\"${element.id}\"]`);\n      const checked = element.checked;\n\n      if (showIfChecked.length) {\n        for (const el of showIfChecked) {\n          if (checked) {\n            el.classList.remove(hiddenClass);\n          } else {\n            el.classList.add(hiddenClass);\n          }\n        }\n      }\n\n      if (showIfUnchecked.length) {\n        for (const el of showIfUnchecked) {\n          if (checked) {\n            el.classList.add(hiddenClass);\n          } else {\n            el.classList.remove(hiddenClass);\n          }\n        }\n      }\n\n      return;\n    default:\n      // Not a type we handle.\n      return;\n  }\n}\n\n/**\n * Initializes the display status of any element that depends on the status of another to\n * either hide or show.\n *\n * @return {void} The function will have the side-effect to toggle the hide/show class from\n *                elements dependant on another to hide or show.\n */\nexport function initDependantDisplay() {\n  const displayControllerSelector = '[onchange^=\"WPStaging.handleDisplayDependencies\"]';\n  const displayControllers = document.querySelectorAll(displayControllerSelector);\n  for (const displayController of displayControllers) {\n    handleDisplayDependencies(displayController);\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Enable/Disable cloning for staging site\n */\nexport default class WpstgCloneStaging {\n  constructor(\n      pageWrapperId = '#wpstg-clonepage-wrapper',\n      wpstgObject = wpstg,\n  ) {\n    this.pageWrapper = dom.qs(pageWrapperId);\n    this.wpstgObject = wpstgObject;\n    this.enableButtonId = '#wpstg-enable-staging-cloning';\n    this.enableAction = 'wpstg_enable_staging_cloning';\n\n    this.notyf = new Notyf({\n      duration: 10000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    });\n    this.init();\n  }\n\n  addEvents() {\n    if (this.pageWrapper === null) {\n      return;\n    }\n\n    dom.addEvent(this.pageWrapper, 'click', this.enableButtonId, () => {\n      this.sendRequest(this.enableAction);\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  sendRequest(action) {\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: action,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      // Reload current page if successful.\n      if ('undefined' !== typeof (data.success) && data.success) {\n        location.reload();\n        return;\n      }\n\n      // There will be message probably in case of error\n      if ('undefined' !== typeof (data.message)) {\n        this.notyf.error(data.message);\n        return;\n      }\n\n      this.notyf.error(this.wpstgObject.i18n['somethingWentWrong']);\n    }).catch((error) => {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Fetch directory direct child directories\n */\nexport default class WpstgDirectoryNavigation {\n  constructor(\n      directoryListingSelector = '#wpstg-directories-listing',\n      wpstgObject = wpstg,\n      notyf = null,\n  ) {\n    this.directoryListingContainer = dom.qs(directoryListingSelector);\n    this.wpstgObject = wpstgObject;\n    this.dirCheckboxSelector = '.wpstg-check-dir';\n    this.dirExpandSelector = '.wpstg-expand-dirs';\n    this.unselectAllDirsSelector = '.wpstg-unselect-dirs';\n    this.selectDefaultDirsSelector = '.wpstg-select-dirs-default';\n    this.fetchChildrenAction = 'wpstg_fetch_dir_childrens';\n    this.currentCheckboxElement = null;\n    this.currentParentDiv = null;\n    this.currentLoader = null;\n    this.existingExcludes = [];\n    this.excludedDirectories = [];\n    this.isDefaultSelected = false;\n    this.notyf = notyf;\n\n    this.init();\n  }\n\n  addEvents() {\n    if (this.directoryListingContainer === null) {\n      console.log('Error: directory navigation add events');\n      return;\n    }\n\n    dom.addEvent(this.directoryListingContainer, 'change', this.dirCheckboxSelector, (element, event) => {\n      event.preventDefault();\n      console.log(this.getExcludedDirectories());\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.dirExpandSelector, (element, event) => {\n      event.preventDefault();\n      if (this.toggleDirExpand(element)) {\n        this.sendRequest(this.fetchChildrenAction, element);\n      }\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.unselectAllDirsSelector, () => {\n      this.unselectAll();\n    });\n\n    dom.addEvent(this.directoryListingContainer, 'click', this.selectDefaultDirsSelector, () => {\n      this.selectDefault();\n    });\n  }\n\n  init() {\n    this.addEvents();\n    this.parseExcludes();\n  }\n\n  /**\n   * Toggle Dir Expand,\n   * Return true if children aren't fetched\n   * @param {HTMLElement} element\n   * @return {boolean}\n   */\n  toggleDirExpand(element) {\n    this.currentParentDiv = element.parentElement;\n    this.currentCheckboxElement = element.previousSibling;\n    this.currentLoader = this.currentParentDiv.querySelector('.wpstg-is-dir-loading');\n    if (this.currentCheckboxElement.getAttribute('data-navigateable', 'false') === 'false') {\n      return false;\n    }\n\n    if (this.currentCheckboxElement.getAttribute('data-scanned', 'false') === 'false') {\n      return true;\n    }\n\n    return false;\n  }\n\n  sendRequest(action) {\n    if (this.currentLoader !== null) {\n      this.currentLoader.style.display = 'inline-block';\n    }\n\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: action,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        dirPath: this.currentCheckboxElement.value,\n        isChecked: this.currentCheckboxElement.checked,\n        forceDefault: this.isDefaultSelected,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      if ('undefined' !== typeof (data.success) && data.success) {\n        this.currentCheckboxElement.setAttribute('data-scanned', true);\n        const dirContainer = document.createElement('div');\n        dirContainer.classList.add('wpstg-dir');\n        dirContainer.classList.add('wpstg-subdir');\n        dirContainer.innerHTML = JSON.parse(data.directoryListing);\n        this.currentParentDiv.appendChild(dirContainer);\n        if (this.currentLoader !== null) {\n          this.currentLoader.style.display = 'none';\n        }\n\n        dom.slideDown(dirContainer);\n\n        return;\n      }\n\n      if (this.notyf !== null) {\n        this.notyf.error(this.wpstgObject.i18n['somethingWentWrong']);\n      } else {\n        alert('Error: ' + this.wpstgObject.i18n['somethingWentWrong']);\n      }\n    }).catch((error) => {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n\n  getExcludedDirectories() {\n    this.excludedDirectories = [];\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input:not(:checked)').forEach((element) => {\n      if (!this.isParentExcluded(element.value)) {\n        this.excludedDirectories.push(element.value);\n      }\n    });\n\n    this.existingExcludes.forEach((exclude) => {\n      if (!this.isParentExcluded(exclude) && !this.isScanned(exclude)) {\n        this.excludedDirectories.push(exclude);\n      }\n    });\n\n    return this.excludedDirectories.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  /**\n   * @param {string} path\n   * @return {bool}\n   */\n  isParentExcluded(path) {\n    let isParentAlreadyExcluded = false;\n    this.excludedDirectories.forEach((dir) => {\n      if (path.startsWith(dir + '/')) {\n        isParentAlreadyExcluded = true;\n      }\n    });\n\n    return isParentAlreadyExcluded;\n  }\n\n  getExtraDirectoriesRootOnly() {\n    this.getExcludedDirectories();\n    const extraDirectories = [];\n    this.directoryListingContainer.querySelectorAll(':not(.wpstg-subdir)>.wpstg-dir>input.wpstg-wp-non-core-dir:checked').forEach((element) => {\n      extraDirectories.push(element.value);\n    });\n\n    // Check if extra directories text area exists\n    // TODO: remove extraCustomDirectories code if no one require extraCustomDirectories...\n    const extraDirectoriesTextArea = dom.qs('#wpstg_extraDirectories');\n    if (extraDirectoriesTextArea === null || extraDirectoriesTextArea.value === '') {\n      return extraDirectories.join(this.wpstgObject.settings.directorySeparator);\n    }\n\n    const extraCustomDirectories = extraDirectoriesTextArea.value.split(/\\r?\\n/);\n\n    return extraDirectories.concat(extraCustomDirectories).join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  unselectAll() {\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input').forEach((element) => {\n      element.checked = false;\n    });\n  }\n\n  selectDefault() {\n    // unselect all checkboxes\n    this.unselectAll();\n\n    // only select those checkboxes whose class is wpstg-wp-core-dir\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir input.wpstg-wp-core-dir').forEach((element) => {\n      element.checked = true;\n    });\n\n    // then unselect those checkboxes whose parent has wpstg extra checkbox\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir > .wpstg-wp-non-core-dir').forEach((element) => {\n      element.parentElement.querySelectorAll('input.wpstg-wp-core-dir').forEach((element) => {\n        element.checked = false;\n      });\n    });\n\n    this.isDefaultSelected = true;\n  }\n\n  parseExcludes() {\n    this.existingExcludes = this.directoryListingContainer.getAttribute('data-existing-excludes', []);\n    if (this.existingExcludes === '') {\n      this.existingExcludes = [];\n      return;\n    }\n\n    if (this.existingExcludes.length === 0) {\n      this.existingExcludes = [];\n      return;\n    }\n\n    const existingExcludes = this.existingExcludes.split(',');\n    this.existingExcludes = existingExcludes.map((exclude) => {\n      if (exclude.substr(0, 1) === '/') {\n        return exclude.slice(1);\n      }\n\n      return exclude;\n    });\n  }\n\n  isScanned(exclude) {\n    let scanned = false;\n    this.directoryListingContainer.querySelectorAll('.wpstg-dir>input').forEach((element) => {\n      if (element.value == exclude) {\n        scanned = true;\n      }\n    });\n\n    return scanned;\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Rich Exclude Filter Module\n */\nexport default class WpstgExcludeFilters {\n  constructor(\n      excludeFilterContainerSelector = '#wpstg-exclude-filters-container',\n      wpstgObject = wpstg,\n  ) {\n    this.excludeContainer = dom.qs(excludeFilterContainerSelector);\n    this.excludeTableBody = dom.qs(`${excludeFilterContainerSelector} tbody`);\n    this.wpstgObject = wpstgObject;\n    this.init();\n  }\n\n  addEvents() {\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-size-rule', () => {\n      this.addFileSizeExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-ext-rule', () => {\n      this.addFileExtExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-file-name-rule', () => {\n      this.addFileNameExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-dir-name-rule', () => {\n      this.addDirNameExclude();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-clear-all-rules', () => {\n      this.clearExcludes();\n    });\n\n    dom.addEvent(this.excludeContainer, 'click', '.wpstg-remove-exclude-rule', (target) => {\n      this.removeExclude(target);\n    });\n  }\n\n  init() {\n    if (this.excludeContainer === null) {\n      console.log('Error: Given table selector not found!');\n      return;\n    }\n\n    this.addEvents();\n  }\n\n  addFileSizeExclude() {\n    this.addExcludeRuleRow('#wpstg-file-size-exclude-filter-template');\n  }\n\n  addFileExtExclude() {\n    this.addExcludeRuleRow('#wpstg-file-ext-exclude-filter-template');\n  }\n\n  addFileNameExclude() {\n    this.addExcludeRuleRow('#wpstg-file-name-exclude-filter-template');\n  }\n\n  addDirNameExclude() {\n    this.addExcludeRuleRow('#wpstg-dir-name-exclude-filter-template');\n  }\n\n  addExcludeRuleRow(templateName) {\n    const excludeRowTemplate = dom.qs(templateName);\n    if (excludeRowTemplate !== null) {\n      const clone = excludeRowTemplate.content.cloneNode(true);\n      const excludeRow = clone.querySelector('tr');\n\n      this.excludeTableBody.appendChild(excludeRow);\n      dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n        e.style.display = 'inherit';\n      });\n    }\n  }\n\n  clearExcludes() {\n    this.excludeTableBody.innerHTML = '';\n    dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n      e.style.display = 'none';\n    });\n  }\n\n  removeExclude(target) {\n    if (target.parentElement !== null && target.parentElement.parentElement !== null) {\n      this.excludeTableBody.removeChild(target.parentElement.parentElement);\n    }\n\n    if (this.excludeTableBody.innerHTML.trim() === '') {\n      dom.all('.wpstg-has-exclude-rules').forEach((e) => {\n        e.style.display = 'none';\n      });\n    }\n  }\n\n  /**\n   * Converts all the exclude filters arrays into one single string to keep size of post request small\n   * @return {string}\n   */\n  getExcludeFilters() {\n    const globExcludes = [];\n    const sizeExcludes = [];\n\n    const sizeCompares = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileSizeExcludeRuleCompare[]\"]');\n    const sizeSizes = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileSizeExcludeRuleSize[]\"]');\n    const sizeByte = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileSizeExcludeRuleByte[]\"]');\n    for (const [key, sizeInput] of Object.entries(sizeSizes)) {\n      if (sizeInput.value !== '') {\n        sizeExcludes.push(sizeCompares[key].value + ' ' + sizeInput.value + sizeByte[key].value);\n      }\n    }\n\n    const extensionInputs = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileExtExcludeRule[]\"]');\n    extensionInputs.forEach((x) => {\n      const ext = this.cleanStringForGlob(x.value);\n      if (ext !== '') {\n        globExcludes.push('ext:' + ext.trim());\n      }\n    });\n\n    const fileNamesPos = this.excludeTableBody.querySelectorAll('select[name=\"wpstgFileNameExcludeRulePos[]\"]');\n    const fileNames = this.excludeTableBody.querySelectorAll('input[name=\"wpstgFileNameExcludeRulePath[]\"]');\n    for (const [key, fileInput] of Object.entries(fileNames)) {\n      const fileName = this.cleanStringForGlob(fileInput.value);\n      if (fileName !== '') {\n        globExcludes.push('file:' + fileNamesPos[key].value + ' ' + fileName.trim());\n      }\n    }\n\n    const dirNamesPos = this.excludeTableBody.querySelectorAll('select[name=\"wpstgDirNameExcludeRulePos[]\"]');\n    const dirNames = this.excludeTableBody.querySelectorAll('input[name=\"wpstgDirNameExcludeRulePath[]\"]');\n    for (const [key, dirInput] of Object.entries(dirNames)) {\n      const dirName = this.cleanStringForGlob(dirInput.value);\n      if (dirName !== '') {\n        globExcludes.push('dir:' + dirNamesPos[key].value + ' ' + dirName.trim());\n      }\n    }\n\n    return {\n      'sizes': sizeExcludes.filter(this.onlyUnique).join(','),\n      // return set of unique rules\n      'globs': globExcludes.filter(this.onlyUnique).join(','),\n    };\n  }\n\n  onlyUnique(value, index, self) {\n    return self.indexOf(value) === index;\n  }\n\n  /**\n   * Remove most of the comment glob characters from the string\n   * @param {String} value\n   * @return {String}\n   */\n  cleanStringForGlob(value) {\n    // will replace character like * ^ / \\ ! ? [ from the string\n    return value.replace(/[*^//!\\.[?]/g, '');\n  }\n}\n","/**\n * Basic WP Staging Modal implemented with help of Sweetalerts\n */\nexport default class WpstgModal {\n  constructor(\n      confirmAction,\n      wpstgObject = wpstg,\n  ) {\n    this.confirmAction = confirmAction;\n    this.wpstgObject = wpstgObject;\n  }\n\n  show(swalOptions, additionalParams = {}, callback = null) {\n    wpstgSwal.fire(swalOptions).then((result) => {\n      if (result.value && this.error !== null) {\n        this.triggerConfirmAction(additionalParams, callback);\n      }\n    });\n  }\n\n  triggerConfirmAction(additionalParams = {}, callback = null) {\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams(Object.assign({\n        action: this.confirmAction,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n      }, additionalParams)),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((response) => {\n      if (callback !== null) {\n        callback(response);\n      }\n    }).catch((error) => {\n      console.log(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n}\n","'use strict';\n\n/**\n * This is a namespaced port of https://github.com/tristen/hoverintent,\n * with slight modification to accept selector with dynamically added element in dom,\n * instead of just already present element.\n *\n * @param {HTMLElement} parent\n * @param {string} selector\n * @param {CallableFunction} onOver\n * @param {CallableFunction} onOut\n *\n * @return {object}\n */\nexport default function(parent, selector, onOver, onOut) {\n  let x; let y; let pX; let pY;\n  let mouseOver = false;\n  let focused = false;\n  const h = {};\n  let state = 0;\n  let timer = 0;\n\n  let options = {\n    sensitivity: 7,\n    interval: 100,\n    timeout: 0,\n    handleFocus: false,\n  };\n\n  function delay(el, e) {\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    state = 0;\n    return focused ? undefined : onOut(el, e);\n  }\n\n  function tracker(e) {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  function compare(el, e) {\n    if (timer) timer = clearTimeout(timer);\n    if ((Math.abs(pX - x) + Math.abs(pY - y)) < options.sensitivity) {\n      state = 1;\n      return focused ? undefined : onOver(el, e);\n    } else {\n      pX = x;\n      pY = y;\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n  }\n\n  // Public methods\n  h.options = function(opt) {\n    const focusOptionChanged = opt.handleFocus !== options.handleFocus;\n    options = Object.assign({}, options, opt);\n    if (focusOptionChanged) {\n            options.handleFocus ? addFocus() : removeFocus();\n    }\n\n    return h;\n  };\n\n  function dispatchOver(el, e) {\n    mouseOver = true;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state !== 1) {\n      pX = e.clientX;\n      pY = e.clientY;\n\n      el.addEventListener('mousemove', tracker, false);\n\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOver to support dynamically added elements to dom\n   */\n  function onMouseOver(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOver(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchOut(el, e) {\n    mouseOver = false;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state === 1) {\n      timer = setTimeout(function() {\n        delay(el, e);\n      }, options.timeout);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOut to support dynamically added elements to dom\n   */\n  function onMouseOut(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOut(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchFocus(el, e) {\n    if (!mouseOver) {\n      focused = true;\n      onOver(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchFocus to support dynamically added elements to dom\n   */\n  function onFocus(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchFocus(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchBlur(el, e) {\n    if (!mouseOver && focused) {\n      focused = false;\n      onOut(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchBlur to support dynamically added elements to dom\n   */\n  function onBlur(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchBlur(event.target.closest(selector), event);\n    }\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function addFocus() {\n    parent.addEventListener('focus', onFocus, false);\n    parent.addEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function removeFocus() {\n    parent.removeEventListener('focus', onFocus, false);\n    parent.removeEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  h.remove = function() {\n    if (!parent) {\n      return;\n    }\n\n    parent.removeEventListener('mouseover', onMouseOver, false);\n    parent.removeEventListener('mouseout', onMouseOut, false);\n    removeFocus();\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  if (parent) {\n    parent.addEventListener('mouseover', onMouseOver, false);\n    parent.addEventListener('mouseout', onMouseOut, false);\n  }\n\n  return h;\n};\n","import wpstgHoverIntent from './modules/wpstg-hover-intent';\n\nexport default (function($) {\n  const WPStagingCommon = {\n    continueErrorHandle: true,\n    cache: {\n      elements: [],\n      get: function(selector) {\n        // It is already cached!\n        if ($.inArray(selector, this.elements) !== -1) {\n          return this.elements[selector];\n        }\n\n        // Create cache and return\n        this.elements[selector] = $(selector);\n\n        return this.elements[selector];\n      },\n      refresh: function(selector) {\n        selector.elements[selector] = $(selector);\n      },\n    },\n    setJobId: function(jobId) {\n      localStorage.setItem('jobIdBeingProcessed', jobId);\n    },\n    getJobId: function() {\n      return localStorage.getItem('jobIdBeingProcessed');\n    },\n    listenTooltip: function() {\n      wpstgHoverIntent(document, '.wpstg--tooltip', function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'visible';\n      }, function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'hidden';\n      });\n    },\n    isEmpty: function(obj) {\n      for (const prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    // Get the custom themed Swal Modal for WP Staging\n    // Easy to maintain now in one place now\n    getSwalModal: function(isContentCentered = false, customClasses = {}) {\n      // common style for all swal modal used in WP Staging\n      const defaultCustomClasses = {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn wpstg-100-width',\n        cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn wpstg-100-width',\n        actions: 'wpstg--modal--actions',\n        popup: isContentCentered ? 'wpstg-swal-popup centered-modal' : 'wpstg-swal-popup',\n      };\n\n      // If a attribute exists in both default and additional attributes,\n      // The class(es) of the additional attribute will overrite the default one.\n      const options = {\n        customClass: Object.assign(defaultCustomClasses, customClasses),\n        buttonsStyling: false,\n        reverseButtons: true,\n        showClass: {\n          popup: 'wpstg--swal2-show wpstg-swal-show',\n        },\n      };\n\n      return wpstgSwal.mixin(options);\n    },\n    showSuccessModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'success',\n        title: 'Success!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showWarningModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'warning',\n        title: '',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showErrorModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'error',\n        title: 'Error!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    getSwalContainer: function() {\n      return wpstgSwal.getContainer();\n    },\n    closeSwalModal: function() {\n      wpstgSwal.close();\n    },\n    /**\n     * Treats a default response object generated by WordPress's\n     * wp_send_json_success() or wp_send_json_error() functions in\n     * PHP, parses it in JavaScript, and either throws if it's an error,\n     * or returns the data if the response is successful.\n     *\n     * @param {object} response\n     * @return {*}\n     */\n    getDataFromWordPressResponse(response) {\n      if (typeof response !== 'object') {\n        throw new Error('Unexpected response (ERR 1341)');\n      }\n\n      if (!response.hasOwnProperty('success')) {\n        throw new Error('Unexpected response (ERR 1342)');\n      }\n\n      if (!response.hasOwnProperty('data')) {\n        throw new Error('Unexpected response (ERR 1343)');\n      }\n\n      if (response.success === false) {\n        if (response.data instanceof Array && response.data.length > 0) {\n          throw new Error(response.data.shift());\n        } else {\n          throw new Error('Response was not successful');\n        }\n      } else {\n        // Successful response. Return the data.\n        return response.data;\n      }\n    },\n    isLoading: function(isLoading) {\n      if (!isLoading || isLoading === false) {\n        WPStagingCommon.cache.get('.wpstg-loader').hide();\n      } else {\n        WPStagingCommon.cache.get('.wpstg-loader').show();\n      }\n    },\n    /**\n     * Convert the given url to make it slug compatible\n     * @param {string} url\n     */\n    slugify: function(url) {\n      return url.toString()\n          .toLowerCase()\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '')\n          .replace(/\\s+/g, '-')\n          .replace(/&/g, '-and-')\n          .replace(/[^a-z0-9\\-]/g, '')\n          .replace(/-+/g, '-')\n          .replace(/^-*/, '')\n          .replace(/-*$/, '')\n      ;\n    },\n    showAjaxFatalError: function(response, prependMessage, appendMessage) {\n      prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n      appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n      if (response === false) {\n        WPStagingCommon.showError(prependMessage + ' Error: No response.' + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n\n      if (typeof response.error !== 'undefined' && response.error) {\n        WPStagingCommon.showError(prependMessage + ' Error: ' + response.message + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n    },\n    handleFetchErrors: function(response) {\n      if (!response.ok) {\n        WPStagingCommon.showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n      }\n      return response;\n    },\n    showError: function(message) {\n      WPStagingCommon.cache.get('#wpstg-try-again').css('display', 'inline-block');\n      WPStagingCommon.cache.get('#wpstg-cancel-cloning').text('Reset');\n      WPStagingCommon.cache.get('#wpstg-resume-cloning').show();\n      WPStagingCommon.cache.get('#wpstg-error-wrapper').show();\n      WPStagingCommon.cache.get('#wpstg-error-details').show().html(message);\n      WPStagingCommon.cache.get('#wpstg-removing-clone').removeClass('loading');\n      WPStagingCommon.cache.get('.wpstg-loader').hide();\n      $('.wpstg--modal--process--generic-problem').show().html(message);\n    },\n    resetErrors: function() {\n      WPStagingCommon.cache.get('#wpstg-error-details').hide().html('');\n    },\n    /**\n     * Ajax Requests\n     * @param {Object} data\n     * @param {Function} callback\n     * @param {string} dataType\n     * @param {bool} showErrors\n     * @param {int} tryCount\n     * @param {float} incrementRatio\n     * @param errorCallback\n     */\n    ajax: function(data, callback, dataType, showErrors, tryCount, incrementRatio = null, errorCallback = null) {\n      if ('undefined' === typeof (dataType)) {\n        dataType = 'json';\n      }\n\n      if (false !== showErrors) {\n        showErrors = true;\n      }\n\n      tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n      const retryLimit = 10;\n\n      let retryTimeout = 10000 * tryCount;\n\n      incrementRatio = parseInt(incrementRatio);\n      if (!isNaN(incrementRatio)) {\n        retryTimeout *= incrementRatio;\n      }\n\n      $.ajax({\n        url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n        type: 'POST',\n        dataType: dataType,\n        cache: false,\n        data: data,\n        error: function(xhr, textStatus, errorThrown) {\n          console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n\n          if (typeof (errorCallback) === 'function') {\n            // Custom error handler\n            errorCallback(xhr, textStatus, errorThrown);\n\n            if (!WPStagingCommon.continueErrorHandle) {\n              // Reset state\n              WPStagingCommon.continueErrorHandle = true;\n\n              return;\n            }\n          }\n\n          // Default error handler\n          tryCount++;\n          if (tryCount <= retryLimit) {\n            setTimeout(function() {\n              WPStagingCommon.ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n              return;\n            }, retryTimeout);\n          } else {\n            const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n            WPStagingCommon.showError(\n                'Fatal Error:  ' + errorCode + ' Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n            );\n          }\n        },\n        success: function(data) {\n          if ('function' === typeof (callback)) {\n            callback(data);\n          }\n        },\n        statusCode: {\n          404: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 404 - Can\\'t find ajax request URL! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          500: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Fatal Error 500 - Internal server error while processing the request! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          504: function() {\n            if (tryCount > retryLimit) {\n              WPStagingCommon.showError('Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          502: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          503: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          429: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          403: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n            }\n          },\n        },\n      });\n    },\n  };\n\n  return WPStagingCommon;\n})(jQuery);\n","\nimport * as dom from './wpstg-dom-utils.js';\nimport WpstgDirectoryNavigation from './wpstg-directory-navigation.js';\nimport WpstgExcludeFilters from './wpstg-exclude-filters.js';\nimport WpstgModal from './wpstg-modal.js';\nimport WPStagingCommon from './../wpstg.js';\n\n/**\n * Manage RESET MODAL\n */\nexport default class WpstgResetModal {\n  constructor(\n      cloneID,\n      workflowSelector = '#wpstg-workflow',\n      fetchExcludeSettingsAction = 'wpstg_clone_excludes_settings',\n      modalErrorAction = 'wpstg_modal_error',\n      wpstgObject = wpstg,\n  ) {\n    this.cloneID = cloneID;\n    this.workflow = dom.qs(workflowSelector);\n    this.wpstgObject = wpstgObject;\n    this.fetchExcludeSettingsAction = fetchExcludeSettingsAction;\n    this.modalErrorAction = modalErrorAction;\n    this.resetButtonClass = 'wpstg-confirm-reset-clone';\n    this.resetModalContainerClass = 'wpstg-reset-confirmation';\n    this.resetTabSelector = '.wpstg-reset-exclude-tab';\n    this.directoryNavigator = null;\n    this.excludeFilters = null;\n    this.isAllTablesChecked = true;\n  }\n\n  addEvents() {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    if (resetModalContainer === null) {\n      console.log('Exit');\n      return;\n    }\n\n    dom.addEvent(resetModalContainer, 'click', this.resetTabSelector, (target) => {\n      this.toggleContent(target);\n    });\n\n    dom.addEvent(resetModalContainer, 'click', '.wpstg-button-select', () => {\n      this.selectDefaultTables();\n    });\n\n    dom.addEvent(resetModalContainer, 'click', '.wpstg-button-unselect', () => {\n      this.toggleTableSelection();\n    });\n\n    dom.addEvent(resetModalContainer, 'click', '.wpstg-expand-dirs', (target, event) => {\n      event.preventDefault();\n      this.toggleDirectoryNavigation(target);\n    });\n\n    dom.addEvent(resetModalContainer, 'change', 'input.wpstg-check-dir', (target) => {\n      this.updateDirectorySelection(target);\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  toggleContent(target) {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    const contentId = target.getAttribute('data-id');\n    const tabTriangle = target.querySelector('.wpstg-tab-triangle');\n    const isCollapsed = target.getAttribute('data-collapsed', 'true');\n    const content = dom.qs(contentId);\n    if (isCollapsed === 'true') {\n      if (resetModalContainer.classList.contains('has-collapsible-open')) {\n        resetModalContainer.classList.add('has-collapsible-open-2');\n      } else {\n        resetModalContainer.classList.add('has-collapsible-open');\n      }\n\n      dom.slideDown(content);\n      tabTriangle.style.transform = 'rotate(90deg)';\n      target.setAttribute('data-collapsed', 'false');\n    } else {\n      if (resetModalContainer.classList.contains('has-collapsible-open-2')) {\n        resetModalContainer.classList.remove('has-collapsible-open-2');\n      } else {\n        resetModalContainer.classList.remove('has-collapsible-open');\n      }\n\n      dom.slideUp(content);\n      tabTriangle.style.removeProperty('transform');\n      target.setAttribute('data-collapsed', 'true');\n    }\n  }\n\n  /**\n   * Show Swal alert with loader and send ajax request to fetch content of alert.\n   * @return Promise\n   */\n  showModal() {\n    const swalPromise = this.loadModal();\n    this.init();\n    this.fetchCloneExcludes();\n    return swalPromise;\n  }\n\n  loadModal() {\n    return WPStagingCommon.getSwalModal(false, {\n      confirmButton: this.resetButtonClass + ' wpstg-confirm-reset-clone wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n      container: this.resetModalContainerClass + ' wpstg-swal2-container wpstg-swal2-loading',\n    }).fire({\n      title: '',\n      icon: 'warning',\n      html: this.getAjaxLoader(),\n      width: '400px',\n      focusConfirm: false,\n      confirmButtonText: this.wpstgObject.i18n.resetClone,\n      showCancelButton: true,\n    });\n  }\n\n  fetchCloneExcludes() {\n    this.error = null;\n    // send ajax request and fetch preserved exclude settings\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: this.fetchExcludeSettingsAction,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        clone: this.cloneID,\n        job: 'resetting',\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      if (!data.success) {\n        const errorModal = new WpstgModal(this.modalErrorAction, this.wpstgObject);\n        errorModal.show(Object.assign({\n          title: 'Error',\n          icon: 'error',\n          html: this.wpstgObject.i18n['somethingWentWrong'],\n          width: '500px',\n          confirmButtonText: 'Ok',\n          showCancelButton: false,\n          customClass: {\n            confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n            cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn',\n            actions: 'wpstg--modal--actions',\n            popup: 'wpstg-swal-popup centered-modal',\n          },\n          buttonsStyling: false,\n          reverseButtons: true,\n        }, data.swalOptions), {\n          type: data.type,\n        });\n\n        return;\n      }\n\n      const modal = dom.qs('.wpstg-reset-confirmation');\n      modal.classList.remove('wpstg-swal2-loading');\n      modal.querySelector('.wpstg--swal2-popup').style.width = '500px';\n      modal.querySelector('.wpstg--swal2-content').innerHTML = data.html;\n      this.directoryNavigator = new WpstgDirectoryNavigation();\n      this.excludeFilters = new WpstgExcludeFilters();\n    }).catch((error) => {\n      this.renderError({\n        'html': this.wpstgObject.i18n['somethingWentWrong'] + ' ' + error,\n      });\n    });\n  }\n\n  getDirectoryNavigator() {\n    return this.directoryNavigator;\n  }\n\n  getExcludeFilters() {\n    return this.excludeFilters;\n  }\n\n  getAjaxLoader() {\n    return '<div class=\"wpstg-swal2-ajax-loader\"><img src=\"' + this.wpstgObject.wpstgIcon + '\" /></div>';\n  }\n\n  toggleDirectoryNavigation(element) {\n    const cbElement = element.previousSibling;\n    if (cbElement.getAttribute('data-navigateable', 'false') === 'false') {\n      return;\n    }\n\n    if (cbElement.getAttribute('data-scanned', 'false') === 'false') {\n      return;\n    }\n\n    const subDirectories = dom.getNextSibling(element, '.wpstg-subdir');\n\n    if (subDirectories.style.display === 'none') {\n      dom.slideDown(subDirectories);\n    } else {\n      dom.slideUp(subDirectories);\n    }\n  }\n\n  updateDirectorySelection(element) {\n    const parent = element.parentElement;\n    if (element.checked) {\n      dom.getParents(parent, '.wpstg-dir').forEach((parElem) => {\n        for (let i = 0; i < parElem.children.length; i++) {\n          if (parElem.children[i].matches('.wpstg-check-dir')) {\n            parElem.children[i].checked = true;\n          }\n        }\n      });\n      parent.querySelectorAll('.wpstg-expand-dirs').forEach((x) => {\n        x.classList.remove('disabled');\n      });\n      parent.querySelectorAll('.wpstg-subdir .wpstg-check-dir').forEach((x) => {\n        x.checked = true;\n      });\n    } else {\n      parent.querySelectorAll('.wpstg-expand-dirs, .wpstg-check-subdirs').forEach((x) => {\n        x.classList.add('disabled');\n      });\n      parent.querySelectorAll('.wpstg-dir .wpstg-check-dir').forEach((x) => {\n        x.checked = false;\n      });\n    }\n  }\n\n  selectDefaultTables() {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    const options = resetModalContainer.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table');\n    const multisitePattern = '^' + this.wpstgObject.tblprefix + '([^0-9])_*';\n    const singleSitePattern = '^' + this.wpstgObject.tblprefix;\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (this.wpstgObject.isMultisite === '1' && name.match(multisitePattern)) {\n        option.setAttribute('selected', 'selected');\n      } else if (this.wpstgObject.isMultisite === '' && name.match(singleSitePattern)) {\n        option.setAttribute('selected', 'selected');\n      } else {\n        option.removeAttribute('selected');\n      }\n    });\n  }\n\n  toggleTableSelection() {\n    const resetModalContainer = dom.qs('.' + this.resetModalContainerClass);\n    if (false === this.isAllTablesChecked) {\n      resetModalContainer.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table').forEach((option) => {\n        option.setAttribute('selected', 'selected');\n      });\n      resetModalContainer.querySelector('.wpstg-button-unselect').innerHTML = 'Unselect All';\n      // cache.get('.wpstg-db-table-checkboxes').prop('checked', true);\n      this.isAllTablesChecked = true;\n    } else {\n      resetModalContainer.querySelectorAll('#wpstg_select_tables_cloning .wpstg-db-table').forEach((option) => {\n        option.removeAttribute('selected');\n      });\n      resetModalContainer.querySelector('.wpstg-button-unselect').innerHTML = 'Select All';\n      // cache.get('.wpstg-db-table-checkboxes').prop('checked', false);\n      this.isAllTablesChecked = false;\n    }\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\n/**\n * Handle toggle of advance settings checkboxes\n */\nexport default class WpstgCloningAdvanceSettings {\n  constructor(\n      baseContainerSelector = '#wpstg-clonepage-wrapper',\n  ) {\n    this.baseContainer = dom.qs(baseContainerSelector);\n    this.checkBoxSettingTogglerSelector = '.wpstg-toggle-advance-settings-section';\n    this.init();\n  }\n\n  /**\n   * Add events\n   * @return {void}\n   */\n  addEvents() {\n    if (this.baseContainer === null) {\n      return;\n    }\n\n    dom.addEvent(this.baseContainer, 'change', this.checkBoxSettingTogglerSelector, (element) => {\n      this.toggleSettings(element);\n    });\n  }\n\n  /**\n   * @return {void}\n   */\n  init() {\n    this.addEvents();\n  }\n\n  /**\n   * Expand/Collapse checkbox content on change\n   * @return {void}\n   */\n  toggleSettings(element) {\n    const target = dom.qs('#' + element.getAttribute('data-id'));\n    if (element.checked) {\n      dom.slideDown(target);\n    } else {\n      dom.slideUp(target);\n    }\n  }\n}\n","import * as dom from './wpstg-dom-utils.js';\n\nexport default class WpstgMainMenu {\n  constructor() {\n    this.activeTabClass = 'wpstg--tab--active';\n    this.mainMenu();\n  }\n\n  mainMenu() {\n    const tabHeader = dom.qs('.wpstg--tab--header');\n    // Early bail if tab header is not available\n    if (tabHeader === null) {\n      return;\n    }\n\n    dom.addEvent(dom.qs('.wpstg--tab--header'), 'click', '.wpstg-button', (element) => {\n      const $this = element;\n      const target = $this.getAttribute('data-target');\n      const targetElements = dom.all(target);\n      const menuItems = dom.all('.wpstg--tab--header a[data-target]');\n      const contents = dom.all('.wpstg--tab--contents > .wpstg--tab--content');\n\n      contents.forEach((content) => {\n        // active tab class is without the css dot class prefix\n        if (content.matches('.' + this.activeTabClass + ':not(' + target + ')')) {\n          content.classList.remove(this.activeTabClass);\n        }\n      });\n\n      menuItems.forEach((menuItem) => {\n        if (menuItem !== $this) {\n          menuItem.classList.remove(this.activeTabClass);\n        }\n      });\n\n      $this.classList.add(this.activeTabClass);\n\n      targetElements.forEach((targetElement) => {\n        targetElement.classList.add(this.activeTabClass);\n      });\n\n      if ('#wpstg--tab--backup' === target) {\n        window.dispatchEvent(new Event('backups-tab'));\n      }\n    });\n  };\n}\n","import WpstgCloneStaging from './modules/wpstg-clone-staging.js';\nimport WpstgDirectoryNavigation from './modules/wpstg-directory-navigation.js';\nimport WpstgExcludeFilters from './modules/wpstg-exclude-filters.js';\nimport WpstgResetModal from './modules/wpstg-reset-modal.js';\nimport WpstgModal from './modules/wpstg-modal.js';\nimport WpstgCloningAdvanceSettings from './modules/wpstg-cloning-advance-settings.js';\nimport WpstgMainMenu from './modules/wpstg-main-menu.js';\nimport WPStagingCommon from './wpstg.js';\nimport {handleDisplayDependencies} from './modules/wpstg-dom-utils.js';\n\nvar WPStaging = (function($) {\n  const that = {\n    isCancelled: false,\n    isFinished: false,\n    getLogs: false,\n    time: 1,\n    executionTime: false,\n    progressBar: 0,\n    cloneExcludeFilters: null,\n    directoryNavigator: null,\n    notyf: null,\n    areAllTablesChecked: true,\n    handleDisplayDependencies: handleDisplayDependencies,\n  };\n  const cache = {elements: []};\n  let timeout; let ajaxSpinner;\n\n  /**\n     * Get / Set Cache for Selector\n     * @param {String} selector\n     * @return {*}\n     */\n  cache.get = function(selector) {\n    // It is already cached!\n    if ($.inArray(selector, cache.elements) !== -1) {\n      return cache.elements[selector];\n    }\n\n    // Create cache and return\n    cache.elements[selector] = jQuery(selector);\n\n    return cache.elements[selector];\n  };\n\n  /**\n     * Refreshes given cache\n     * @param {String} selector\n     */\n  cache.refresh = function(selector) {\n    selector.elements[selector] = jQuery(selector);\n  };\n\n  /**\n     * Show and Log Error Message\n     * @param {String} message\n     */\n  const showError = function(message) {\n    cache.get('#wpstg-try-again').css('display', 'inline-block');\n    cache.get('#wpstg-cancel-cloning').text('Reset');\n    cache.get('#wpstg-resume-cloning').show();\n    cache.get('#wpstg-error-wrapper').show();\n    cache.get('#wpstg-error-details').show().html(message);\n    cache.get('#wpstg-removing-clone').removeClass('loading');\n    cache.get('.wpstg-loader').hide();\n    $('.wpstg--modal--process--generic-problem').show().html(message);\n\n    // Error event information for Staging\n    $.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      dataType: 'json',\n      data: {\n        'action': 'wpstg_staging_job_error',\n        'accessToken': wpstg.accessToken,\n        'nonce': wpstg.nonce,\n        'error_message': message,\n      },\n    });\n  };\n\n  /**\n   * Show warning during cloning or push process when closing tab or browser, or changing page\n   * @param {beforeunload} event\n   * @return {null}\n   */\n  that.warnIfClosingDuringProcess = function(event) {\n    // Only some browsers show the message below, most say something like \"Changes you made may not be saved\" (Chrome) or \"You have unsaved changes. Exit?\"\n    event.returnValue = 'You MUST leave this window open while cloning/pushing. Please wait...';\n    return null;\n  };\n\n  /**\n     *\n     * @param response the error object\n     * @param prependMessage Overwrite default error message at beginning\n     * @param appendMessage Overwrite default error message at end\n     * @returns void\n     */\n\n  const showAjaxFatalError = function(response, prependMessage, appendMessage) {\n    prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n    appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n    if (response === false) {\n      showError(prependMessage + ' Error: No response.' + appendMessage);\n      window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n      return;\n    }\n\n    if (typeof response.error !== 'undefined' && response.error) {\n      console.error(response.message);\n      showError(prependMessage + ' Error: ' + response.message + appendMessage);\n      window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n      return;\n    }\n  };\n\n  /**\n     *\n     * @param response\n     * @return {{ok}|*}\n     */\n  const handleFetchErrors = function(response) {\n    if (!response.ok) {\n      showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n    }\n    return response;\n  };\n\n  /** Hide and reset previous thrown visible errors */\n  const resetErrors = function() {\n    cache.get('#wpstg-error-details').hide().html('');\n  };\n\n  /**\n     * Common Elements\n     */\n  const elements = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n    let urlSpinner = ajaxurl.replace('/admin-ajax.php', '') + '/images/spinner';\n    let timer;\n\n    if (2 < window.devicePixelRatio) {\n      urlSpinner += '-2x';\n    }\n\n    urlSpinner += '.gif';\n\n    ajaxSpinner = '<img src=\\'\\'' + urlSpinner + '\\' alt=\\'\\' class=\\'ajax-spinner general-spinner\\' />';\n\n    const getBaseValues = function() {\n      const path = $('#wpstg-use-target-dir').data('base-path');\n      const uri = $('#wpstg-use-target-hostname').data('base-uri');\n      return {\n        path,\n      };\n    };\n\n    $workFlow\n        .on('change', '#wpstg_network_clone', function(e) {\n          e.preventDefault();\n          $('.wpstg-button-select').trigger('click');\n        })\n    // Check / Un-check All Database Tables New\n        .on('click', '.wpstg-button-unselect', function(e) {\n          e.preventDefault();\n\n          if (false === that.areAllTablesChecked) {\n            cache.get('#wpstg_select_tables_cloning .wpstg-db-table').prop('selected', 'selected');\n            cache.get('.wpstg-button-unselect').text('Unselect All');\n            cache.get('.wpstg-db-table-checkboxes').prop('checked', true);\n            that.areAllTablesChecked = true;\n          } else {\n            cache.get('#wpstg_select_tables_cloning .wpstg-db-table').prop('selected', false);\n            cache.get('.wpstg-button-unselect').text('Select All');\n            cache.get('.wpstg-db-table-checkboxes').prop('checked', false);\n            that.areAllTablesChecked = false;\n          }\n        })\n\n    /**\n             * Select tables with certain tbl prefix | NEW\n             * @param obj e\n             * @returns {undefined}\n             */\n        .on('click', '.wpstg-button-select', function(e) {\n          e.preventDefault();\n          $('#wpstg_select_tables_cloning .wpstg-db-table').each(function() {\n            let regex = '^' + wpstg.tblprefix;\n            if (wpstg.isMultisite === '1' && !$('#wpstg_network_clone').is(':checked')) {\n              regex += '([^0-9])_*';\n            }\n\n            if ($(this).attr('name').match(regex)) {\n              $(this).prop('selected', 'selected');\n            } else {\n              $(this).prop('selected', false);\n            }\n          });\n        })\n    // Expand Directories\n        .on('click', '.wpstg-expand-dirs', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n\n          $this.siblings('.wpstg-subdir').slideToggle();\n        })\n    // When a directory checkbox is Selected\n        .on('change', 'input.wpstg-check-dir', function() {\n          const $directory = $(this).parent('.wpstg-dir');\n\n          if (this.checked) {\n            $directory.parents('.wpstg-dir').children('.wpstg-check-dir').prop('checked', true);\n            $directory.find('.wpstg-expand-dirs').removeClass('disabled');\n            $directory.find('.wpstg-subdir .wpstg-check-dir').prop('checked', true);\n          } else {\n            $directory.find('.wpstg-dir .wpstg-check-dir').prop('checked', false);\n            $directory.find('.wpstg-expand-dirs, .wpstg-check-subdirs').addClass('disabled');\n            $directory.find('.wpstg-check-subdirs').data('action', 'check').text('check');\n          }\n        })\n    // When a directory name is Selected\n        .on('change', 'href.wpstg-check-dir', function() {\n          const $directory = $(this).parent('.wpstg-dir');\n\n          if (this.checked) {\n            $directory.parents('.wpstg-dir').children('.wpstg-check-dir').prop('checked', true);\n            $directory.find('.wpstg-expand-dirs').removeClass('disabled');\n            $directory.find('.wpstg-subdir .wpstg-check-dir').prop('checked', true);\n          } else {\n            $directory.find('.wpstg-dir .wpstg-check-dir').prop('checked', false);\n            $directory.find('.wpstg-expand-dirs, .wpstg-check-subdirs').addClass('disabled');\n            $directory.find('.wpstg-check-subdirs').data('action', 'check').text('check');\n          }\n        })\n    // Check the max length of the clone name and if the clone name already exists\n        .on('keyup', '#wpstg-new-clone-id', function() {\n          // Hide previous errors\n          document.getElementById('wpstg-error-details').style.display = 'none';\n\n          // This request was already sent, clear it up!\n          if ('number' === typeof (timer)) {\n            clearInterval(timer);\n          }\n\n          // Early bail if site name is empty\n          if (this.value === undefined || this.value === '') {\n            cache.get('#wpstg-new-clone-id').removeClass('wpstg-error-input');\n            cache.get('#wpstg-start-cloning').removeAttr('disabled');\n            cache.get('#wpstg-clone-id-error').text('').hide();\n            return;\n          }\n\n          // Convert the site name to directory name (slugify the site name to create directory name)\n          const cloneDirectoryName = WPStagingCommon.slugify(this.value);\n\n          timer = setTimeout(\n              function() {\n                ajax(\n                    {\n                      action: 'wpstg_check_clone',\n                      accessToken: wpstg.accessToken,\n                      nonce: wpstg.nonce,\n                      directoryName: cloneDirectoryName,\n                    },\n                    function(response) {\n                      if (response.status === 'success') {\n                        cache.get('#wpstg-new-clone-id').removeClass('wpstg-error-input');\n                        cache.get('#wpstg-start-cloning').removeAttr('disabled');\n                        cache.get('#wpstg-clone-id-error').text('').hide();\n                      } else {\n                        cache.get('#wpstg-new-clone-id').addClass('wpstg-error-input');\n                        cache.get('#wpstg-start-cloning').prop('disabled', true);\n                        cache.get('#wpstg-clone-id-error').text(response.message).show();\n                      }\n                    },\n                );\n              },\n              500,\n          );\n        })\n    // Restart cloning process\n        .on('click', '#wpstg-start-cloning', function() {\n          resetErrors();\n          that.isCancelled = false;\n          that.getLogs = false;\n          that.progressBar = 0;\n        })\n        .on('input', '#wpstg-new-clone-id', function() {\n          if ($('#wpstg-clone-directory').length < 1) {\n            return;\n          }\n\n          const slug = WPStagingCommon.slugify(this.value).substring(0, 16);\n          const $targetDir = $('#wpstg-use-target-dir');\n          const $targetUri = $('#wpstg-use-target-hostname');\n          let path = $targetDir.data('base-path');\n          let uri = $targetUri.data('base-uri');\n\n          if (path) {\n            path = path.replace(/\\/+$/g, '') + '/' + slug + '/';\n          }\n\n          if (uri) {\n            uri = uri.replace(/\\/+$/g, '') + '/' + slug;\n          }\n\n\n          $('.wpstg-use-target-dir--value').text(path);\n          $('.wpstg-use-target-hostname--value').text(uri);\n\n          $targetDir.attr('data-path', path);\n          $targetUri.attr('data-uri', uri);\n          $('#wpstg_clone_dir').attr('placeholder', path);\n          $('#wpstg_clone_hostname').attr('placeholder', uri);\n        })\n        .on('input', '#wpstg_clone_hostname', function() {\n          if ($(this).val() === '' || validateTargetHost()) {\n            $('#wpstg_clone_hostname_error').remove();\n            return;\n          }\n          if (!validateTargetHost() && !$('#wpstg_clone_hostname_error').length) {\n            $('#wpstg-clone-directory tr:last-of-type').after('<tr><td>&nbsp;</td><td><p id=\"wpstg_clone_hostname_error\" style=\"color: red;\">&nbsp;Invalid host name. Please provide it in a format like http://example.com</p></td></tr>');\n          }\n        })\n    ;\n\n    cloneActions();\n  };\n\n  /* @returns {boolean} */\n  var validateTargetHost = function() {\n    const the_domain = $('#wpstg_clone_hostname').val();\n\n    if (the_domain === '') {\n      return true;\n    }\n\n    const reg = /^http(s)?:\\/\\/.*$/;\n    if (reg.test(the_domain) === false) {\n      return false;\n    }\n    return true;\n  };\n\n  /**\n     * Clone actions\n     */\n  var cloneActions = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow\n    // Cancel cloning\n        .on('click', '#wpstg-cancel-cloning', function() {\n          if (!confirm('Are you sure you want to cancel cloning process?')) {\n            return false;\n          }\n\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n          that.progressBar = 0;\n\n          $('#wpstg-processing-status').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          cancelCloning();\n        })\n    // Resume cloning\n        .on('click', '#wpstg-resume-cloning', function() {\n          resetErrors();\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n\n          that.isCancelled = false;\n\n          $('#wpstg-processing-status').text('Try to resume cloning process...');\n          $('#wpstg-error-details').hide();\n          $('.wpstg-loader').show();\n\n          $this.parent().append(ajaxSpinner);\n\n          that.startCloning();\n        })\n    // Cancel update cloning\n        .on('click', '#wpstg-cancel-cloning-update', function() {\n          resetErrors();\n\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n\n          $('#wpstg-cloning-result').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          cancelCloningUpdate();\n        })\n    // Restart cloning\n        .on('click', '#wpstg-restart-cloning', function() {\n          resetErrors();\n\n          const $this = $(this);\n\n          $('#wpstg-try-again, #wpstg-home-link').hide();\n          $this.prop('disabled', true);\n\n          that.isCancelled = true;\n\n          $('#wpstg-cloning-result').text('Please wait...this can take up a while.');\n          $('.wpstg-loader, #wpstg-show-log-button').hide();\n\n          $this.parent().append(ajaxSpinner);\n\n          restart();\n        })\n    // Delete clone - confirmation\n        .on('click', '.wpstg-remove-clone[data-clone]', function(e) {\n          resetErrors();\n          e.preventDefault();\n\n          const $existingClones = cache.get('#wpstg-existing-clones');\n\n          $workFlow.removeClass('active');\n\n          cache.get('.wpstg-loader').show();\n\n          ajax(\n              {\n                action: 'wpstg_confirm_delete_clone',\n                accessToken: wpstg.accessToken,\n                nonce: wpstg.nonce,\n                clone: $(this).data('clone'),\n              },\n              function(response) {\n                cache.get('#wpstg-removing-clone').html(response);\n\n                $existingClones.children('img').remove();\n\n                cache.get('.wpstg-loader').hide();\n\n                $('html, body').animate({\n                  // This logic is meant to be a \"scrollBottom\"\n                  scrollTop: $('#wpstg-remove-clone').offset().top - $(window).height() +\n                                $('#wpstg-remove-clone').height() + 50,\n                }, 100);\n              },\n              'HTML',\n          );\n        })\n    // Delete clone - confirmed\n        .on('click', '#wpstg-remove-clone', function(e) {\n          resetErrors();\n          e.preventDefault();\n\n          cache.get('#wpstg-removing-clone').addClass('loading');\n\n          cache.get('.wpstg-loader').show();\n\n          deleteClone($(this).data('clone'));\n        })\n    // Cancel deleting clone\n        .on('click', '#wpstg-cancel-removing', function(e) {\n          e.preventDefault();\n          $('.wpstg-clone').removeClass('active');\n          cache.get('#wpstg-removing-clone').html('');\n        })\n    // Update\n        .on('click', '.wpstg-execute-clone', function(e) {\n          e.preventDefault();\n\n          const clone = $(this).data('clone');\n\n          $workFlow.addClass('loading');\n          that.cloneExcludeFilters = null;\n          ajax(\n              {\n                action: 'wpstg_scanning',\n                clone: clone,\n                accessToken: wpstg.accessToken,\n                nonce: wpstg.nonce,\n              },\n              function(response) {\n                if (response.length < 1) {\n                  showError(\n                      'Something went wrong! Error: No response.  Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n                  );\n                }\n\n                const jsonResponse = tryParseJson(response);\n                if (jsonResponse !== false && jsonResponse.success === false) {\n                  $workFlow.removeClass('loading');\n                  showErrorModal(jsonResponse);\n\n                  return;\n                }\n\n                $workFlow.removeClass('loading').html(response);\n                // register check disk space function for clone update process.\n                checkDiskSpace();\n                that.directoryNavigator = new WpstgDirectoryNavigation('#wpstg-directories-listing', wpstg, that.notyf);\n                that.cloneExcludeFilters = new WpstgExcludeFilters();\n                that.switchStep(2);\n              },\n              'HTML',\n          );\n        })\n    // Reset Clone\n        .on('click', '.wpstg-reset-clone', function(e) {\n          e.preventDefault();\n          const clone = $(this).data('clone');\n          const resetModal = new WpstgResetModal(clone);\n          const promise = resetModal.showModal();\n          that.areAllTablesChecked = true;\n\n          promise.then((result) => {\n            if (result.value) {\n              const dirNavigator = resetModal.getDirectoryNavigator();\n              const exclFilters = resetModal.getExcludeFilters().getExcludeFilters();\n              resetClone(clone, {\n                includedTables: getIncludedTables(),\n                excludeSizeRules: encodeURIComponent(exclFilters.sizes),\n                excludeGlobRules: encodeURIComponent(exclFilters.globs),\n                excludedDirectories: dirNavigator.getExcludedDirectories(),\n                extraDirectories: dirNavigator.getExtraDirectoriesRootOnly(),\n              });\n            }\n          });\n\n          return;\n        });\n  };\n\n  /**\n   * Ajax Requests\n   * @param Object data\n   * @param Function callback\n   * @param string dataType\n   * @param bool showErrors\n   * @param int tryCount\n   * @param float incrementRatio\n   */\n  var ajax = function(data, callback, dataType, showErrors, tryCount, incrementRatio = null) {\n    if ('undefined' === typeof (dataType)) {\n      dataType = 'json';\n    }\n\n    if (false !== showErrors) {\n      showErrors = true;\n    }\n\n    tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n    const retryLimit = 5;\n\n    let retryTimeout = 10000 * tryCount;\n\n    incrementRatio = parseInt(incrementRatio);\n    if (!isNaN(incrementRatio)) {\n      retryTimeout *= incrementRatio;\n    }\n\n    $.ajax({\n      url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n      type: 'POST',\n      dataType: dataType,\n      cache: false,\n      data: data,\n      error: function(xhr, textStatus, errorThrown) {\n        // try again after 10 seconds\n        tryCount++;\n        if (tryCount <= retryLimit) {\n          console.log('RETRYING ' + tryCount + '/' + retryLimit);\n          setTimeout(function() {\n            ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n            return;\n          }, retryTimeout);\n        } else {\n          console.log('RETRYING LIMIT');\n          const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n          showError(\n              'Fatal Error:  ' + errorCode + ' Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n          );\n        }\n      },\n      success: function(data) {\n        if ('function' === typeof (callback)) {\n          callback(data);\n        }\n      },\n      statusCode: {\n        404: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 404 - Can\\'t find ajax request URL! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n          }\n        },\n        500: function() {\n          if (tryCount >= retryLimit) {\n            showError('Fatal Error 500 - Internal server error while processing the request! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n          }\n        },\n        504: function() {\n          if (tryCount > retryLimit) {\n            showError('Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n          }\n        },\n        502: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n          }\n        },\n        503: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n          }\n        },\n        429: function() {\n          if (tryCount >= retryLimit) {\n            showError('Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n          }\n        },\n        403: function() {\n          if (tryCount >= retryLimit) {\n            showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n          }\n        },\n      },\n    });\n  };\n\n  /**\n   * Next / Previous Step Clicks to Navigate Through Staging Job\n   */\n  const stepButtons = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow\n    // Next Button\n        .on('click', '.wpstg-next-step-link', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n          const isScan = false;\n\n          if ($('#wpstg_clone_hostname').length && !validateTargetHost()) {\n            $('#wpstg_clone_hostname').focus();\n            return false;\n          }\n\n          if ($this.data('action') === 'wpstg_update' || $this.data('action') === 'wpstg_reset') {\n          // Update / Reset Clone - confirmed\n            let onlyUpdateMessage = '';\n            if ($this.data('action') === 'wpstg_update') {\n              onlyUpdateMessage = ' \\n\\nExclude all tables and folders you do not want to overwrite, first! \\n\\nDo not cancel the updating process! This can break your staging site. \\n\\n\\Create a backup of your staging website before you proceed.';\n            }\n\n            if (!confirm('STOP! This will overwrite your staging site with all selected data from the production site! This should be used only if you want to clone again your production site. Are you sure you want to do this?' + onlyUpdateMessage)) {\n              return false;\n            }\n          }\n\n          // Button is disabled\n          if ($this.attr('disabled')) {\n            return false;\n          }\n\n          if ($this.data('action') === 'wpstg_cloning') {\n          // Verify External Database If Checked and Not Skipped\n            if ($('#wpstg-ext-db').is(':checked')) {\n              verifyExternalDatabase($this, $workFlow);\n              return;\n            }\n          }\n\n          proceedCloning($this, $workFlow);\n        })\n    // Previous Button\n        .on('click', '.wpstg-prev-step-link', function(e) {\n          e.preventDefault();\n          cache.get('.wpstg-loader').removeClass('wpstg-finished');\n          cache.get('.wpstg-loader').hide();\n          loadOverview();\n        });\n  };\n\n  /**\n   * Get Included (Checked) Database Tables\n   * @return {Array}\n   */\n  const getIncludedTables = function() {\n    const includedTables = [];\n\n    $('#wpstg_select_tables_cloning option:selected').each(function() {\n      includedTables.push(this.value);\n    });\n\n    return includedTables;\n  };\n\n  /**\n   * Get Excluded (Unchecked) Database Tables\n   * Not used anymore!\n   * @return {Array}\n   */\n  const getExcludedTables = function() {\n    const excludedTables = [];\n\n    $('.wpstg-db-table input:not(:checked)').each(function() {\n      excludedTables.push(this.name);\n    });\n\n    return excludedTables;\n  };\n\n  /**\n   * Verify External Database for Cloning\n   */\n  var verifyExternalDatabase = function($this, workflow) {\n    cache.get('.wpstg-loader').show();\n    ajax(\n        {\n          action: 'wpstg_database_verification',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          databaseUser: cache.get('#wpstg_db_username').val(),\n          databasePassword: cache.get('#wpstg_db_password').val(),\n          databaseServer: cache.get('#wpstg_db_server').val(),\n          databaseDatabase: cache.get('#wpstg_db_database').val(),\n        },\n        function(response) {\n        // Undefined Error\n          if (false === response) {\n            showError(\n                'Something went wrong! Error: No response.' +\n            'Please try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            cache.get('.wpstg-loader').hide();\n            return;\n          }\n\n          // Throw Error\n          if ('undefined' === typeof (response.success)) {\n            showError(\n                'Something went wrong! Error: Invalid response.' +\n            'Please try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            cache.get('.wpstg-loader').hide();\n            return;\n          }\n\n          if (response.success) {\n            cache.get('.wpstg-loader').hide();\n            proceedCloning($this, workflow);\n            return;\n          }\n\n          if (response.error_type === 'comparison') {\n            cache.get('.wpstg-loader').hide();\n            let render = '<table class=\"wpstg-db-comparison-table\"><thead><tr><th>Property</th><th>Production DB</th><th>Staging DB</th><th>Status</th></tr></thead><tbody>';\n            response.checks.forEach((x) => {\n              let icon = '<span class=\"wpstg-css-tick\"></span>';\n              if (x.production !== x.staging) {\n                icon = '<span class=\"wpstg-css-cross\"></span>';\n              }\n              render += '<tr><td>' + x.name + '</td><td>' + x.production + '</td><td>' + x.staging + '</td><td>' + icon + '</td></tr>';\n            });\n            render += '</tbody></table><p>Note: Some MySQL/MariaDB properties do not match. You may proceed but the staging site may not work as expected.</p>';\n            WPStagingCommon.getSwalModal(true, {\n              popup: 'wpstg-swal-popup wpstg-db-comparison-modal centered-modal',\n            }).fire({\n              title: 'Different Database Properties',\n              icon: 'warning',\n              html: render,\n              width: '650px',\n              focusConfirm: false,\n              confirmButtonText: 'Proceed',\n              showCancelButton: true,\n            }).then(function(result) {\n              if (result.value) {\n                proceedCloning($this, workflow);\n              }\n            });\n            return;\n          }\n\n          WPStagingCommon.getSwalModal(true).fire({\n            title: 'Different Database Properties',\n            icon: 'error',\n            html: response.message,\n            focusConfirm: true,\n            confirmButtonText: 'Ok',\n            showCancelButton: false,\n          });\n          cache.get('.wpstg-loader').hide();\n        },\n        'json',\n        false,\n    );\n  };\n\n  /**\n   * Get Cloning Step Data\n   */\n  const getCloningData = function() {\n    if ('wpstg_cloning' !== that.data.action && 'wpstg_update' !== that.data.action && 'wpstg_reset' !== that.data.action) {\n      return;\n    }\n\n    that.data.cloneID = new Date().getTime().toString();\n    if ('wpstg_update' === that.data.action) {\n      that.data.cloneID = $('#wpstg-new-clone-id').data('clone');\n    }\n\n    that.data.cloneName = $('#wpstg-new-clone-id').val() || that.data.cloneID;\n\n    // Remove this to keep &_POST[] small otherwise mod_security will throw error 404\n    // that.data.excludedTables = getExcludedTables();\n\n    if (that.directoryNavigator !== null) {\n      that.data.excludedDirectories = encodeURIComponent(that.directoryNavigator.getExcludedDirectories());\n      that.data.extraDirectories = encodeURIComponent(that.directoryNavigator.getExtraDirectoriesRootOnly());\n    }\n\n    that.data.excludeGlobRules = '';\n    that.data.excludeSizeRules = '';\n    if (that.cloneExcludeFilters instanceof WpstgExcludeFilters) {\n      const rules = that.cloneExcludeFilters.getExcludeFilters();\n      that.data.excludeGlobRules = encodeURIComponent(rules.globs);\n      that.data.excludeSizeRules = encodeURIComponent(rules.sizes);\n    }\n\n    that.data.includedTables = getIncludedTables();\n    that.data.databaseServer = $('#wpstg_db_server').val();\n    that.data.databaseUser = $('#wpstg_db_username').val();\n    that.data.databasePassword = $('#wpstg_db_password').val();\n    that.data.databaseDatabase = $('#wpstg_db_database').val();\n    that.data.databasePrefix = $('#wpstg_db_prefix').val();\n    const cloneDir = $('#wpstg_clone_dir').val();\n    that.data.cloneDir = encodeURIComponent($.trim(cloneDir));\n    that.data.cloneHostname = $('#wpstg_clone_hostname').val();\n    that.data.emailsAllowed = $('#wpstg_allow_emails').is(':checked');\n    that.data.networkClone = $('#wpstg_network_clone').is(':checked');\n    that.data.uploadsSymlinked = $('#wpstg_symlink_upload').is(':checked');\n    that.data.cleanPluginsThemes = $('#wpstg-clean-plugins-themes').is(':checked');\n    that.data.cleanUploadsDir = $('#wpstg-clean-uploads').is(':checked');\n  };\n\n  var proceedCloning = function($this, workflow) {\n    // Add loading overlay\n    workflow.addClass('loading');\n\n    // Prepare data\n    that.data = {\n      action: $this.data('action'),\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n    };\n\n    // Cloning data\n    getCloningData();\n\n    sendCloningAjax(workflow);\n  };\n\n  var sendCloningAjax = function(workflow) {\n    // Send ajax request\n    ajax(\n        that.data,\n        function(response) {\n        // Undefined Error\n          if (false === response) {\n            showError(\n                'Something went wrong!<br/><br/> Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n            'and try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n          }\n\n\n          if (response.length < 1) {\n            showError(\n                'Something went wrong! No response.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n            'and try again. If that does not help, ' +\n            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n          }\n\n          const jsonResponse = tryParseJson(response);\n          if (jsonResponse !== false && jsonResponse.success === false) {\n            workflow.removeClass('loading');\n            showErrorModal(jsonResponse);\n\n            return;\n          }\n\n          // Styling of elements\n          workflow.removeClass('loading').html(response);\n          that.cloneExcludeFilters = null;\n          if (that.data.action === 'wpstg_scanning') {\n            that.areAllTablesChecked = true;\n            that.directoryNavigator = new WpstgDirectoryNavigation('#wpstg-directories-listing', wpstg, that.notyf);\n            that.switchStep(2);\n            that.cloneExcludeFilters = new WpstgExcludeFilters();\n          } else if (that.data.action === 'wpstg_cloning' || that.data.action === 'wpstg_update' || that.data.action === 'wpstg_reset') {\n            that.switchStep(3);\n          }\n\n          // Start cloning\n          that.startCloning();\n        },\n        'HTML',\n    );\n  };\n\n  var showErrorModal = function(response) {\n    const errorModal = new WpstgModal('wpstg_modal_error', wpstg);\n    errorModal.show(Object.assign({\n      title: 'Error',\n      icon: 'error',\n      html: wpstg.i18n['somethingWentWrong'],\n      width: '500px',\n      confirmButtonText: 'Ok',\n      showCancelButton: false,\n      customClass: {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n        cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn',\n        actions: 'wpstg--modal--actions',\n        popup: 'wpstg-swal-popup centered-modal',\n      },\n      buttonsStyling: false,\n      reverseButtons: true,\n    }, response.swalOptions), {\n      type: response.type,\n    });\n  };\n\n  const tryParseJson = function(json) {\n    // early bail if not string\n    if (!json) {\n      return false;\n    }\n\n    try {\n      const object = JSON.parse(json);\n      if (object && typeof object === 'object') {\n        return object;\n      }\n    } catch (e) {\n      // do nothing on catch\n    }\n\n    return false;\n  };\n\n  var resetClone = function(clone, excludeOptions) {\n    that.data = {\n      action: 'wpstg_reset',\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n      cloneID: clone,\n    };\n\n    that.data = {...that.data, ...excludeOptions};\n\n    const $workFlow = cache.get('#wpstg-workflow');\n    sendCloningAjax($workFlow);\n  };\n\n  /**\n   * Loads Overview (first step) of Staging Job\n   */\n  var loadOverview = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow.addClass('loading');\n\n    ajax(\n        {\n          action: 'wpstg_overview',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response.length < 1) {\n            showError(\n                'Something went wrong! No response. Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report.',\n            );\n          }\n\n          const $currentStep = cache.get('.wpstg-current-step');\n\n          // Styling of elements\n          $workFlow.removeClass('loading').html(response);\n        },\n        'HTML',\n    );\n\n    that.switchStep(1);\n    cache.get('.wpstg-step3-cloning').show();\n    cache.get('.wpstg-step3-pushing').hide();\n  };\n\n  /**\n   * Load Tabs\n   */\n  const tabs = function() {\n    cache.get('#wpstg-workflow').on('click', '.wpstg-tab-header', function(e) {\n      e.preventDefault();\n\n      const $this = $(this);\n      const $section = cache.get($this.data('id'));\n\n      $this.toggleClass('expand');\n\n      $section.slideToggle();\n\n      const tabTriangle = $this.find('.wpstg-tab-triangle');\n\n      if ($this.hasClass('expand')) {\n        tabTriangle.removeClass('wpstg-no-icon');\n        tabTriangle.text('');\n        tabTriangle.addClass('wpstg-rotate-90');\n      } else {\n        tabTriangle.removeClass('wpstg-rotate-90');\n      }\n    });\n  };\n\n  /**\n   * Delete Clone\n   * @param {String} clone\n   */\n  var deleteClone = function(clone) {\n    const deleteDir = $('#deleteDirectory:checked').data('deletepath');\n\n    ajax(\n        {\n          action: 'wpstg_delete_clone',\n          clone: clone,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          excludedTables: getExcludedTables(),\n          deleteDir: deleteDir,\n        },\n        function(response) {\n          if (response) {\n            showAjaxFatalError(response);\n\n            // Finished\n            if ('undefined' !== typeof response.delete && (response.delete === 'finished' || response.delete === 'unfinished')) {\n              cache.get('#wpstg-removing-clone').removeClass('loading').html('');\n\n              if (response.delete === 'finished' && response.error === undefined) {\n                $('.wpstg-clone[data-clone-id=\"' + clone + '\"]').remove();\n              }\n\n              // No staging site message is also of type/class .wpstg-class but hidden\n              // We have just excluded that from search when counting no of clones\n              if ($('#wpstg-existing-clones .wpstg-clone').length < 1) {\n                cache.get('#wpstg-existing-clones').find('h3').text('');\n                cache.get('#wpstg-no-staging-site-results').show();\n              }\n\n              cache.get('.wpstg-loader').hide();\n              return;\n            }\n          }\n          // continue\n          if (true !== response) {\n            deleteClone(clone);\n            return;\n          }\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var cancelCloning = function() {\n    that.timer('stop');\n\n\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_cancel_clone',\n          clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n            cache.get('.wpstg-loader').hide();\n            // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloning();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var cancelCloningUpdate = function() {\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_cancel_update',\n          clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n          // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloningUpdate();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Cancel Cloning Process\n   */\n  var restart = function() {\n    if (true === that.isFinished) {\n      return true;\n    }\n\n    ajax(\n        {\n          action: 'wpstg_restart',\n          // clone: that.data.cloneID,\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n        },\n        function(response) {\n          if (response && 'undefined' !== typeof (response.delete) && response.delete === 'finished') {\n          // Load overview\n            loadOverview();\n            return;\n          }\n\n          if (true !== response) {\n          // continue\n            cancelCloningUpdate();\n            return;\n          }\n\n          // Load overview\n          loadOverview();\n        },\n    );\n  };\n\n  /**\n   * Scroll the window log to bottom\n   * @return void\n   */\n  const logscroll = function() {\n    const $div = cache.get('.wpstg-log-details');\n    if ('undefined' !== typeof ($div[0])) {\n      $div.scrollTop($div[0].scrollHeight);\n    }\n  };\n\n  /**\n   * Append the log to the logging window\n   * @param string log\n   * @return void\n   */\n  const getLogs = function(log) {\n    if (log != null && 'undefined' !== typeof (log)) {\n      if (log.constructor === Array) {\n        $.each(log, function(index, value) {\n          if (value === null) {\n            return;\n          }\n          if (value.type === 'ERROR') {\n            cache.get('.wpstg-log-details').append('<span class=\"wpstg--red\">[' + value.type + ']</span>-' + '[' + value.date + '] ' + value.message + '</br>');\n          } else {\n            cache.get('.wpstg-log-details').append('[' + value.type + ']-' + '[' + value.date + '] ' + value.message + '</br>');\n          }\n        });\n      } else {\n        cache.get('.wpstg-log-details').append('[' + log.type + ']-' + '[' + log.date + '] ' + log.message + '</br>');\n      }\n    }\n    logscroll();\n  };\n\n  /**\n   * Check diskspace\n   * @return string json\n   */\n  var checkDiskSpace = function() {\n    cache.get('#wpstg-check-space').on('click', function(e) {\n      cache.get('.wpstg-loader').show();\n      const excludedDirectories = encodeURIComponent(that.directoryNavigator.getExcludedDirectories());\n      const extraDirectories = encodeURIComponent(that.directoryNavigator.getExtraDirectoriesRootOnly());\n\n      ajax(\n          {\n            action: 'wpstg_check_disk_space',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            excludedDirectories: excludedDirectories,\n            extraDirectories: extraDirectories,\n          },\n          function(response) {\n            if (false === response) {\n              cache.get('#wpstg-clone-id-error').text('Can not detect required disk space').show();\n              cache.get('.wpstg-loader').hide();\n              return;\n            }\n\n            // Show required disk space\n            cache.get('#wpstg-clone-id-error').html(\n                'Estimated necessary disk space: ' + response.requiredSpace +\n              (response.errorMessage !== null ? ('<br>' + response.errorMessage) : '') +\n              '<br> <span style=\"color:#444;\">Before you proceed ensure your account has enough free disk space to hold the entire instance of the production site. You can check the available space from your hosting account (cPanel or similar).</span>').show();\n            cache.get('.wpstg-loader').hide();\n          },\n          'json',\n          false,\n      );\n    });\n  };\n\n  /**\n   * Show or hide animated loading icon\n   * @param isLoading bool\n   */\n  const isLoading = function(isLoading) {\n    if (!isLoading || isLoading === false) {\n      cache.get('.wpstg-loader').hide();\n    } else {\n      cache.get('.wpstg-loader').show();\n    }\n  };\n\n  /**\n   * Count up processing execution time\n   * @param string status\n   * @return html\n   */\n  that.timer = function(status) {\n    if (status === 'stop') {\n      const time = that.time;\n      that.time = 1;\n      clearInterval(that.executionTime);\n      return that.convertSeconds(time);\n    }\n\n\n    that.executionTime = setInterval(function() {\n      if (null !== document.getElementById('wpstg-processing-timer')) {\n        document.getElementById('wpstg-processing-timer').innerHTML = 'Elapsed Time: ' + that.convertSeconds(that.time);\n      }\n      that.time++;\n      if (status === 'stop') {\n        that.time = 1;\n        clearInterval(that.executionTime);\n      }\n    }, 1000);\n  };\n\n  /**\n   * Convert seconds to hourly format\n   * @param int seconds\n   * @return string\n   */\n  that.convertSeconds = function(seconds) {\n    const date = new Date(null);\n    date.setSeconds(seconds); // specify value for SECONDS here\n    return date.toISOString().substr(11, 8);\n  };\n\n  /**\n   * Start Cloning Process\n   * @type {Function}\n   */\n  that.startCloning = (function() {\n    resetErrors();\n\n    // Register function for checking disk space\n    checkDiskSpace();\n\n    if ('wpstg_cloning' !== that.data.action && 'wpstg_update' !== that.data.action && 'wpstg_reset' !== that.data.action) {\n      return;\n    }\n\n    that.isCancelled = false;\n\n    // Start the process\n    start();\n\n    // Functions\n    // Start\n    function start() {\n      cache.get('.wpstg-loader').show();\n      cache.get('#wpstg-cancel-cloning').text('Cancel');\n      cache.get('#wpstg-resume-cloning').hide();\n      cache.get('#wpstg-error-details').hide();\n\n\n      // Clone Database\n      setTimeout(function() {\n        // cloneDatabase();\n        window.addEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        processing();\n      }, wpstg.delayReq);\n\n      that.timer('start');\n    }\n\n\n    /**\n     * Start ajax processing\n     * @return string\n     */\n    var processing = function() {\n      if (true === that.isCancelled) {\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return false;\n      }\n\n      isLoading(true);\n\n      let excludedDirectories = '';\n      let extraDirectories = '';\n      if (that.directoryNavigator !== null) {\n        excludedDirectories = that.directoryNavigator.getExcludedDirectories();\n        extraDirectories = that.directoryNavigator.getExtraDirectoriesRootOnly();\n      }\n\n      // Show logging window\n      cache.get('.wpstg-log-details').show();\n\n      WPStaging.ajax(\n          {\n            action: 'wpstg_processing',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            excludedTables: getExcludedTables(),\n            excludedDirectories: encodeURIComponent(excludedDirectories),\n            extraDirectories: encodeURIComponent(extraDirectories),\n          },\n          function(response) {\n            showAjaxFatalError(response);\n\n            // Add Log messages\n            if ('undefined' !== typeof (response.last_msg) && response.last_msg) {\n              getLogs(response.last_msg);\n            }\n            // Continue processing\n            if (false === response.status) {\n              progressBar(response);\n\n              setTimeout(function() {\n                cache.get('.wpstg-loader').show();\n                processing();\n              }, wpstg.delayReq);\n            } else if (true === response.status && 'finished' !== response.status) {\n              cache.get('#wpstg-error-details').hide();\n              cache.get('#wpstg-error-wrapper').hide();\n              progressBar(response, true);\n              processing();\n            } else if ('finished' === response.status || ('undefined' !== typeof (response.job_done) && response.job_done)) {\n              window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n              finish(response);\n            }\n            ;\n          },\n          'json',\n          false,\n      );\n    };\n\n    // Finish\n    function finish(response) {\n      if (true === that.getLogs) {\n        getLogs();\n      }\n\n      progressBar(response);\n\n      // Add Log\n      if ('undefined' !== typeof (response.last_msg)) {\n        getLogs(response.last_msg);\n      }\n\n      cache.get('.wpstg-loader').hide();\n      cache.get('#wpstg-processing-header').html('Processing Complete');\n      $('#wpstg-processing-status').text('Succesfully finished');\n\n      cache.get('#wpstg_staging_name').html(that.data.cloneID);\n      cache.get('#wpstg-finished-result').show();\n      cache.get('#wpstg-cancel-cloning').hide();\n      cache.get('#wpstg-resume-cloning').hide();\n      cache.get('#wpstg-cancel-cloning-update').prop('disabled', true);\n\n      const $link1 = cache.get('#wpstg-clone-url-1');\n      const $link = cache.get('#wpstg-clone-url');\n      $link1.attr('href', response.url);\n      $link1.html(response.url);\n      $link.attr('href', response.url);\n\n      cache.get('#wpstg-remove-clone').data('clone', that.data.cloneID);\n\n      // Finished\n      that.isFinished = true;\n      that.timer('stop');\n\n\n      cache.get('.wpstg-loader').hide();\n      cache.get('#wpstg-processing-header').html('Processing Complete');\n\n      // show alert\n      let msg = wpstg.i18n.cloneResetComplete;\n      if (that.data.action === 'wpstg_update') {\n        msg = wpstg.i18n.cloneUpdateComplete;\n      }\n\n      if (that.data.action === 'wpstg_update' || that.data.action === 'wpstg_reset') {\n        cache.get('#wpstg-cancel-cloning-update').hide();\n        cache.get('.wpstg-prev-step-link').show();\n\n        WPStagingCommon.getSwalModal(true, {\n          confirmButton: 'wpstg--btn--confirm wpstg-green-button wpstg-button wpstg-link-btn wpstg-100-width',\n        }).fire({\n          title: '',\n          icon: 'success',\n          html: msg,\n          width: '500px',\n          focusConfirm: true,\n        });\n      }\n\n      return false;\n    }\n\n    /**\n     * Add percentage progress bar\n     * @param object response\n     * @return {Boolean}\n     */\n    var progressBar = function(response, restart) {\n      if ('undefined' === typeof (response.percentage)) {\n        return false;\n      }\n\n      if (response.job === 'database') {\n        cache.get('#wpstg-progress-db').width(response.percentage * 0.2 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 1 of 4 Cloning Database Tables...');\n      }\n\n      if (response.job === 'SearchReplace') {\n        cache.get('#wpstg-progress-db').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-db').html('1. Database');\n        // Assumption: All previous steps are done.\n        // This avoids bugs where some steps are skipped and the progress bar is incomplete as a result\n        cache.get('#wpstg-progress-db').width('20%');\n\n        cache.get('#wpstg-progress-sr').width(response.percentage * 0.1 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 2 of 4 Preparing Database Data...');\n      }\n\n      if (response.job === 'directories') {\n        cache.get('#wpstg-progress-sr').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-sr').html('2. Data');\n        cache.get('#wpstg-progress-sr').width('10%');\n\n        cache.get('#wpstg-progress-dirs').width(response.percentage * 0.1 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 3 of 4 Getting files...');\n      }\n      if (response.job === 'files') {\n        cache.get('#wpstg-progress-dirs').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-dirs').html('3. Files');\n        cache.get('#wpstg-progress-dirs').width('10%');\n\n        cache.get('#wpstg-progress-files').width(response.percentage * 0.6 + '%').html(response.percentage + '%');\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 4 of 4 Copy files...');\n      }\n      if (response.job === 'finish') {\n        cache.get('#wpstg-progress-files').css('background-color', '#3bc36b');\n        cache.get('#wpstg-progress-files').html('4. Copy Files');\n        cache.get('#wpstg-progress-files').width('60%');\n\n        cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Cloning Process Finished');\n      }\n    };\n  });\n\n  that.switchStep = function(step) {\n    cache.get('.wpstg-current-step')\n        .removeClass('wpstg-current-step');\n    cache.get('.wpstg-step' + step)\n        .addClass('wpstg-current-step');\n  };\n\n  /**\n   * Initiation\n   * @type {Function}\n   */\n  that.init = (function() {\n    loadOverview();\n    elements();\n    stepButtons();\n    tabs();\n    WPStagingCommon.listenTooltip();\n    new WpstgMainMenu();\n    new WpstgCloneStaging();\n    new WpstgCloningAdvanceSettings();\n    that.notyf = new Notyf({\n      duration: 10000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    });\n  });\n\n  /**\n   * Ajax call\n   * @type {ajax}\n   */\n  that.ajax = ajax;\n  that.showError = showError;\n  that.getLogs = getLogs;\n  that.loadOverview = loadOverview;\n\n  return that;\n})(jQuery);\n\njQuery(document).ready(function() {\n  WPStaging.init();\n  // This is necessary to make WPStaging var accessibile in WP Staging PRO js script\n  window.WPStaging = WPStaging;\n});\n\n/**\n * Report Issue modal\n */\njQuery(document).ready(function($) {\n  $('body').on('click', '#wpstg-report-issue-button', function(e) {\n    console.log('REPORT');\n    $('.wpstg--tab--active .wpstg-report-issue-form').toggleClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  $('body').on('click', '#wpstg-backups-report-issue-button', function(e) {\n    $('.wpstg--tab--active .wpstg-report-issue-form').toggleClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  $('body').on('click', '#wpstg-report-cancel', function(e) {\n    $('.wpstg--tab--active .wpstg-report-issue-form').removeClass('wpstg-report-show');\n    e.preventDefault();\n  });\n\n  $('body').on('click', '.wpstg--tab--active #wpstg-report-submit', function(e) {\n    const self = $(this);\n    sendIssueReport(self, 'false');\n    e.preventDefault();\n  });\n\n  /*\n     * Close Success Modal\n     */\n\n  $('body').on('click', '#wpstg-success-button', function(e) {\n    e.preventDefault();\n    $('.wpstg-report-issue-form').removeClass('wpstg-report-show');\n  });\n\n  function sendIssueReport(button, forceSend = 'false') {\n    const spinner = button.next();\n    const email = $('.wpstg--tab--active .wpstg-report-email').val();\n    const hosting_provider = $('.wpstg--tab--active .wpstg-report-hosting-provider').val();\n    const message = $('.wpstg--tab--active .wpstg-report-description').val();\n    const syslog = $('.wpstg--tab--active .wpstg-report-syslog').is(':checked');\n    const terms = $('.wpstg--tab--active .wpstg-report-terms').is(':checked');\n\n    button.attr('disabled', true);\n    spinner.css('visibility', 'visible');\n\n    $.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      dataType: 'json',\n      async: true,\n      data: {\n        'action': 'wpstg_send_report',\n        'accessToken': wpstg.accessToken,\n        'nonce': wpstg.nonce,\n        'wpstg_email': email,\n        'wpstg_provider': hosting_provider,\n        'wpstg_message': message,\n        'wpstg_syslog': +syslog,\n        'wpstg_terms': +terms,\n        'wpstg_force_send': forceSend,\n      },\n    }).done(function(data) {\n      button.attr('disabled', false);\n      spinner.css('visibility', 'hidden');\n\n      if (data.errors.length > 0) {\n        $('.wpstg--tab--active .wpstg-report-issue-form .wpstg-message').remove();\n\n        let errorMessage = $('<div />').addClass('wpstg-message wpstg-error-message');\n        $.each(data.errors, function(key, value) {\n          if (value.status === 'already_submitted') {\n            errorMessage = '';\n            // TODO: remove default custom classes\n            WPStagingCommon.getSwalModal(true, {\n              container: 'wpstg-issue-resubmit-confirmation',\n            }).fire({\n              title: '',\n              icon: 'warning',\n              html: value.message,\n              showCancelButton: true,\n              focusConfirm: false,\n              confirmButtonText: 'Yes',\n              cancelButtonText: 'No',\n            }).then((result) => {\n              if (result.isConfirmed) {\n                sendIssueReport(button, 'true');\n              }\n            });\n          } else {\n            errorMessage.append('<p>' + value + '</p>');\n          }\n        });\n\n        $('.wpstg--tab--active .wpstg-report-issue-form').prepend(errorMessage);\n      } else {\n        const successMessage = $('<div />').addClass('wpstg-message wpstg-success-message');\n        successMessage.append('<p>Thanks for submitting your request! You should receive an auto reply mail with your ticket ID immediately for confirmation!<br><br>If you do not get that mail please contact us directly at <strong>support@wp-staging.com</strong></p>');\n\n        $('.wpstg--tab--active .wpstg-report-issue-form').html(successMessage);\n        $('.wpstg--tab--active .wpstg-success-message').append('<div style=\"float:right;margin-top:10px;\"><a id=\"wpstg-success-button\" href=\"#\" class=\"wpstg--red\">[X] CLOSE</a></div>');\n\n        // Hide message\n        setTimeout(function() {\n          $('.wpstg--tab--active .wpstg-report-issue-form').removeClass('wpstg-report-active');\n        }, 2000);\n      }\n    });\n  }\n\n  // Open/close actions drop down menu\n  $(document).on('click', '.wpstg-dropdown>.wpstg-dropdown-toggler', function(e) {\n    e.preventDefault();\n    $(e.target).next('.wpstg-dropdown-menu').toggleClass('shown');\n\n    $(e.target).find('.wpstg-caret').toggleClass('wpstg-caret-up');\n  });\n\n  $(document).on('click', '.wpstg-caret', function(e) {\n    e.preventDefault();\n\n    const toggler = $(e.target).closest('.wpstg-dropdown-toggler');\n\n    if (toggler) {\n      toggler.trigger('click');\n    }\n  });\n\n  // Close action drop down menu if clicked anywhere outside\n  document.addEventListener('click', function(event) {\n    const isClickInside = event.target.closest('.wpstg-dropdown-toggler');\n    if (!isClickInside) {\n      const dropDown = document.getElementsByClassName('wpstg-dropdown-menu');\n      for (let i = 0; i < dropDown.length; i++) {\n        dropDown[i].classList.remove('shown');\n      }\n      $('.wpstg-caret').removeClass('wpstg-caret-up');\n    }\n  });\n\n  // \"Event info\" for backup errors\n  window.addEventListener('finishedProcessWithError', function(customEvent) {\n    $.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      dataType: 'json',\n      data: {\n        'action': 'wpstg_job_error',\n        'accessToken': wpstg.accessToken,\n        'nonce': wpstg.nonce,\n        'error_message': customEvent.detail.error,\n        'job_id': WPStagingCommon.getJobId(),\n      },\n    });\n  });\n});\n"],"names":["closest","Element","prototype","matches","msMatchesSelector","webkitMatchesSelector","s","el","this","call","parentElement","parentNode","nodeType","element","selector","qs","document","querySelector","all","querySelectorAll","addEvent","parent","evt","handler","addEventListener","event","target","slideDown","duration","style","display","overflow","height","offsetHeight","transitionProperty","transitionDuration","setTimeout","window","removeProperty","slideUp","handleDisplayDependencies","id","hiddenClass","getAttribute","container","showIfChecked","showIfUnchecked","checked","length","classList","remove","add","WpstgCloneStaging","pageWrapperId","wpstgObject","wpstg","pageWrapper","dom","enableButtonId","enableAction","notyf","Notyf","position","x","y","dismissible","types","type","background","icon","init","addEvents","_this","sendRequest","action","fetch","ajaxUrl","method","credentials","body","URLSearchParams","accessToken","nonce","headers","then","response","ok","json","Promise","reject","data","success","location","reload","message","_this2","error","i18n","console","warn","WpstgDirectoryNavigation","directoryListingSelector","directoryListingContainer","dirCheckboxSelector","dirExpandSelector","unselectAllDirsSelector","selectDefaultDirsSelector","fetchChildrenAction","currentCheckboxElement","currentParentDiv","currentLoader","existingExcludes","excludedDirectories","isDefaultSelected","preventDefault","log","getExcludedDirectories","toggleDirExpand","unselectAll","selectDefault","parseExcludes","previousSibling","dirPath","value","isChecked","forceDefault","setAttribute","dirContainer","createElement","innerHTML","JSON","parse","directoryListing","appendChild","alert","forEach","_this3","isParentExcluded","push","exclude","isScanned","join","settings","directorySeparator","path","isParentAlreadyExcluded","dir","startsWith","getExtraDirectoriesRootOnly","extraDirectories","extraDirectoriesTextArea","extraCustomDirectories","split","concat","map","substr","slice","scanned","WpstgExcludeFilters","excludeFilterContainerSelector","excludeContainer","excludeTableBody","addFileSizeExclude","addFileExtExclude","addFileNameExclude","addDirNameExclude","clearExcludes","removeExclude","addExcludeRuleRow","templateName","excludeRowTemplate","excludeRow","content","cloneNode","e","removeChild","trim","getExcludeFilters","globExcludes","sizeExcludes","sizeCompares","sizeSizes","sizeByte","Object","entries","key","sizeInput","ext","cleanStringForGlob","fileNamesPos","fileNames","fileInput","fileName","dirNamesPos","dirNames","dirInput","dirName","filter","onlyUnique","index","self","indexOf","replace","WpstgModal","confirmAction","show","swalOptions","additionalParams","callback","wpstgSwal","fire","result","triggerConfirmAction","assign","onOver","onOut","pX","pY","mouseOver","focused","h","state","timer","options","sensitivity","interval","timeout","handleFocus","tracker","clientX","clientY","compare","clearTimeout","Math","abs","undefined","dispatchOver","removeEventListener","onMouseOver","dispatchOut","delay","onMouseOut","onFocus","onBlur","removeFocus","opt","focusOptionChanged","$","WPStagingCommon","continueErrorHandle","cache","elements","get","inArray","refresh","setJobId","jobId","localStorage","setItem","getJobId","getItem","listenTooltip","wpstgHoverIntent","visibility","isEmpty","obj","prop","hasOwnProperty","getSwalModal","isContentCentered","customClasses","defaultCustomClasses","confirmButton","cancelButton","actions","popup","customClass","buttonsStyling","reverseButtons","showClass","mixin","showSuccessModal","htmlContent","showConfirmButton","showCancelButton","cancelButtonText","title","html","showWarningModal","showErrorModal","getSwalContainer","getContainer","closeSwalModal","close","getDataFromWordPressResponse","Error","Array","shift","isLoading","hide","slugify","url","toString","toLowerCase","normalize","showAjaxFatalError","prependMessage","appendMessage","showError","WPStaging","warnIfClosingDuringProcess","handleFetchErrors","status","statusText","css","text","removeClass","resetErrors","ajax","dataType","showErrors","tryCount","incrementRatio","errorCallback","retryLimit","retryTimeout","parseInt","isNaN","ajaxurl","Date","now","xhr","textStatus","errorThrown","errorCode","statusCode","jQuery","WpstgResetModal","cloneID","workflowSelector","fetchExcludeSettingsAction","modalErrorAction","workflow","resetButtonClass","resetModalContainerClass","resetTabSelector","directoryNavigator","excludeFilters","isAllTablesChecked","resetModalContainer","toggleContent","selectDefaultTables","toggleTableSelection","toggleDirectoryNavigation","updateDirectorySelection","contentId","tabTriangle","isCollapsed","contains","transform","showModal","swalPromise","loadModal","fetchCloneExcludes","getAjaxLoader","width","focusConfirm","confirmButtonText","resetClone","clone","job","modal","renderError","getDirectoryNavigator","wpstgIcon","cbElement","subDirectories","sibling","nextElementSibling","parElem","i","children","multisitePattern","tblprefix","singleSitePattern","option","name","isMultisite","match","removeAttribute","WpstgCloningAdvanceSettings","baseContainerSelector","baseContainer","checkBoxSettingTogglerSelector","toggleSettings","WpstgMainMenu","activeTabClass","mainMenu","$this","targetElements","menuItems","menuItem","targetElement","dispatchEvent","Event","ajaxSpinner","that","isCancelled","isFinished","getLogs","time","executionTime","progressBar","cloneExcludeFilters","areAllTablesChecked","returnValue","validateTargetHost","the_domain","val","test","cloneActions","$workFlow","on","confirm","append","cancelCloning","startCloning","cancelCloningUpdate","restart","$existingClones","animate","scrollTop","offset","top","addClass","deleteClone","jsonResponse","tryParseJson","checkDiskSpace","switchStep","resetModal","promise","dirNavigator","exclFilters","includedTables","getIncludedTables","excludeSizeRules","encodeURIComponent","sizes","excludeGlobRules","globs","each","getExcludedTables","excludedTables","verifyExternalDatabase","databaseUser","databasePassword","databaseServer","databaseDatabase","proceedCloning","error_type","render","checks","production","staging","getTime","cloneName","rules","databasePrefix","cloneDir","cloneHostname","emailsAllowed","is","networkClone","uploadsSymlinked","cleanPluginsThemes","cleanUploadsDir","getCloningData","sendCloningAjax","object","excludeOptions","loadOverview","deleteDir","find","$div","constructor","date","scrollHeight","requiredSpace","errorMessage","clearInterval","convertSeconds","setInterval","getElementById","seconds","setSeconds","toISOString","processing","delayReq","last_msg","job_done","$link1","$link","attr","msg","cloneResetComplete","cloneUpdateComplete","finish","percentage","toFixed","step","urlSpinner","devicePixelRatio","trigger","regex","siblings","slideToggle","$directory","parents","removeAttr","cloneDirectoryName","directoryName","slug","substring","$targetDir","$targetUri","uri","after","focus","onlyUpdateMessage","stepButtons","$section","toggleClass","hasClass","ready","sendIssueReport","button","forceSend","spinner","next","email","hosting_provider","syslog","terms","async","done","errors","isConfirmed","prepend","successMessage","toggler","dropDown","getElementsByClassName","customEvent","detail"],"mappings":"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"}