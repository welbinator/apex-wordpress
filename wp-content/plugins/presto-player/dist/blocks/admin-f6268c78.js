/*!
 * 
 * Presto Player
 * 
 * @author Presto Made, Inc
 * @version 0.1.0
 * @link undefined
 * @license GPL
 * 
 * Copyright (c) 2021 Presto Made, Inc
 * 
 * This software is released under the GPL License
 * https://opensource.org/licenses/GPL
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprestoPlayerblocksJsonp=window.wpackioprestoPlayerblocksJsonp||[]).push([[0],[,,,,,,,function(e,t,r){"use strict";r.d(t,"f",(function(){return l})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return u}));var n=wp.element,a=n.useRef,o=n.useEffect;function l(e){var t=a();return o((function(){t.current=e})),t.current}function c(e){var t=e.status,r=void 0===t?"success":t,n=e.message;wp.data.dispatch("core/notices").createNotice(r,n,{type:"snackbar"})}function i(e){var t,r=e.split(":");return r.length>1&&(t=60*parseInt(r[0])),parseInt(r[1])+parseInt(t)}function s(e){var t=parseInt(e,10),r=Math.floor(t/60);return t<10&&(t="0"+t),r+":"+t}function p(e){var t=e;if(!(t=t.replace(/[^\d\d:\d\d.-]/g,"")).includes(":"))return"".concat(t,":00");0===t.substr(0,t.indexOf(":")).length&&(t="0".concat(t));var r=t.indexOf(":");return t=t.substring(0,r+3)}function u(e){if(e){if(e.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/))return"youtube";if(e.match(/(https?:\/\/)?(www\.)?(player\.)?vimeo\.com\/([a-z]*\/)*([‌​0-9]{6,11})[?]?.*/))return"vimeo";if(e.indexOf("https://vz-")>-1&&e.indexOf("b-cdn.net")>-1)return"bunny"}return"self-hosted"}},function(e,t,r){"use strict";var n=wp.i18n.__;t.a=function(){return React.createElement("div",{className:"presto-player__pro-badge"},n("Pro","presto-player"))}},,function(e,t,r){"use strict";var n=r(1),a=r(0),o=wp.components,l=o.ColorPicker,c=o.ColorIndicator,i=o.Popover,s=o.Button,p=(o.Flex,wp.element),u=p.useState,d=p.useEffect,b=wp.i18n.__;t.a=function(e){var t=e.color,r=e.setColor,o=e.onFocus,p=u(!1),m=Object(n.a)(p,2),y=m[0],v=m[1],f=u(t),h=Object(n.a)(f,2),O=h[0],g=h[1];return d((function(){y&&t&&g(t)}),[y]),Object(a.b)("span",null,Object(a.b)(c,{css:{width:"25px",height:"25px",borderRadius:"9999px"},colorValue:t,onClick:function(){v(!y),o&&o()}}),!!y&&Object(a.b)(i,{position:"bottom left",focusOnMount:!0,onFocusOutside:function(e){v(!1)}},Object(a.b)(l,{color:t||"",onChangeComplete:function(e){return(null==e?void 0:e.hex)&&r(e)},disableAlpha:!0}),Object(a.b)("div",{css:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px"}},Object(a.b)(s,{css:{margin:"0 5px"},isTertiary:!0,onClick:function(){r({hex:null}),v(!1)}},b("Reset","presto-player")),Object(a.b)("div",{css:{display:"flex",justifyContent:"flex-end",padding:"10px"}},Object(a.b)(s,{css:{margin:"0 5px"},isTertiary:!0,onClick:function(){r({hex:O}),v(!1)}},b("Cancel","presto-player")),Object(a.b)(s,{isPrimary:!0,onClick:function(){return v(!1)}},b("Apply","presto-player"))))))}},function(e,t,r){"use strict";var n,a=r(4),o=(n={visibility:{type:String,default:"public"},color:{type:String,default:"#00b3ff"},blockAlignment:{type:String},mutedPreview:{type:Object,default:{enabled:!1,captions:!1}},mutedOverlay:{type:Object,default:{enabled:!1,src:"",width:200,focalPoint:{x:.5,y:.5}}},mutedPreviewCaptions:{type:Boolean},mutedOverlayType:{type:String,default:"text"},mutedOverlayText:{type:String,default:"Click to play"},mutedOverlaySrc:{type:String},mutedOverlayImageWidth:{type:Number,default:200},mutedOverlayFocalPoint:{type:Object}},Object(a.a)(n,"mutedOverlay",{type:Object,default:{enabled:!1,type:"text",text:"",src:"",width:200,focalPoint:{x:.5,y:.5}}}),Object(a.a)(n,"autoplay",{type:Boolean}),Object(a.a)(n,"preload",{type:String}),Object(a.a)(n,"playsInline",{type:Boolean}),Object(a.a)(n,"id",{type:Number}),Object(a.a)(n,"attachment_id",{type:Number}),Object(a.a)(n,"src",{type:String}),Object(a.a)(n,"imageID",{type:Number}),Object(a.a)(n,"poster",{type:String}),Object(a.a)(n,"content",{type:Boolean}),Object(a.a)(n,"preset",{type:Number}),Object(a.a)(n,"chapters",{type:Array,default:[]}),Object(a.a)(n,"overlays",{type:Array,default:[]}),Object(a.a)(n,"tracks",{type:"array",items:{type:"object"},default:[]}),n);t.a={attributes:o,category:"presto",supports:{align:!0},save:function(){return null}}},function(e,t,r){"use strict";var n=r(4),a=r(23),o=r(7);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=wp.data.useSelect;t.a=function(e){var t,r,n,l=e.src,s=e.preset,p=e.branding,u=e.attributes,d=e.adminPreview,b=e.currentTime,m=e.preload,y=void 0===m?"metadata":m,v=e.overlays,f=u.chapters,h=u.mutedOverlay,O=u.mutedPreview,g=i((function(e){var t;return null===(t=e("presto-player/player"))||void 0===t?void 0:t.youtube()})),w=i((function(e){var t;return null===(t=e("presto-player/player"))||void 0===t?void 0:t.playerCSS()}));return React.createElement("div",{className:"wp-block-video presto-block-video",style:c(c(c({"--presto-player-border-radius":"".concat(null==s?void 0:s.border_radius,"px")},null!=s&&s.caption_background?{"--plyr-captions-background":s.caption_background}:{}),null!=p&&p.color?{"--plyr-color-main":p.color}:{}),{},{"--presto-player-email-border-radius":"".concat((null==s||null===(t=s.email_collection)||void 0===t?void 0:t.border_radius)||0,"px"),"--presto-player-logo-width":"".concat((null==p?void 0:p.logo_width)||75,"px")})},React.createElement(a.c,{src:l,css:w,currentTime:b,overlays:v,isAdmin:!0,preload:y,preset:s,bunny:{thumbnail:null==u?void 0:u.previewThumbnail,preview:null==u?void 0:u.preview},youtube:{channelId:null==g?void 0:g.channel_id},tracks:!(null==s||!s.captions)&&[{kind:"captions",label:"English",srclang:"en",src:"/path/to/captions.en.vtt",default:!0}],branding:p,chapters:f,blockAttributes:u,poster:u.poster,provider:Object(o.a)(l)},React.createElement("div",{slot:"player-end"},(null==O?void 0:O.enabled)&&(null==h?void 0:h.enabled)&&React.createElement("div",{className:"presto-player__overlay is-image",style:{position:"absolute",width:"".concat((null==h?void 0:h.width)||100,"%"),left:"".concat(100*((null==h||null===(r=h.focalPoint)||void 0===r?void 0:r.x)||.5),"%"),top:"".concat(100*((null==h||null===(n=h.focalPoint)||void 0===n?void 0:n.y)||.5),"%")}},React.createElement("img",{src:null==h?void 0:h.src,style:{transform:"translateX(-50%) translateY(-50%)"}})),d)))}},function(e,t,r){"use strict";function n(e){var t,r=(e||"").match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return r&&11===(null==r||null===(t=r[2])||void 0===t?void 0:t.length)?r[2]:null}function a(e){var t=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/.exec(e||"");return(null==t?void 0:t[5])||""}function o(e){var t=a(e);if(t)return{video_id:t,type:"vimeo"};var r=n(e);return r?{video_id:r,type:"youtube"}:{$video_id:0,$type:"none"}}function l(e){return"string"==typeof e&&e.includes(".m3u8")}r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return l}))},,function(e,t,r){"use strict";var n=wp.data.withSelect;t.a=function(e){return n((function(e){return{branding:e("presto-player/player").branding(),loading:e("presto-player/player").presetsLoading(),presets:e("presto-player/player").getPresets(),defaultPreset:e("presto-player/player").getDefaultPreset()}}))}},function(e,t,r){"use strict";var n=r(5),a=r(1),o=r(2),l=r.n(o),c=r(8),i=wp.i18n.__,s=wp.components,p=s.ColorPicker,u=s.Button,d=s.withNotices,b=s.BaseControl,m=s.RangeControl,y=wp.blockEditor,v=y.MediaUpload,f=y.MediaUploadCheck,h=wp.compose.useInstanceId,O=wp.element.useState,g=wp.data,w=g.dispatch,j=g.useSelect,E=["image"];var _=d((function e(t){t.setAttributes,t.attributes,t.type;var r,o=h(e),s=O(1),d=Object(a.a)(s,2),y=d[0],g=d[1],_=j((function(e){return e("presto-player/player").branding()})),R=function(){var e=Object(n.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("presto-player/player").saveOptions({branding:_});case 2:wp.data.dispatch("core/notices").createNotice("success","Player branding saved.",{type:"snackbar",isDismissible:!0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement("div",{className:"presto-player__panel--branding"},React.createElement("p",null,i("Here you can select the global player branding This will apply to all players on the site.","presto-player")),React.createElement(f,null,React.createElement(b,{className:"editor-video-poster-control"},React.createElement(b.VisualLabel,null,React.createElement("p",null,i("Logo Overlay","presto-player")," ",!(null!==(r=prestoPlayer)&&void 0!==r&&r.isPremium)&&React.createElement(c.a,null))),React.createElement(v,{title:i("Select logo overlay image","presto-player"),onSelect:function(e){w("presto-player/player").updateBranding("logo",e.url)},allowedTypes:E,render:function(e){var t=e.open;return React.createElement(u,{className:"presto-setting__logo",isSecondary:!0,onClick:function(){var e;null!==(e=prestoPlayer)&&void 0!==e&&e.isPremium?t():w("presto-player/player").setProModal(!0)},"aria-describedby":"video-block__logo-image-description-".concat(o)},null!=_&&_.logo?i("Replace","presto-player"):i("Select","presto-player"))}}),React.createElement("p",{id:"video-block__logo-image-description-".concat(o),hidden:!0},null!=_&&_.logo?sprintf(i("The current logo image url is %s","presto-player"),null==_?void 0:_.logo):i("There is no logo image currently selected","presto-player")),!(null==_||!_.logo)&&React.createElement(u,{onClick:function(){w("presto-player/player").updateBranding("logo","")},isTertiary:!0},i("Remove","presto-player")))),!(null==_||!_.logo)&&React.createElement(m,{label:i("Logo Max Width","presto-player"),value:(null==_?void 0:_.logo_width)||150,onChange:function(e){return w("presto-player/player").updateBranding("logo_width",e)},min:1,max:400}),React.createElement(p,{color:null==_?void 0:_.color,onChangeComplete:function(e){w("presto-player/player").updateBranding("color",e.hex)},key:y,disableAlpha:!0}),(null==_?void 0:_.color)&&React.createElement(b,null,React.createElement(u,{isSecondary:!0,onClick:function(){var e,t;w("presto-player/player").updateBranding("color",(null===(e=prestoPlayer)||void 0===e||null===(t=e.defaults)||void 0===t?void 0:t.color)||"#00b3ff"),g(y+1)}},i("Reset Color","presto-player"))),React.createElement(u,{isPrimary:!0,onClick:R},i("Save Branding","presto-player")))})),R=r(6),k=r(4),P=r(7),x=wp.i18n.__,C=wp.components,S=C.Flex,N=C.FlexItem,T=C.FlexBlock,D=C.TextControl,B=C.Button,L=wp.element.useState,A=function(e){var t=e.update,r=e.add,n=e.remove,o=e.className,l=e.time,c=e.title,i=(e.disabled,e.showNotice,L(l)),s=Object(a.a)(i,2),p=s[0],u=s[1];return React.createElement(S,{align:"center",className:o},React.createElement(N,null,React.createElement(D,Object(k.a)({className:"presto-player__caption--time",style:{width:"60px"},placeholder:"0:00",value:p,onChange:function(e){return u(e)},onBlur:function(){var e=Object(P.b)(p);t({time:e}),u(e)},autoComplete:"off"},"placeholder","0:00"))),React.createElement(T,null,React.createElement(D,{className:"presto-player__caption--title",placeholder:x("Title","presto-player"),value:c||"",onChange:function(e){return t({title:e})},autoComplete:"off"})),React.createElement(N,null,n&&React.createElement(B,{icon:"minus",className:"ph-chapter__remove",style:{marginBottom:"8px"},label:x("Remove Chapter","presto-player"),onClick:n}),r&&React.createElement(B,{icon:"plus-alt",className:"ph-chapter__add",label:x("Add Chapter","presto-player"),style:{marginBottom:"8px"},onClick:function(){r(),u("")}})))};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}wp.i18n.__;var F,M,U,z,H=wp.element.useState,W=wp.data.dispatch,Y=function(e){var t,r=e.setAttributes,n=e.attributes,o=function(){W("presto-player/player").setProModal(!0)};if(null===(t=prestoPlayer)||void 0===t||!t.isPremium)return React.createElement(A,{disabled:!0,className:"ph-chapter is-new",time:"",title:"",update:function(){},showNotice:o,add:o});var l=n.chapters,c=H({title:"",time:""}),i=Object(a.a)(c,2),s=i[0],p=i[1];return React.createElement(React.Fragment,null,(l||[]).sort((function(e,t){return parseInt(e.time.split(":")[0])-parseInt(t.time.split(":")[0])==0?parseInt(e.time.split(":")[1])-parseInt(t.time.split(":")[1]):parseInt(e.time.split(":")[0])-parseInt(t.time.split(":")[0])})).map((function(e,t){return React.createElement(A,{key:"".concat(t,"-").concat(e.time),className:"ph-chapter",time:e.time,title:e.title,chapter:e,update:function(t){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l.indexOf(e),a=l.map((function(e,r){return r!==n?e:V(V({},e),t)}));r({chapters:a})}(e,t)},remove:function(){!function(e){var t=l.indexOf(e);r({chapters:l.filter((function(e,r){return r!==t}))})}(e)}})})),React.createElement(A,{className:"ph-chapter is-new",time:s.time,title:s.title,update:function(e){p(V(V({},s),e))},add:function(){s.time&&s.title&&(r({chapters:[].concat(Object(R.a)(l||[]),[{time:s.time,title:s.title}])}),p({title:"",time:""}))}}))},G=r(3),q=r(34),Z=r(0),K=wp.i18n.__,Q=wp.element.useState,X=wp.data,$=(X.useSelect,X.dispatch),J=wp.components,ee=(J.withNotices,J.BaseControl),te=(J.Spinner,J.Button),re=function(e){var t,r=e.setAttributes,n=e.attributes,o=n.overlays,l=Q(!1),i=Object(a.a)(l,2),s=i[0],p=i[1];return Object(Z.b)(React.Fragment,null,Object(Z.b)(ee,null,Object(Z.b)(te,{isPrimary:!0,onClick:function(){var e;null!==(e=prestoPlayer)&&void 0!==e&&e.isPremium?p(!0):$("presto-player/player").setProModal(!0)}},o.length?K("Update Overlays","presto-player"):K("Add Overlay","presto-player"),!!o.length&&Object(Z.b)("div",{css:Object(Z.a)(F||(F=Object(G.a)(["\n                font-size: 10px;\n                background: #fff;\n                color: var(--wp-admin-theme-color);\n                font-weight: bold;\n                display: inline-block;\n                line-height: 6px;\n                padding: 5px;\n                border-radius: 9999px;\n                margin-left: 10px;\n              "])))},o.length)),!(null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium)&&Object(Z.b)(c.a,null)),s&&Object(Z.b)(q.a,{closeModal:function(){return p(!1)},attributes:n,setAttributes:r,updateOverlayAttribute:function(e){r({overlays:e})}}))},ne=r(18),ae=r.n(ne),oe=wp.i18n.__,le=wp.element,ce=le.useState,ie=le.useEffect,se=lodash,pe=se.partial,ue=se.noop,de=se.find,be=wp.components,me=be.NavigableMenu,ye=be.Animate,ve=function(e){var t,r=e.className,n=e.children,o=e.items,l=e.title,c=e.orientation,i=void 0===c?"horizontal":c,s=e.activeClass,p=void 0===s?"is-active":s,u=e.onSelect,d=void 0===u?ue:u,b=ce(null),m=Object(a.a)(b,2),y=m[0],v=m[1],f=ce("left"),h=Object(a.a)(f,2),O=(h[0],h[1]),g=function(e){v(e),d&&d(e)},w=function(e,t){t.click()},j=de(o,{name:y}),E="".concat(null!==(t=null==j?void 0:j.name)&&void 0!==t?t:"none");return ie((function(){O(y?"right":"left")}),[y]),React.createElement("div",{className:r},React.createElement(ye,{type:"slide-in",origin:j?"right":"left"},(function(e){var t=e.className;return j?React.createElement("div",{key:E,"aria-labelledby":E,role:"itempanel",id:"".concat(E,"-view"),className:ae()(t,"presto-player__menu-content")},React.createElement("div",{className:"presto-player__menu-items"},React.createElement("div",{className:"presto-player__menu-item is-back-button",onClick:function(){return g("")}},React.createElement("svg",{class:"back-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",role:"img","aria-hidden":"true",focusable:"false"},React.createElement("path",{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})),oe("Back","presto-player"))),n(j)):React.createElement("div",{className:ae()(t,"is-from-right")},!!l&&React.createElement("h2",null,l),React.createElement(me,{role:"itemlist",orientation:i,onNavigate:w,className:ae()("presto-player__menu-items")},o.map((function(e){return React.createElement("div",{className:ae()("presto-player__menu-item",e.className,Object(k.a)({},p,e.name===y)),itemId:"".concat(e.name),"aria-controls":"".concat(e.name,"-view"),selected:e.name===y,key:e.name,onClick:pe(g,e.name)},!!e.icon&&React.createElement("div",{class:"presto-player__menu-icon"},e.icon),e.title,React.createElement("svg",{className:"submenu-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",role:"img",ariaHidden:"true",focusable:"false"},React.createElement("path",{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})))}))))})))},fe=r(27),he=r(10),Oe=r(20);function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var je=wp.i18n.__,Ee=wp.components,_e=Ee.TextControl,Re=Ee.ExternalLink,ke=Ee.Button,Pe=(Ee.Flex,wp.element),xe=Pe.useState,Ce=Pe.useEffect,Se=wp.data,Ne=Se.useSelect,Te=Se.dispatch,De=function(e){var t=e.onClose,r=xe(""),o=Object(a.a)(r,2),c=o[0],i=o[1],s=xe(!1),p=Object(a.a)(s,2),u=p[0],d=p[1],b=wp.data.useSelect((function(e){return e("core").canUser("read","settings")})),m=Ne((function(e){return e("presto-player/player").youtube()}));Ce((function(){i(m.channel_id)}),[null==m?void 0:m.channel_id]);var y=function(){var e=Object(n.a)(l.a.mark((function e(r){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),d(!0),Te("presto-player/player").updateYoutube({channel_id:c}),n=we(we({},m),{channel_id:c}),e.prev=4,e.next=7,wp.apiFetch({path:"wp/v2/settings",method:"POST",data:{presto_player_youtube:n}});case 7:null!=(a=e.sent)&&a.presto_player_youtube&&(Te("presto-player/player").setYoutube(null==a?void 0:a.presto_player_youtube),t()),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:return e.prev=13,d(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[4,11,13,16]])})));return function(t){return e.apply(this,arguments)}}();return b?Object(Z.b)("form",{onSubmit:y},Object(Z.b)(_e,{css:Object(Z.a)(M||(M=Object(G.a)(["\n          margin-bottom: 0 !important;\n        "]))),label:je("Youtube Channel ID","presto-player"),help:Object(Z.b)("p",null,Object(Z.b)(Re,{href:"https://support.google.com/youtube/answer/3250431?hl=en"},je("Find my channel id","presto-player"))),value:c,onChange:function(e){return i(e)}}),Object(Z.b)(ke,{disabled:u,isBusy:u,css:Object(Z.a)(U||(U=Object(G.a)(["\n          margin-bottom: 1em;\n        "]))),isPrimary:!0,type:"submot"},je("Save","presto-player")),Object(Z.b)(ke,{onClick:t,css:Object(Z.a)(z||(z=Object(G.a)(["\n          margin-bottom: 1em;\n        "]))),isTertiary:!0},je("Cancel","presto-player"))):""};function Be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(r),!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ae=wp.i18n.__,Ie=wp.components,Ve=Ie.ToggleControl,Fe=Ie.Flex,Me=Ie.Button,Ue=Ie.BaseControl,ze=Ie.RangeControl,He=Ie.TextControl,We=Ie.SelectControl,Ye=Ie.TextareaControl,Ge=wp.element,qe=Ge.useEffect,Ze=Ge.useState,Ke=wp.data.useSelect,Qe=function(e){var t=e.state,r=e.updateState,n=e.className,o=t.action_bar,l=Ze(!1),c=Object(a.a)(l,2),i=c[0],s=c[1],p=Ke((function(e){return e("presto-player/player").branding()})),u=Ke((function(e){return e("presto-player/player").youtube()})),d=function(e){r(Le(Le({},t),{},{action_bar:Le(Le({},o),e)}))};qe((function(){null!=o&&o.text||d({text:"Like this video?"}),null!=o&&o.button_type||d({button_type:"custom"}),null!=o&&o.button_text||d({button_text:"Click Here"})}),[t]);return React.createElement("div",{className:n},React.createElement(Ue,null,React.createElement("h3",null,Ae("Action Bar","presto-player"))),React.createElement(Ue,{className:"presto-player__control--large-play"},React.createElement(Ve,{label:Ae("Enable","presto-player"),help:Ae("Show an action bar below your video while it's playing.","presto-player"),onChange:function(e){d({enabled:e})},checked:null==o?void 0:o.enabled})),!(null==o||!o.enabled)&&React.createElement(React.Fragment,null,React.createElement(Ue,{className:"presto-player__control--percentage-watched"},React.createElement(ze,{label:Ae("Display At (Percentage)","presto-player"),labelPosition:"top",onChange:function(e){d({percentage_start:e})},marks:[{value:0,label:Ae("Start","presto-player")},{value:50,label:Ae("50% Watched","presto-player")},{value:100,label:Ae("End","presto-player")}],shiftStep:5,value:(null==o?void 0:o.percentage_start)||0})),React.createElement(Ue,{className:"presto-player__control--large-play"},React.createElement(Ye,{label:Ae("Text","presto-player"),help:Ae("Action bar text.","presto-player"),value:null==o?void 0:o.text,onChange:function(e){return d({text:e})}})),React.createElement(Ue,{className:"presto-player__control--large-play"},React.createElement(Fe,null,React.createElement(Ue.VisualLabel,null,Ae("Action Bar Background","presto-player")),React.createElement(he.a,{color:(null==o?void 0:o.background_color)||"#1d1d1d",setColor:function(e){return d({background_color:e&&e.hex})}}))),React.createElement(Ue,null,React.createElement("h3",null,Ae("Button","presto-player"))),React.createElement(Ue,{className:"presto-player__control--button-type"},React.createElement(We,{label:Ae("Button Type","presto-player"),value:null==o?void 0:o.button_type,options:[{value:"custom",label:Ae("Custom","presto-player")},{value:"youtube",label:Ae("YouTube Subscribe","presto-player")},{value:"none",label:Ae("None","presto-player")}],onChange:function(e){return d({button_type:e})}})),"youtube"===(null==o?void 0:o.button_type)&&(null==u?void 0:u.channel_id)&&React.createElement(Ve,{label:Ae("Show Count","presto-player"),help:Ae("Show your follower count.","presto-player"),onChange:function(e){d({button_count:e})},checked:null==o?void 0:o.button_count}),function(){if("youtube"===(null==o?void 0:o.button_type))return i?React.createElement(De,{onClose:function(){return s(!1)}}):React.createElement("div",null,React.createElement(Me,{isSecondary:!0,onClick:function(e){e.preventDefault(),s(!0)}},null!=u&&u.channel_id?Ae("Update Youtube Channel Id","presto-player"):Ae("Add Youtube Channel Id","presto-player")),React.createElement("br",null),React.createElement("br",null),React.createElement("br",null))}(),"custom"===(null==o?void 0:o.button_type)&&React.createElement("div",null,React.createElement(Ue,{className:"presto-player__control--button-text"},React.createElement(He,{label:Ae("Button Text","presto-player"),help:React.createElement("p",null,Ae("Submit button text","presto-player")),value:null==o?void 0:o.button_text,onChange:function(e){return d({button_text:e})}})),React.createElement(Ue,{className:"presto-player__control--button-text"},React.createElement(Ue.VisualLabel,null,React.createElement("p",null," ",Ae("Button Link","presto-player"))),React.createElement(Oe.a,{setSettings:function(e){d({button_link:e})},settings:(null==o?void 0:o.button_link)||{}})),React.createElement(Ue,{className:"presto-player__control--button-radius"},React.createElement(ze,{label:Ae("Round Corners","presto-player"),help:Ae("Border radius of the button","presto-player"),value:(null==o?void 0:o.button_radius)||0,onChange:function(e){return d({button_radius:e})},min:0,max:25})),React.createElement(Ue,{className:"presto-player__control--button-color"},React.createElement(Fe,null,React.createElement(Ue.VisualLabel,null,Ae("Button Color","presto-player")),React.createElement(he.a,{color:(null==o?void 0:o.button_color)||(null==p?void 0:p.color),setColor:function(e){return d({button_color:e&&e.hex})}}))),React.createElement(Ue,{className:"presto-player__control--button-text-color"},React.createElement(Fe,null,React.createElement(Ue.VisualLabel,null,Ae("Button Text Color","presto-player")),React.createElement(he.a,{color:(null==o?void 0:o.button_text_color)||"#ffffff",setColor:function(e){return d({button_text_color:e&&e.hex})}}))))))},Xe=wp.i18n.__,$e=wp.components,Je=$e.ToggleControl,et=$e.BaseControl,tt=$e.HorizontalRule,rt=$e.__experimentalAlignmentMatrixControl,nt=$e.SelectControl,at=function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(et,null,React.createElement("h3",null,Xe("Behavior","presto-player"))),React.createElement(et,null,React.createElement(Je,{label:Xe("Auto-Hide Controls","presto-player"),help:Xe("Hide video controls automatically after 2 seconds of no mouse movement.","presto-player"),onChange:function(e){r({auto_hide:e})},checked:t.auto_hide})),React.createElement(et,null,React.createElement(Je,{label:Xe("Save Play Position","presto-player"),help:Xe("Saves the user's play position so when they come back to the page they can continue the video from where they left off.","presto-player"),onChange:function(e){r({save_player_position:e})},checked:t.save_player_position})),React.createElement(et,null,React.createElement(Je,{label:Xe("Captions On By Default","presto-player"),help:Xe("Toggles if captions should be active by default.","presto-player"),onChange:function(e){r({captions_enabled:e})},checked:t.captions_enabled})),React.createElement(et,null,React.createElement(Je,{label:Xe("Focus Mode","presto-player"),help:Xe("Play only when tab is visible and video is in viewport.","presto-player"),onChange:function(e){r({play_video_viewport:e})},checked:t.play_video_viewport})),React.createElement(et,null,React.createElement(Je,{label:Xe("Sticky On Scroll","presto-player"),help:Xe("Stick videos to the side of the screen when the page is scrolled and the video is playing.","presto-player"),onChange:function(e){r({sticky_scroll:e})},checked:t.sticky_scroll})),!!t.sticky_scroll&&React.createElement(React.Fragment,null,React.createElement(et,{label:Xe("Choose a position for your sticky player.","presto-player")},React.createElement(rt,{value:t.sticky_scroll_position,onChange:function(e){r({sticky_scroll_position:e})}}))),React.createElement(et,null,React.createElement(nt,{label:Xe("On Video End","presto-player"),value:t.on_video_end,options:[{value:"select",label:Xe("Select","presto-player")},{value:"loop",label:Xe("Loop","presto-player")},{value:"go-to-start",label:Xe("Go to start","presto-player")}],onChange:function(e){r({on_video_end:e})}})),React.createElement(tt,null),React.createElement(et,null),React.createElement(et,null,React.createElement("h3",null,Xe("Youtube","presto-player"))),React.createElement(et,null,React.createElement(Je,{label:Xe("Hide Youtube UI (Experimental)","presto-player"),help:Xe("Hides the Youtube logo and related videos.","presto-player"),onChange:function(e){r({hide_youtube:e})},checked:t.hide_youtube})),React.createElement(et,null,React.createElement(Je,{label:Xe("Lazy Load Videos","presto-player"),help:Xe("Improves page loading performance by only loading the video when clicked.","presto-player"),onChange:function(e){r({lazy_load_youtube:e})},checked:t.lazy_load_youtube})))},ot=wp.i18n.__,lt=wp.components,ct=lt.ToggleControl,it=lt.BaseControl,st=function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(it,null,React.createElement("h3",null,ot("Controls","presto-player"))),React.createElement(it,{className:"presto-player__control--large-play"},React.createElement(ct,{label:ot("Large Play Button","presto-player"),help:ot("Adds a large play button over the top of the player.","presto-player"),onChange:function(e){r({"play-large":e})},checked:t["play-large"]})),React.createElement(it,{className:"presto-player__control--rewind"},React.createElement(ct,{label:ot("Rewind","presto-player"),help:ot("Adds a 10 second rewind button to the player.","presto-player"),onChange:function(e){r({rewind:e})},checked:t.rewind})),React.createElement(it,{className:"presto-player__control--play"},React.createElement(ct,{label:ot("Small Play Button","presto-player"),help:ot("Adds a small play button to the bottom of the player.","presto-player"),onChange:function(e){r({play:e})},checked:t.play})),React.createElement(it,{className:"presto-player__control--fast-forward"},React.createElement(ct,{label:ot("Fast Forward","presto-player"),help:ot("Adds a 10 second rewind button to the player.","presto-player"),onChange:function(e){r({"fast-forward":e})},checked:t["fast-forward"]})),React.createElement(it,{className:"presto-player__control--progress"},React.createElement(ct,{label:ot("Progress Bar","presto-player"),help:ot("Shows a seekable progress bar.","presto-player"),onChange:function(e){r({progress:e})},checked:t.progress})),React.createElement(it,{className:"presto-player__control--current-time"},React.createElement(ct,{label:ot("Current Time","presto-player"),help:ot("Shows the video timestamp.","presto-player"),onChange:function(e){r({"current-time":e})},checked:t["current-time"]})),React.createElement(it,{className:"presto-player__control--volume"},React.createElement(ct,{label:ot("Volume","presto-player"),help:ot("Shows a volume bar.","presto-player"),onChange:function(e){r({volume:e,mute:e})},checked:t.volume})),React.createElement(it,{className:"presto-player__control--speed"},React.createElement(ct,{label:ot("Speed","presto-player"),help:ot("Shows playback speed controls.","presto-player"),onChange:function(e){r({speed:e})},checked:t.speed})),React.createElement(it,{className:"presto-player__control--pip"},React.createElement(ct,{label:ot("Picture In Picture (HTML5 only)","presto-player"),help:ot("Allows users to dock the player on their screen and watch when using other app on their computer.","presto-player"),onChange:function(e){r({pip:e})},checked:t.pip})),React.createElement(it,{className:"presto-player__control--fullscreen"},React.createElement(ct,{label:ot("Fullscreen","presto-player"),help:ot("Adds a button to allow the player to be fullscreen.","presto-player"),onChange:function(e){r({fullscreen:e})},checked:t.fullscreen})),React.createElement(it,{className:"presto-player__control--captions"},React.createElement(ct,{label:ot("Captions","presto-player"),help:ot("Shows a dedicated caption toggle button.","presto-player"),onChange:function(e){r({captions:e})},checked:t.captions})))},pt=r(28);function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var bt,mt,yt=wp.i18n.__,vt=wp.components,ft=vt.ToggleControl,ht=vt.BaseControl,Ot=vt.RadioControl,gt=vt.Flex,wt=vt.RangeControl,jt=wp.element.useEffect,Et=function(e){var t=e.state,r=e.updateState,n=e.className,a=t.watermark,o={text:yt("Enter your watermark text.","presto-player"),position:"top-right",color:"#fff",backgroundColor:"#333",opacity:80};jt((function(){Object.keys(o).forEach((function(e){var r;void 0===(null==t||null===(r=t.watermark)||void 0===r?void 0:r[e])&&l(Object(k.a)({},e,o[e]))}))}),[t]);var l=function(e){r(dt(dt({},t),{},{watermark:dt(dt({},a),e)}))};return React.createElement("div",{className:n},React.createElement(ht,null,React.createElement("h3",null,yt("Dynamic Watermark Text","presto-player"))),React.createElement(ht,{className:"presto-player__control--watermark"},React.createElement(ft,{label:yt("Enable","presto-player"),help:yt("Add a simulated dynamic watermark over your video.","presto-player"),onChange:function(e){l({enabled:e})},checked:null==a?void 0:a.enabled})),(null==a?void 0:a.enabled)&&React.createElement("div",null,React.createElement(pt.a,{text:null==a?void 0:a.text,update:function(e){var t=e.text;l({text:t})}}),React.createElement(ht,{className:n},React.createElement(Ot,{label:yt("Position","presto-player"),options:[{label:"Top Right",value:"top-right"},{label:"Top Left",value:"top-left"},{label:"Change Every 10 Seconds",value:"randomize"}],selected:(null==a?void 0:a.position)||"top-right",onChange:function(e){return l({position:e})}})),React.createElement(ht,{className:"presto-player__control-text-color"},React.createElement(gt,null,React.createElement(ht.VisualLabel,null,yt("Text Color","presto-player")),React.createElement(he.a,{color:(null==a?void 0:a.color)||"#fff",setColor:function(e){return l({color:e&&e.hex})}}))),React.createElement(ht,{className:"presto-player__control-text-color"},React.createElement(gt,null,React.createElement(ht.VisualLabel,null,yt("Background Color","presto-player")),React.createElement(he.a,{color:(null==a?void 0:a.backgroundColor)||"#333",setColor:function(e){return l({backgroundColor:e&&e.hex})}}))),React.createElement(ht,null,React.createElement(wt,{label:yt("Opacity","presto-player"),help:yt("Opacity percentage of the watermark.","presto-player"),value:(null==a?void 0:a.opacity)||100,onChange:function(e){return l({opacity:e})},min:0,max:100}))))};function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(r),!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var kt=wp.i18n.__,Pt=wp.components,xt=Pt.ToggleControl,Ct=Pt.BaseControl,St=Pt.RangeControl,Nt=Pt.TextControl,Tt=Pt.Flex,Dt=Pt.Button,Bt=Pt.TextareaControl,Lt=Pt.Notice,At=wp.element.useEffect,It=wp.data.useSelect;function Vt(e){var t=e.state,r=e.updateState,n=e.className,a=t.cta,o=t.email_collection,l=It((function(e){return e("presto-player/player").branding()})),c={percentage:100,show_rewatch:!0,show_skip:!0,headline:kt("Want to learn more?","presto-player"),show_button:!0,button_text:kt("Click Here","presto-player"),button_link:{opensInNewTab:!0}};At((function(){Object.keys(c).forEach((function(e){var r;void 0===(null==t||null===(r=t.cta)||void 0===r?void 0:r[e])&&i(Object(k.a)({},e,c[e]))}))}),[t]);var i=function(e){r(Rt(Rt({},t),{},{cta:Rt(Rt({},a),e)}))};return Object(Z.b)("div",{className:n},Object(Z.b)(Ct,null,Object(Z.b)("h3",null,kt("Call To Action","presto-player"))),Object(Z.b)(Ct,{className:"presto-player__control--large-play"},Object(Z.b)(xt,{label:kt("Enable","presto-player"),help:kt("Show an email collection form and message over your video.","presto-player"),onChange:function(e){i({enabled:e})},checked:null==a?void 0:a.enabled})),!(null==a||!a.enabled)&&Object(Z.b)(React.Fragment,null,Object(Z.b)(Ct,{className:"presto-player__control--percentage-watched"},Object(Z.b)(St,{label:kt("Display At (Percentage)","presto-player"),labelPosition:"top",onChange:function(e){i({percentage:e})},marks:[{value:0,label:kt("Start","presto-player")},{value:50,label:kt("50% Watched","presto-player")},{value:100,label:kt("End","presto-player")}],shiftStep:5,value:null==a?void 0:a.percentage})),(null==o?void 0:o.enabled)&&(null==o?void 0:o.percentage)===(null==a?void 0:a.percentage)&&Object(Z.b)(Lt,{css:Object(Z.a)(bt||(bt=Object(G.a)(["\n                  margin: 0 0 30px 0 !important;\n                "]))),status:"warning",isDismissible:!1},kt("You already have an email capture set display at the same time.","presto-player"),Object(Z.b)(Dt,{onClick:function(){r(Rt(Rt({},t),{},{email_collection:Rt(Rt({},o),{enabled:!1})}))},isLink:!0,css:Object(Z.a)(mt||(mt=Object(G.a)(["\n                    margin-top: 10px !important;\n                  "])))},kt("Disable Email Capture","presto-player"))),100===(null==a?void 0:a.percentage)?Object(Z.b)(Ct,{className:"presto-player__control--show-rewatch"},Object(Z.b)(xt,{label:kt("Show Rewatch Button","presto-player"),help:kt("Show a rewatch button at the end of the video.","presto-player"),onChange:function(e){i({show_rewatch:e})},checked:null==a?void 0:a.show_rewatch})):Object(Z.b)(Ct,{className:"presto-player__control--show-skip"},Object(Z.b)(xt,{label:kt("Allow Skipping","presto-player"),help:kt("Let the user continue watching the video.","presto-player"),onChange:function(e){i({show_skip:e})},checked:null==a?void 0:a.show_skip})),Object(Z.b)(Ct,{className:"presto-player__control--button-link"},Object(Z.b)(Ct.VisualLabel,null,Object(Z.b)("p",null," ",kt("Link","presto-player"))),Object(Z.b)(Oe.a,{setSettings:function(e){i({button_link:e})},settings:(null==a?void 0:a.button_link)||{}})),Object(Z.b)(Ct,{className:"presto-player__control--headline"},Object(Z.b)(Bt,{label:kt("Headline","presto-player"),help:kt("The headline for your form.","presto-player"),value:null==a?void 0:a.headline,onChange:function(e){i({headline:e})}})),Object(Z.b)(Ct,{className:"presto-player__control--bottom-text"},Object(Z.b)(Bt,{label:kt("Bottom Text","presto-player"),help:kt("Text displayed below the form. HTML allowed.","presto-player"),value:null==a?void 0:a.bottom_text,onChange:function(e){i({bottom_text:e})}})),Object(Z.b)(Ct,{className:"presto-player__control--show-button"},Object(Z.b)(xt,{label:kt("Show Button","presto-player"),help:kt("Show a call to action button.","presto-player"),onChange:function(e){i({show_button:e})},checked:null==a?void 0:a.show_button})),!(null==a||!a.show_button)&&Object(Z.b)("div",null,Object(Z.b)(Ct,{className:"presto-player__control--button-text"},Object(Z.b)(Nt,{label:kt("Button Text","presto-player"),help:Object(Z.b)("p",null,kt("Button text for the Call To Action","presto-player")),value:null==a?void 0:a.button_text,onChange:function(e){return i({button_text:e})}})),Object(Z.b)("h3",null,kt("Style","presto-player")),Object(Z.b)(Ct,null,Object(Z.b)(St,{label:kt("Round Corners","presto-player"),help:kt("Border radius of form elements.","presto-player"),value:(null==a?void 0:a.button_radius)||0,onChange:function(e){return i({button_radius:e})},min:0,max:25})),Object(Z.b)(Ct,{className:"presto-player__control--button-color"},Object(Z.b)(Tt,null,Object(Z.b)(Ct.VisualLabel,null,kt("Button Color","presto-player")),Object(Z.b)(he.a,{color:(null==a?void 0:a.button_color)||(null==l?void 0:l.color),setColor:function(e){return i({button_color:e&&e.hex})}}))),Object(Z.b)(Ct,{className:"presto-player__control--button-text-color"},Object(Z.b)(Tt,null,Object(Z.b)(Ct.VisualLabel,null,kt("Button Text Color","presto-player")),Object(Z.b)(he.a,{color:(null==a?void 0:a.button_text_color)||"#ffffff",setColor:function(e){return i({button_text_color:e&&e.hex})}})))),Object(Z.b)(Ct,null,Object(Z.b)(St,{label:kt("Background Opacity","presto-player"),help:kt("Opacity percentage of the cover background.","presto-player"),value:(null==a?void 0:a.background_opacity)||75,onChange:function(e){return i({background_opacity:e})},min:0,max:100}))))}Vt.defaultProps={catName:"Sandy",eyeColor:"deepblue",age:"120"};var Ft,Mt,Ut=Vt,zt=function(){return React.createElement("div",null,React.createElement("presto-player-skeleton",{style:{width:"30%",marginBottom:"10px"}}),React.createElement("presto-player-skeleton",{style:{height:"2rem",marginBottom:"20px"}}))},Ht=wp.i18n.__,Wt=wp.components,Yt=Wt.SelectControl,Gt=Wt.TextControl,qt=Wt.Notice,Zt=wp.element,Kt=Zt.useEffect,Qt=Zt.useState,Xt=function(e){var t=e.options,r=e.updateEmailState,o=Qt(!1),c=Object(a.a)(o,2),i=c[0],s=c[1],p=Qt([{value:null,label:Ht("Choose an audience","presto-player")}]),u=Object(a.a)(p,2),d=u[0],b=u[1],m=Qt(""),y=Object(a.a)(m,2),v=y[0],f=y[1],h=function(){var e=Object(n.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/mailchimp/lists"});case 4:t=e.sent,r=d,(t||[]).forEach((function(e){r=[].concat(Object(R.a)(r),[{value:e.id,label:e.name}])})),b(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&f(e.t0.message);case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return Kt((function(){h()}),[]),i?React.createElement("div",null,React.createElement(zt,null),React.createElement(zt,null)):v?React.createElement(qt,{className:"presto-notice",status:"error",isDismissible:!1},v):React.createElement("div",null,React.createElement(Yt,{label:Ht("Choose an audience","presto-player"),value:null==t?void 0:t.provider_list,options:d,onChange:function(e){return r({provider_list:e})}}),React.createElement(Gt,{label:Ht("Tag","presto-player"),help:React.createElement("p",null,Ht("Give this contact an optional tag when they are added to the list.","presto-player")),value:null==t?void 0:t.provider_tag,onChange:function(e){return r({provider_tag:e})}}))},$t=wp.i18n.__,Jt=wp.components,er=Jt.SelectControl,tr=Jt.Notice,rr=wp.element,nr=rr.useEffect,ar=rr.useState,or=function(e){var t=e.options,r=e.updateEmailState,o=ar(!1),c=Object(a.a)(o,2),i=c[0],s=c[1],p=ar([{value:null,label:$t("Choose a group","presto-player")}]),u=Object(a.a)(p,2),d=u[0],b=u[1],m=ar(""),y=Object(a.a)(m,2),v=y[0],f=y[1],h=function(){var e=Object(n.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/mailerlite/groups"});case 4:t=e.sent,r=d,(t||[]).forEach((function(e){r=[].concat(Object(R.a)(r),[{value:e.id,label:e.name}])})),b(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&f(e.t0.message);case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return nr((function(){h()}),[]),i?React.createElement(zt,null):v?React.createElement(tr,{className:"presto-notice",status:"error",isDismissible:!1},v):React.createElement("div",null,React.createElement(er,{label:$t("Choose a group","presto-player"),value:null==t?void 0:t.provider_list,options:d,onChange:function(e){return r({provider_list:e})}}))},lr=wp.i18n.__,cr=wp.components,ir=cr.SelectControl,sr=cr.Notice,pr=wp.element,ur=pr.useEffect,dr=pr.useState,br=function(e){var t=e.options,r=e.updateEmailState,o=dr(!1),c=Object(a.a)(o,2),i=c[0],s=c[1],p=dr(!1),u=Object(a.a)(p,2),d=u[0],b=u[1],m=dr([{value:null,label:lr("Choose a list","presto-player")}]),y=Object(a.a)(m,2),v=y[0],f=y[1],h=dr([{value:null,label:lr("Choose a tag","presto-player")}]),O=Object(a.a)(h,2),g=O[0],w=O[1],j=dr(""),E=Object(a.a)(j,2),_=E[0],k=E[1],P=function(){var e=Object(n.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/activecampaign/lists"});case 4:t=e.sent,r=v,(t||[]).forEach((function(e){r=[].concat(Object(R.a)(r),[{value:e.id,label:e.name||lr("Default list","presto-player")}])})),f(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&k(e.t0.message);case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(n.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/activecampaign/tags"});case 4:t=e.sent,r=g,(t||[]).forEach((function(e){r=[].concat(Object(R.a)(r),[{value:e.id,label:e.tag}])})),w(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&k(e.t0.message);case 13:return e.prev=13,b(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return ur((function(){P(),x()}),[]),_?React.createElement(sr,{className:"presto-notice",status:"error",isDismissible:!1},_):React.createElement("div",null,i?React.createElement(zt,null):v.length>1&&React.createElement(ir,{label:lr("Choose a list","presto-player"),value:null==t?void 0:t.provider_list,options:v,onChange:function(e){return r({provider_list:e})}}),d?React.createElement(zt,null):g.length>1&&React.createElement(ir,{label:lr("Choose a tag","presto-player"),value:null==t?void 0:t.provider_tag,options:g,onChange:function(e){return r({provider_tag:e})}}))},mr=wp.i18n.__,yr=wp.components,vr=yr.SelectControl,fr=yr.Notice,hr=wp.element,Or=hr.useEffect,gr=hr.useState,wr=function(e){var t=e.options,r=e.updateEmailState,o=gr(!1),c=Object(a.a)(o,2),i=c[0],s=c[1],p=gr(!1),u=Object(a.a)(p,2),d=u[0],b=u[1],m=gr([{value:null,label:mr("Choose a list","presto-player")}]),y=Object(a.a)(m,2),v=y[0],f=y[1],h=gr([{value:null,label:mr("Choose a tag","presto-player")}]),O=Object(a.a)(h,2),g=O[0],w=O[1],j=gr(""),E=Object(a.a)(j,2),_=E[0],k=E[1],P=function(){var e=Object(n.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/fluentcrm/lists"});case 4:t=e.sent,r=v,(t||[]).forEach((function(e){r=[].concat(Object(R.a)(r),[{value:e.id,label:e.title||e.slug}])})),f(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&k(e.t0.message);case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(n.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/fluentcrm/tags"});case 4:t=e.sent,r=g,(t||[]).forEach((function(e){r=[].concat(Object(R.a)(r),[{value:e.id,label:e.title||e.slug}])})),w(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&k(e.t0.message);case 13:return e.prev=13,b(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return Or((function(){P(),x()}),[]),_?React.createElement(fr,{className:"presto-notice",status:"error",isDismissible:!1},_):React.createElement("div",null,i?React.createElement(zt,null):v.length>1&&React.createElement(vr,{label:mr("Choose a list","presto-player"),value:null==t?void 0:t.provider_list,options:v,onChange:function(e){return r({provider_list:e})}}),d?React.createElement(zt,null):g.length>1&&React.createElement(vr,{label:mr("Choose a tag","presto-player"),value:null==t?void 0:t.provider_tag,options:g,onChange:function(e){return r({provider_tag:e})}}))},jr=wp.i18n.__,Er=wp.components,_r=Er.SelectControl,Rr=Er.Button,kr=Er.Flex,Pr=Er.Icon,xr=wp.element,Cr=xr.useEffect,Sr=xr.useState,Nr=function(e){var t=e.options,r=e.updateEmailState,o=Sr(!1),c=Object(a.a)(o,2),i=c[0],s=c[1],p=Sr([{value:"none",label:jr("None","presto-player")}]),u=Object(a.a)(p,2),d=u[0],b=u[1],m=Sr(""),y=Object(a.a)(m,2),v=y[0],f=y[1],h={presto_player_activecampaign:{label:"ActiveCampaign",value:"activecampaign"},presto_player_mailchimp:{label:"MailChimp",value:"mailchimp"},presto_player_mailerlite:{label:"MailerLite",value:"mailerlite"},presto_player_fluentcrm:{label:"FluentCRM",value:"fluentcrm"}},O=function(){var e=Object(n.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),f(""),e.prev=2,e.next=5,wp.apiFetch({path:"wp/v2/settings"});case 5:t=e.sent,r=d,Object.keys(t).forEach((function(e){var n;null!=h&&h[e]&&null!==(n=t[e])&&void 0!==n&&n.connected&&(r=[].concat(Object(R.a)(r),[h[e]]))})),b(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),null!==e.t0&&void 0!==e.t0&&e.t0.message&&f(e.t0.message);case 14:return e.prev=14,s(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(){return e.apply(this,arguments)}}();Cr((function(){O()}),[]);return i?React.createElement(zt,null):React.createElement("div",null,v,d.length>1?React.createElement("div",null,React.createElement(_r,{label:jr("Choose an email provider","presto-player"),value:null==t?void 0:t.provider,options:d,onChange:function(e){return r({provider:e})}}),function(){var e=d.find((function(e){return e.value===(null==t?void 0:t.provider)}));if(Object.keys(e||{}).length)switch(null==t?void 0:t.provider){case"mailchimp":return React.createElement(Xt,{options:t,updateEmailState:r});case"mailerlite":return React.createElement(or,{options:t,updateEmailState:r});case"activecampaign":return React.createElement(br,{options:t,updateEmailState:r});case"fluentcrm":return React.createElement(wr,{options:t,updateEmailState:r})}}()):React.createElement(kr,null,React.createElement(Rr,{target:"_blank",href:"/wp-admin/edit.php?post_type=pp_video_block&page=presto-player-settings#/integrations",isSecondary:!0,isSmall:!0},jr("Connect a provider","presto-player")),React.createElement(Rr,{isSmall:!0,onClick:function(e){e.preventDefault(),O()}},React.createElement(Pr,{icon:"update"}))))};function Tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(r),!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Br,Lr,Ar=wp.i18n.__,Ir=wp.components,Vr=Ir.ToggleControl,Fr=Ir.BaseControl,Mr=Ir.RangeControl,Ur=Ir.TextControl,zr=Ir.Button,Hr=Ir.TextareaControl,Wr=Ir.Notice,Yr=function(e){var t=e.state,r=e.updateState,n=e.className,a=t.email_collection,o=t.cta,l=function(e){r(Dr(Dr({},t),{},{email_collection:Dr(Dr({},a),e)}))};return Object(Z.b)("div",{className:n},Object(Z.b)(Fr,null,Object(Z.b)("h3",null,Ar("Email Capture","presto-player"))),Object(Z.b)(Fr,{className:"presto-player__control--large-play"},Object(Z.b)(Vr,{label:Ar("Enable","presto-player"),help:Ar("Show an email collection form and message over your video.","presto-player"),onChange:function(e){l({enabled:e})},checked:null==a?void 0:a.enabled})),!(null==a||!a.enabled)&&Object(Z.b)(React.Fragment,null,Object(Z.b)(Fr,{className:"presto-player__control--percentage-watched"},Object(Z.b)(Mr,{label:Ar("Display At (Percentage)","presto-player"),labelPosition:"top",onChange:function(e){l({percentage:e})},marks:[{value:0,label:Ar("Start","presto-player")},{value:50,label:Ar("50% Watched","presto-player")},{value:100,label:Ar("End","presto-player")}],shiftStep:5,value:(null==a?void 0:a.percentage)||0})),(null==o?void 0:o.enabled)&&(null==a?void 0:a.percentage)===(null==o?void 0:o.percentage)&&Object(Z.b)(Wr,{css:Object(Z.a)(Ft||(Ft=Object(G.a)(["\n                margin: 0 0 30px 0 !important;\n              "]))),status:"warning",isDismissible:!1},Ar("You already have a Call To Action set display at the same time.","presto-player"),Object(Z.b)(zr,{onClick:function(){r(Dr(Dr({},t),{},{cta:Dr(Dr({},o),{enabled:!1})}))},isLink:!0,css:Object(Z.a)(Mt||(Mt=Object(G.a)(["\n                  margin-top: 10px !important;\n                "])))},Ar("Disable Call To Action","presto-player"))),Object(Z.b)(Fr,{className:"presto-player__control--large-play"},Object(Z.b)(Vr,{label:Ar("Allow Skipping","presto-player"),help:Ar("Let the viewer skip","presto-player"),onChange:function(e){l({allow_skip:e})},checked:null==a?void 0:a.allow_skip})),Object(Z.b)(Fr,{className:"presto-player__control--large-play"},Object(Z.b)(Hr,{label:Ar("Headline","presto-player"),help:Ar("The headline for your form.","presto-player"),value:null==a?void 0:a.headline,onChange:function(e){l({headline:e})}})),Object(Z.b)(Fr,{className:"presto-player__control--large-play"},Object(Z.b)(Hr,{label:Ar("Bottom Text","presto-player"),help:Ar("Text displayed below the form. HTML allowed.","presto-player"),value:null==a?void 0:a.bottom_text,onChange:function(e){l({bottom_text:e})}})),Object(Z.b)(Fr,{className:"presto-player__control--large-play"},Object(Z.b)(Ur,{label:Ar("Play Button Text","presto-player"),help:Object(Z.b)("p",null,Ar("Submit button text","presto-player")),value:null==a?void 0:a.button_text,onChange:function(e){return l({button_text:e})}})),Object(Z.b)("h3",null,Ar("Integrate","presto-player")),Object(Z.b)(Fr,null,Object(Z.b)(Nr,{updateEmailState:l,options:a})),Object(Z.b)("h3",null,Ar("Style","presto-player")),Object(Z.b)(Fr,null,Object(Z.b)(Mr,{label:Ar("Round Corners","presto-player"),help:Ar("Border radius of form elements.","presto-player"),value:(null==a?void 0:a.border_radius)||0,onChange:function(e){return l({border_radius:e})},min:0,max:25}))))},Gr=wp.i18n.__,qr=wp.components,Zr=qr.ToggleControl,Kr=qr.BaseControl,Qr=qr.RangeControl,Xr=qr.SelectControl,$r=qr.ColorPicker,Jr=function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(Kr,null,React.createElement("h3",null,Gr("Style","presto-player"))),React.createElement(Kr,null,React.createElement(Zr,{label:Gr("Hide Logo","presto-player"),help:Gr("Hides the logo on this video.","presto-player"),onChange:function(e){r({hide_logo:e})},checked:t.hide_logo})),React.createElement(Kr,null,React.createElement(Qr,{label:Gr("Round Corners","presto-player"),help:Gr("Player border radius size.","presto-player"),value:(null==t?void 0:t.border_radius)||0,onChange:function(e){return r({border_radius:e})},min:0,max:25})),React.createElement(Kr,null,React.createElement(Xr,{label:Gr("Caption Style","presto-player"),labelPosition:"top",value:null==t?void 0:t.caption_style,options:[{label:Gr("Default","presto-player"),value:"default"},{label:Gr("Full","presto-player"),value:"full"}],onChange:function(e){r({caption_style:e})}})),React.createElement(Kr,null,React.createElement(Kr.VisualLabel,null,React.createElement("p",null,Gr("Caption Background","presto-player"))),React.createElement($r,{color:(null==t?void 0:t.caption_background)||"#000000",onChangeComplete:function(e){r({caption_background:e.hex})},disableAlpha:!0})))};function en(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?en(Object(r),!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):en(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rn=wp.i18n.__,nn=wp.components,an=nn.TextControl,on=nn.BaseControl,ln=nn.Icon,cn=nn.Notice,sn=nn.Button,pn=nn.Flex,un=nn.FlexItem,dn=nn.SelectControl,bn=nn.FlexBlock,mn=nn.Modal,yn=wp.element.useState,vn=wp.data.useSelect;var fn=function(e){var t=e.type,r=void 0===t?"new":t,o=e.closeModal,c=e.addPreset,i=e.onSave,s=e.updatePreset,p=e.name,u=void 0===p?"":p,d=e.preset,b=void 0===d?{"play-large":!0,rewind:!0,play:!0,"fast-forward":!0,progress:!0,"current-time":!0,mute:!0,volume:!0,speed:!1,pip:!1,fullscreen:!0,captions:!1,save_player_position:!1,reset_on_end:!1,auto_hide:!0,sticky_scroll:!1,hide_logo:!1,border_radius:0,skin:"default",caption_style:"default",caption_background:"#000000",hide_youtube:!1,lazy_load_youtube:!1,cta:{},email_collection:{},action_bar:{}}:d,m=yn(!1),y=Object(a.a)(m,2),v=y[0],f=y[1],h=yn(""),O=Object(a.a)(h,2),g=O[0],w=O[1],j=yn(""),E=Object(a.a)(j,2),_=E[0],R=E[1],k=yn(u),x=Object(a.a)(k,2),C=x[0],S=x[1],N=yn(b),T=Object(a.a)(N,2),D=T[0],B=T[1],L=vn((function(e){return e("presto-player/player").branding()})),A={message:rn("The preset could not be saved. Please reload the page and try again.","presto-player")},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B(tn(tn({},D),e))},V=function(){var e=Object(n.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,t=tn(tn({},D),{name:C}),e.next=5,wp.apiFetch({method:"POST",url:wp.url.addQueryArgs("".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"preset/").concat(b.id),{_method:"PUT"}),data:t});case 5:if(r=e.sent){e.next=8;break}throw A;case 8:s(r),o(),i&&i(r),Object(P.d)({message:rn("Preset updated!","presto-player")}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),w(null!==e.t0&&void 0!==e.t0&&e.t0.message?e.t0.message:A);case 17:return e.prev=17,f(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(n.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,wp.apiFetch({method:"POST",url:prestoPlayer.root+prestoPlayer.prestoVersionString+"preset",data:tn(tn({},{name:C}),D)});case 4:if(t=e.sent){e.next=7;break}throw A;case 7:c(t),o(),i&&i(t),Object(P.d)({message:rn("Preset created!","presto-player")}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),w(null!==e.t0&&void 0!==e.t0&&e.t0.message?e.t0.message:A);case 16:return e.prev=16,f(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),M=[{name:"controls",title:rn("Controls","presto-player"),icon:Object(Z.b)(ln,{icon:"admin-settings"}),component:Object(Z.b)(st,{updateState:I,state:D})},{name:"behavior",title:rn("Behavior","presto-player"),icon:Object(Z.b)(ln,{icon:"admin-generic"}),component:Object(Z.b)(at,{updateState:I,state:D})},{name:"style",title:rn("Style","presto-player"),icon:Object(Z.b)(ln,{icon:"admin-customizer"}),component:Object(Z.b)(Jr,{updateState:I,state:D})},{name:"email",title:rn("Email Capture","presto-player"),icon:Object(Z.b)(ln,{icon:"email"}),component:Object(Z.b)(Yr,{updateState:I,state:D})},{name:"cta",title:rn("Call To Action","presto-player"),icon:Object(Z.b)(ln,{icon:"megaphone"}),component:Object(Z.b)(Ut,{updateState:I,state:D})},{name:"action_bar",title:rn("Action Bar","presto-player"),icon:Object(Z.b)(ln,{icon:"cover-image"}),component:Object(Z.b)(Qe,{updateState:I,state:D})},{name:"watermark",title:rn("Dynamic Watermark","presto-player"),icon:Object(Z.b)(ln,{icon:"lock"}),component:Object(Z.b)(Et,{updateState:I,state:D})}];return Object(Z.b)(mn,{title:rn("edit"==r?"Edit A Video Preset":"Create A New Video Preset","presto-player"),onRequestClose:o,className:"presto-player__modal-presets",overlayClassName:"presto-player__modal-presets-overlay"},Object(Z.b)("div",{className:"presto-player__preset-options","data-cy":"preset-modal"},Object(Z.b)(an,{value:C,hideLabelFromVision:!0,label:rn("Preset Name","presto-player"),onChange:function(e){return S(e)},placeholder:rn("Enter a preset name...","presto-player"),className:"presto-player__modal--style-name",autoFocus:!0}),Object(Z.b)(pn,{align:"stretch",className:"presto-player__style-preview-area"},Object(Z.b)(un,{className:"presto-player__style-sidebar"},Object(Z.b)("div",null,Object(Z.b)(ve,{items:M,title:rn("Customize","presto-player"),onSelect:R},(function(e){return e.component})))),Object(Z.b)(bn,{className:"presto-player__style-preview-panel"},Object(Z.b)("div",{style:{position:"absolute",top:0,left:0,padding:"20px"}},Object(Z.b)(dn,{label:rn("Skin","presto-player"),labelPosition:"side",value:null==D?void 0:D.skin,hideLabelFromVision:!0,options:[{label:rn("Basic","presto-player"),value:"default"},{label:rn("Stacked","presto-player"),value:"stacked"}],onChange:function(e){I({skin:e})}})),Object(Z.b)(fe.a,{poster:"https://source.unsplash.com/daily",state:D,branding:L,menu:_}))),Object(Z.b)("br",null),g&&Object(Z.b)(on,null,Object(Z.b)(cn,{className:"presto-player__modal--error-notice",status:"error",isDismissible:!1,style:{margin:0}},g.replace(/(<([^>]+)>)/gi,""))),Object(Z.b)("div",{css:Object(Z.a)(Br||(Br=Object(G.a)(["\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n          "])))},Object(Z.b)("div",{css:Object(Z.a)(Lr||(Lr=Object(G.a)(["\n              opacity: 0.5;\n              font-size: 12px;\n            "])))},"Preset ID: ",b.id),Object(Z.b)("div",null,Object(Z.b)(sn,{isTertiary:!0,onClick:o,style:{margin:"0 6px"}},rn("Cancel","presto-player")),Object(Z.b)(sn,{isPrimary:!0,isBusy:v,disabled:v,onClick:function(){if(C)return"edit"===r?V():F();w(rn("You must enter a name for the preset.","presto-player"))},"data-cy":"submit-preset"},rn("edit"==r?"Update Preset":"Create Preset","presto-player"))))))},hn=wp.i18n.__,On=wp.components,gn=On.Icon,wn=On.Spinner,jn=On.Modal,En=On.Button,_n=On.ButtonGroup,Rn=wp.element.useState,kn=function(e){var t,r,o=e.preset,c=e.index,i=e.isActive,s=e.remove,p=e.setPreset,u=e.onEdit,d=Rn(!1),b=Object(a.a)(d,2),m=b[0],y=b[1],v=Rn(!1),f=Object(a.a)(v,2),h=f[0],O=f[1],g=function(){return O(!1)},w=function(){var e=Object(n.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.id){e.next=3;break}return s(o),e.abrupt("return");case 3:return e.prev=3,y(!0),e.next=7,wp.apiFetch({method:"POST",url:wp.url.addQueryArgs("".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"preset/").concat(o.id),{_method:"DELETE"})});case 7:e.sent&&(s(o),wp.data.dispatch("core/notices").createNotice("success",hn("Preset trashed.","presto-player"),{type:"snackbar",isDismissible:!0})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),null!==e.t0&&void 0!==e.t0&&e.t0.message&&wp.data.dispatch("core/notices").createNotice("error",e.t0.message,{type:"snackbar",isDismissible:!0});case 15:return e.prev=15,O(!1),y(!1),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[3,11,15,19]])})));return function(){return e.apply(this,arguments)}}();return m?React.createElement("div",{className:"block-editor-block-styles__item",role:"button",tabIndex:c,"aria-label":"Fill",style:{color:i?"var(--wp-admin-theme-color)":"inherit"}},React.createElement("div",{className:"block-editor-block-styles__item-preview",style:{border:i?"2px solid var(--wp-admin-theme-color)":"2px solid #e3e3e3",margin:0,display:"flex","align-items":"center","justify-content":"center"}},React.createElement(wn,null))):React.createElement("div",{className:"block-editor-block-styles__item presto-preset-".concat(o.slug),onClick:function(){p(o)},role:"button",tabIndex:c,"aria-label":"Fill",style:{color:i?"var(--wp-admin-theme-color)":"inherit"}},React.createElement("div",{className:"block-editor-block-styles__item-preview",style:{border:i?"2px solid var(--wp-admin-theme-color)":"2px solid #e3e3e3",margin:0}},React.createElement("div",{style:{textAlign:"center",width:"100%",color:i?"var(--wp-admin-theme-color)":"inherit",opacity:i?1:.75}},null!=o&&o.icon?React.createElement(gn,{icon:null==o?void 0:o.icon,style:{fontSize:"30px",width:"30px",height:"30px"}}):React.createElement("h1",{style:{opacity:.75}},(null==o||null===(t=o.name)||void 0===t||null===(r=t.charAt(0))||void 0===r?void 0:r.toUpperCase())||"Untitled"))),React.createElement("div",{className:"block-editor-block-styles__item-label",style:{fontWeight:"bold",textTransform:"capitalize"}},(null==o?void 0:o.name)||"Untitled"),!(null!=o&&o.is_locked)&&React.createElement("div",{className:"block-editor-block-styles__item-edit"},React.createElement("div",{className:"block-editor-block-styles__item-edit-icon",onClick:u},React.createElement(gn,{icon:"edit"})),React.createElement("div",{className:"block-editor-block-styles__item-edit-icon",onClick:function(){return O(!0)}},React.createElement(gn,{icon:"trash"}))),h&&React.createElement(jn,{title:hn("Trash Preset?","presto-player"),onRequestClose:g,style:{maxWidth:"250px"}},React.createElement("p",null,React.createElement("strong",null,hn("Warning!","presto-player")," "),hn("Any videos assigned to this preset will automatically use the default preset.","presto-player")),React.createElement(_n,null,React.createElement(En,{isDestructive:!0,onClick:w,style:{margin:"0 4px"}},hn("Trash","presto-player")),React.createElement(En,{isTertiary:!0,onClick:g,style:{margin:"0 4px",boxShadow:"none"}},hn("Cancel","presto-player")))))},Pn=wp.i18n.__,xn=wp.components,Cn=xn.withNotices,Sn=xn.BaseControl,Nn=xn.Spinner,Tn=xn.Button,Dn=wp.element,Bn=Dn.useState,Ln=Dn.useEffect,An=wp.data,In=An.useSelect,Vn=An.dispatch;var Fn=Cn((function(e){var t,r=e.attributes,n=e.setAttributes,o=Bn(!1),l=Object(a.a)(o,2),i=l[0],s=l[1],p=function(){return s(!1)},u=Bn(null),d=Object(a.a)(u,2),b=d[0],m=d[1],y=Bn(null),v=Object(a.a)(y,2),f=v[0],h=v[1],O=Bn(!0),g=Object(a.a)(O,2),w=g[0],j=g[1],E=In((function(e){return e("presto-player/player").getPresets()})),_=function(e){Vn("presto-player/player").addPreset(e)},R=function(e){Vn("presto-player/player").removePreset(e)};Ln((function(){j(!E.length)}),[E]);var k=function(e){n({preset:e.id})};return w?React.createElement("div",{className:"presto-settings__loading"},React.createElement(Nn,null)):React.createElement(React.Fragment,null,E.length?React.createElement("p",null,Pn("Select a video configuration preset, or add your own.","presto-player")):"",React.createElement(Sn,null,React.createElement("div",{className:"block-editor-block-styles"},(E||[]).length?E.map((function(e,t){return React.createElement(kn,{setPreset:k,index:t,isActive:(null==r?void 0:r.preset)===e.id,preset:e,key:e.id,onEdit:function(){h(e.name),m(e),s("edit")},remove:R})})):Pn("No style presets. You can create a new style by clicking 'Add New Style'.","presto-plugin"))),React.createElement(Sn,null,React.createElement(Tn,{isPrimary:!0,"data-cy":"add-new-preset",onClick:function(){var e;null!==(e=prestoPlayer)&&void 0!==e&&e.isPremium?s("new"):Vn("presto-player/player").setProModal(!0)}},Pn("Add New Preset","presto-player")),!(null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium)&&React.createElement(c.a,null)),"new"==i&&React.createElement(fn,{closeModal:p,addPreset:_,type:"new",onSave:k}),"edit"==i&&React.createElement(fn,{closeModal:p,addPreset:_,updatePreset:function(e){Vn("presto-player/player").updatePreset(e)},type:"edit",preset:b,name:f}))})),Mn=r(13);function Un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(r),!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Un(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Hn=wp.i18n.__,Wn=wp.components,Yn=(Wn.PanelRow,Wn.TextControl,Wn.SelectControl,Wn.BaseControl),Gn=Wn.Button,qn=Wn.FocalPointPicker,Zn=Wn.RangeControl,Kn=wp.blockEditor,Qn=Kn.MediaUpload,Xn=Kn.MediaUploadCheck,$n=(wp.element.useState,["image"]),Jn=function(e){var t=e.attributes,r=e.setAttributes,n=e.instanceId,a=t.mutedOverlay,o="video-block__overlay-image-description-".concat(n);return React.createElement(React.Fragment,null,React.createElement(Xn,null,React.createElement(Yn,{className:"editor-video-overlay-control"},React.createElement(Yn.VisualLabel,null,React.createElement("p",null,Hn("Overlay Image","presto-player"))),React.createElement(Qn,{title:Hn("Select overlay image","presto-player"),onSelect:function(e){r({mutedOverlay:zn(zn({},a),{src:e.url})})},allowedTypes:$n,render:function(e){var t=e.open;return React.createElement(Gn,{className:"presto-setting__poster",isPrimary:!0,onClick:t},null!=a&&a.src?Hn("Replace","presto-player"):Hn("Select","presto-player"))}}),React.createElement("p",{id:o,hidden:!0},null!=a&&a.src?sprintf(Hn("The current overlay image url is %s","presto-player"),null==a?void 0:a.src):Hn("There is no overlay image currently selected","presto-player")),!(null==a||!a.src)&&React.createElement(Gn,{onClick:function(){r({mutedOverlay:zn(zn({},a),{src:""})})},className:"presto-setting__remove-poster",isTertiary:!0},Hn("Remove","presto-player")))),!(null==a||!a.src)&&React.createElement(qn,{url:"",dimensions:{width:160,height:90},value:null==a?void 0:a.focalPoint,onChange:function(e){return r({mutedOverlay:zn(zn({},a),{focalPoint:e})})}}),!(null==a||!a.src)&&React.createElement(Zn,{label:Hn("Max Width (%)","presto-player"),value:null==a?void 0:a.width,onChange:function(e){return r({mutedOverlay:zn(zn({},a),{width:e})})},min:1,max:100}))};function ea(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ta(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(r),!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ea(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ra=wp.i18n.__,na=wp.components,aa=na.ToggleControl,oa=na.SelectControl,la=na.BaseControl,ca=na.Button,ia=na.PanelRow,sa=na.Icon,pa=na.Flex,ua=wp.data.dispatch,da=wp.blockEditor,ba=da.MediaUpload,ma=da.MediaUploadCheck,ya=["image"],va=function(e){var t=e.setAttributes,r=e.attributes,n=e.instanceId,a=r.mutedPreview,o=r.autoplay,l=r.playsInline,i=r.preload,s=r.poster,p=r.mutedOverlay,u="video-block__poster-image-description-".concat(n),d=function(e){return function(r){t(Object(k.a)({},e,r))}};var b,m;return React.createElement(React.Fragment,null,!o&&React.createElement(React.Fragment,null,React.createElement(aa,{label:React.createElement(React.Fragment,null,ra("Muted Autoplay Preview","presto-player")," ",!(null!==(b=prestoPlayer)&&void 0!==b&&b.isPremium)&&React.createElement(c.a,null)),onChange:function(e){var r;null!==(r=prestoPlayer)&&void 0!==r&&r.isPremium?t({mutedPreview:ta(ta({},a),{enabled:e})}):ua("presto-player/player").setProModal(!0)},checked:null==a?void 0:a.enabled,className:"presto-setting__mutedPreview",help:ra("Shows a muted preview of the video.","presto-player")}),!(null==a||!a.enabled)&&!(null!=r&&r.video_id)&&React.createElement(ia,null,React.createElement(aa,{label:ra("Muted Preview Captions","presto-player"),onChange:function(e){t({mutedPreview:ta(ta({},a),{captions:e})})},checked:null==a?void 0:a.captions,className:"presto-setting__mutedPreviewCaptions",help:ra("Play captions during muted autoplay","presto-player")})),!!a.enabled&&React.createElement(ia,null,React.createElement(aa,{label:React.createElement(React.Fragment,null,ra("Muted Preview Overlay","presto-player")," ",!(null!==(m=prestoPlayer)&&void 0!==m&&m.isPremium)&&React.createElement(c.a,null)),onChange:function(e){var r;null!==(r=prestoPlayer)&&void 0!==r&&r.isPremium?t({mutedOverlay:ta(ta({},p),{enabled:e})}):ua("presto-player/player").setProModal(!0)},checked:null==p?void 0:p.enabled,className:"presto-setting__mutedOverlay",help:ra("Show an image over the top of the video either before or after the video.","presto-player")})),(null==p?void 0:p.enabled)&&(null==a?void 0:a.enabled)&&React.createElement(Jn,{attributes:r,setAttributes:t})),!(null!=a&&a.enabled)&&React.createElement(aa,{label:ra("Autoplay","presto-player"),className:"presto-setting__autoplay",onChange:d("autoplay"),checked:o,help:function(e){return e?ra("Note: Autoplaying videos may cause usability issues for some visitors.","presto-player"):null}}),React.createElement(ia,null,React.createElement(aa,{label:ra("Play inline","presto-player"),className:"presto-setting__playsInline","data-cy":"playsInline",onChange:d("playsInline"),checked:l,help:ra("On mobile browsers, play the video on the page instead of opening it up fullscreen.","presto-player")})),!(null!=r&&r.video_id)&&React.createElement(ia,null,React.createElement(oa,{label:React.createElement(pa,null,React.createElement("div",null,ra("Performance Preference","presto-player")),React.createElement("a",{href:"https://prestoplayer.com/docs/performance-preferences-explained",target:"_blank",style:{textDecoration:"none"}},React.createElement(sa,{icon:"editor-help"}))),className:"presto-setting__preload",value:i,onChange:function(e){return t({preload:e})},help:(!!(null!=r&&r.src&&Object(Mn.d)(null==r?void 0:r.src)&&["metadata","none"].includes(i))||"none"===i&&!s)&&ra("A poster image is recommended for this setting.","presto-player"),options:[{value:"auto",label:ra("Video Playback Speed","presto-player")},{value:"metadata",label:ra("Page Load Speed","presto-player")},{value:"none",label:ra("Page Load Speed (Extreme)","presto-player")}]})),React.createElement(ma,null,React.createElement(la,{className:"editor-video-poster-control"},React.createElement(la.VisualLabel,null,React.createElement("p",null,ra("Poster image","presto-player"))),React.createElement(ba,{title:ra("Select poster image","presto-player"),onSelect:function(e){t({poster:e.url})},allowedTypes:ya,render:function(e){var t=e.open;return React.createElement(ca,{className:"presto-setting__poster",isPrimary:!0,onClick:t,"aria-describedby":u},ra(s?"Replace":"Select","presto-player"))}}),React.createElement("p",{id:u,hidden:!0},s?sprintf(ra("The current poster image url is %s","presto-player"),s):ra("There is no poster image currently selected","presto-player")),!!s&&React.createElement(ca,{onClick:function(){t({poster:""})},className:"presto-setting__remove-poster",isTertiary:!0},ra("Remove","presto-player")))))},fa=wp.components.PanelBody,ha=wp.i18n.__;t.a=function(e){var t,r,n,a,o=e.attributes,l=e.setAttributes;return React.createElement(React.Fragment,null,React.createElement(fa,{title:React.createElement(React.Fragment,null,ha("Chapters","presto-player")," ",!(null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium)&&React.createElement(c.a,null)),initialOpen:null===(r=prestoPlayer)||void 0===r?void 0:r.isPremium},React.createElement(Y,{setAttributes:l,attributes:o})),React.createElement(fa,{title:React.createElement(React.Fragment,null,ha("Overlays","presto-player")," ",!(null!==(n=prestoPlayer)&&void 0!==n&&n.isPremium)&&React.createElement(c.a,null)),initialOpen:null===(a=prestoPlayer)||void 0===a?void 0:a.isPremium},React.createElement(re,{setAttributes:l,attributes:o})),React.createElement(fa,{title:ha("Video settings","presto-player")},React.createElement(va,{setAttributes:l,attributes:o})),React.createElement(fa,{title:ha("Video Preset","presto-player")},React.createElement(Fn,{setAttributes:l,attributes:o})),React.createElement(fa,{title:ha("Global Player Branding","presto-player"),initialOpen:!1},React.createElement(_,{setAttributes:l,attributes:o})))}},function(e,t,r){"use strict";var n=r(4),a=r(5),o=r(1),l=r(2),c=r.n(l),i=r(7),s=wp.apiFetch;s.use(s.createNonceMiddleware(prestoPlayer.nonce)),s.use(s.createRootURLMiddleware(prestoPlayer.root+prestoPlayer.prestoVersionString));var p=s;function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=wp.compose.createHigherOrderComponent,m=wp.element,y=m.useEffect,v=m.useState;t.a=function(){return b((function(e){return function(t){var r=t.presets,n=t.attributes,l=t.setAttributes,s=t.defaultPreset,u=t.isSelected,b=t.branding,m=v({}),f=Object(o.a)(m,2),h=f[0],O=f[1],g=v(1),w=Object(o.a)(g,2),j=w[0],E=w[1],R=n.poster,k=n.chapters;y((function(){u&&null!=n&&n.id&&wp.data.dispatch("core/edit-post").openGeneralSidebar("edit-post/block")}),[u]),y((function(){u&&null!=n&&n.selectionOverrideClientId&&wp.data.dispatch("core/block-editor").selectBlock(null==n?void 0:n.selectionOverrideClientId)}),[u]),y((function(){if(r&&r.length){var e=r.find((function(e){return e.id===(null==n?void 0:n.preset)}));e?O(e):(O(s),l({preset:null==s?void 0:s.id}))}}),[r,null==n?void 0:n.preset]),y((function(){P()}),[R,h,k,b.logo]);var P=function(){E(j+1)},x=Object(i.f)(k);y((function(){var e=null==k?void 0:k.map((function(e){return e.time})),t=null==x?void 0:x.map((function(e){return e.time}));_.difference(e,t).length&&P()}),[k]);var C=function(){var e=Object(a.a)(c.a.mark((function e(t){var r,n,a,o,i,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.src,n=t.external_id,a=t.attachment_id,o=t.type,i=t.title,r||n||a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,p({method:"POST",path:"/presto-player/v1/videos",data:d(d({attachment_id:a,post_id:wp.data.select("core/editor").getCurrentPostId(),external_id:n},i?{title:i}:{}),{},{src:r,type:o})});case 5:s=e.sent,u=s.id,l({id:u});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null!=n&&n.preset||l({preset:null==s?void 0:s.id}),React.createElement(e,Object.assign({},t,{lockSave:function(){return wp.data.dispatch("core/editor").lockPostSaving("presto-player")},unlockSave:function(){return wp.data.dispatch("core/editor").unlockPostSaving("presto-player")},createVideo:C,onUpdate:P,onRemoveSrc:function(){confirm("Remove this video?")&&l(d(d(d(d({src:"",id:void 0},null!=n&&n.thumbnail?{thumbnail:null}:{}),null!=n&&n.preview?{preview:null}:{}),null!=n&&n.previewSrc?{previewSrc:null}:{}),null!=n&&n.previewThumbnail?{previewThumbnail:null}:{}))},presetData:h,setPresetData:O,renderKey:j}))}}),"withPlayerEdit")}},,,function(e,t,r){"use strict";var n,a,o,l,c,i,s=r(3),p=r(4),u=r(1),d=r(0);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=wp.i18n.__,v=wp.components,f=v.Button,h=v.Popover,O=v.Icon,g=wp.blockEditor.__experimentalLinkControl,w=wp.element.useState,j=wp.url.prependHTTP;t.a=function(e){var t=e.setSettings,r=e.settings,p=w(!1),b=Object(u.a)(p,2),v=b[0],E=b[1],_=r.url,R=w(),k=Object(u.a)(R,2),P=k[0],x=k[1],C=m({url:null==r?void 0:r.url,type:null==r?void 0:r.type,id:null==r?void 0:r.id,opensInNewTab:null==r?void 0:r.opensInNewTab},P),S=function(e){e=m(m({},P),e);var r=C.opensInNewTab!==e.opensInNewTab&&C.url===e.url&&void 0===e.url;if(x(r?e:void 0),!r){var n=j(e.url);t({url:n,type:e.type,id:void 0!==e.id&&null!==e.id?String(e.id):void 0,opensInNewTab:e.opensInNewTab})}};return Object(d.b)("span",null,_?Object(d.b)("div",{css:Object(d.a)(n||(n=Object(s.a)(["\n            display: flex;\n            justify-content: space-between;\n          "])))},Object(d.b)("div",{css:Object(d.a)(a||(a=Object(s.a)(["\n              max-width: 85%;\n              overflow: hidden;\n              display: flex;\n              align-items: center;\n            "])))},Object(d.b)("a",{href:"#",css:Object(d.a)(o||(o=Object(s.a)(["\n                padding: 10px;\n                background: #f3f3f3;\n                border-radius: 4px;\n                width: 100%;\n                display: inline-flex;\n                align-items: center;\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                text-decoration: none;\n              "]))),onClick:function(){return E(!v)}},Object(d.b)(O,{icon:"edit",css:Object(d.a)(l||(l=Object(s.a)(["\n                  cursor: pointer;\n                  opacity: 0.75;\n                  margin: 0 2px;\n                  font-size: 16px;\n                  width: 16px;\n                  height: 16px;\n                  text-decoration: none;\n                "])))}),_),v&&Object(d.b)(h,{position:"bottom center",onClose:function(){return E(!1)}},Object(d.b)(g,{value:r,onChange:S}))),Object(d.b)("div",{css:Object(d.a)(c||(c=Object(s.a)(["\n              display: flex;\n              align-items: center;\n            "])))},Object(d.b)(O,{onClick:function(){confirm(y("Are you sure you wish to remove this link?","presto-player"))&&t({})},icon:"trash",className:"presto-icon",css:Object(d.a)(i||(i=Object(s.a)(["\n                cursor: pointer;\n                opacity: 0.75;\n                margin: 0 2px;\n                fontsize: 18px;\n                width: 18px;\n                height: 18px;\n\n                &:hover {\n                  color: #cc1818;\n                }\n              "])))}))):Object(d.b)("span",null,Object(d.b)(f,{isPrimary:!0,isSmall:!0,onClick:function(){return E(!v)}},y("Add Link","presto-player")),v&&Object(d.b)(h,{position:"bottom center",onClose:function(){return E(!1)}},Object(d.b)(g,{value:r,onChange:S}))))}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return w})),r.d(t,"c",(function(){return j}));var n=r(35),a=r(36),o=r(37),l=r(40),c=r(30),i=r(21),s=r.n(i),p=function(e){return e.replace(/([A-Z])/g,(function(e){return"-".concat(e[0].toLowerCase())}))},u=r(14),d=function(e,t,r){var n=t.className||t.class,a=r.className||r.class,o=y(e),l=y(n?n.split(" "):[]),c=y(a?a.split(" "):[]),i=[];return o.forEach((function(e){l.has(e)?(i.push(e),l.delete(e)):c.has(e)||i.push(e)})),l.forEach((function(e){return i.push(e)})),i.join(" ")},b=function(e,t){var r="on"+e,n=r in t;if(!n){var a=t.createElement("div");a.setAttribute(r,"return;"),n="function"==typeof a[r]}return n},m=function(e,t,r){var n=e.__events||(e.__events={}),a=n[t];a&&e.removeEventListener(t,a),e.addEventListener(t,n[t]=function(e){r&&r.call(this,e)})},y=function(e){var t=new Map;return e.forEach((function(e){return t.set(e,e)})),t},v=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.forEach((function(t){"function"==typeof t?t(e):null!=t&&(t.current=e)}))}};function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var h=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},O=function(e,t,r){var l=e.toLowerCase().split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(""),c=function(t){Object(o.a)(i,t);var c=f(i);function i(e){var t;return Object(n.a)(this,i),(t=c.call(this,e)).setComponentElRef=function(e){t.componentEl=e},t}return Object(a.a)(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate(this.props)}},{key:"componentDidUpdate",value:function(e){!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof Element){var n=d(e.classList,t,r);""!==n&&(e.className=n),Object.keys(t).forEach((function(r){if("children"!==r&&"style"!==r&&"ref"!==r&&"class"!==r&&"className"!==r&&"forwardedRef"!==r)if(0===r.indexOf("on")&&r[2]===r[2].toUpperCase()){var n=r.substring(2),a=n[0].toLowerCase()+n.substring(1);"undefined"==typeof document||b(a,document)||m(e,a,t[r])}else{e[r]=t[r],"string"===Object(u.a)(t[r])?e.setAttribute(p(r),t[r]):e[r]=t[r]}}))}}(this.componentEl,this.props,e)}},{key:"render",value:function(){var t=this.props,n=t.children,a=t.forwardedRef,o=t.style,l=(t.className,t.ref,h(t,["children","forwardedRef","style","className","ref"])),c=Object.keys(l).reduce((function(e,t){if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){var r=t.substring(2).toLowerCase();"undefined"!=typeof document&&b(r,document)&&(e[t]=l[t])}else e[t]=l[t];return e}),{});r&&(c=r(this.props,c));var i=Object.assign(Object.assign({},c),{ref:v(a,this.setComponentElRef),style:o});return s.a.createElement(e,i,n)}}],[{key:"displayName",get:function(){return l}}]),i}(s.a.Component);return t&&(c.contextType=t),function(e,t){var r=function(t,r){return s.a.createElement(e,Object.assign({},t,{forwardedRef:r}))};return r.displayName=t,s.a.forwardRef(r)}(c,l)},g=O("presto-cta-overlay-ui"),w=O("presto-email-overlay-ui"),j=O("presto-player")},,function(e,t,r){"use strict";r.d(t,"a",(function(){return N}));var n=r(6),a=r(33),o=r(1),l=r(4);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=wp.i18n,p=s.__,u=s.sprintf,d=wp.components,b=d.NavigableMenu,m=d.MenuItem,y=d.FormFileUpload,v=d.MenuGroup,f=d.ToolbarGroup,h=d.ToolbarButton,O=d.Dropdown,g=(d.SVG,d.Rect,d.Path,d.Button),w=d.TextControl,j=(d.SelectControl,wp.blockEditor),E=j.MediaUpload,_=j.MediaUploadCheck,R=wp.data.useSelect,k=wp.element.useState,P=["text/vtt"],x=React.createElement("svg",{viewBox:"0 0 29 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5014 20.2854H28.6316V0.764648H0.110825V20.2854H11.241L14.3712 24.2854L17.5014 20.2854ZM14.3712 21.0401L16.5269 18.2854H26.6316V2.76465H2.11082V18.2854H12.2155L14.3712 21.0401Z"}),React.createElement("path",{d:"M10.4503 14.9446C9.56226 14.9446 8.76226 14.7606 8.05026 14.3926C7.33826 14.0166 6.77826 13.4966 6.37026 12.8326C5.97026 12.1606 5.77026 11.4006 5.77026 10.5526C5.77026 9.70464 5.97026 8.94864 6.37026 8.28464C6.77826 7.61264 7.33826 7.09264 8.05026 6.72464C8.76226 6.34864 9.56226 6.16064 10.4503 6.16064C11.2663 6.16064 11.9943 6.30464 12.6343 6.59264C13.2743 6.88064 13.8023 7.29664 14.2183 7.84064L12.4303 9.43664C11.9103 8.78064 11.2983 8.45264 10.5943 8.45264C10.0023 8.45264 9.52626 8.64464 9.16626 9.02864C8.80626 9.40464 8.62626 9.91264 8.62626 10.5526C8.62626 11.1926 8.80626 11.7046 9.16626 12.0886C9.52626 12.4646 10.0023 12.6526 10.5943 12.6526C11.2983 12.6526 11.9103 12.3246 12.4303 11.6686L14.2183 13.2646C13.8023 13.8086 13.2743 14.2246 12.6343 14.5126C11.9943 14.8006 11.2663 14.9446 10.4503 14.9446Z"}),React.createElement("path",{d:"M19.2042 14.9446C18.3162 14.9446 17.5162 14.7606 16.8042 14.3926C16.0922 14.0166 15.5322 13.4966 15.1242 12.8326C14.7242 12.1606 14.5242 11.4006 14.5242 10.5526C14.5242 9.70464 14.7242 8.94864 15.1242 8.28464C15.5322 7.61264 16.0922 7.09264 16.8042 6.72464C17.5162 6.34864 18.3162 6.16064 19.2042 6.16064C20.0202 6.16064 20.7482 6.30464 21.3882 6.59264C22.0282 6.88064 22.5562 7.29664 22.9722 7.84064L21.1842 9.43664C20.6642 8.78064 20.0522 8.45264 19.3482 8.45264C18.7562 8.45264 18.2802 8.64464 17.9202 9.02864C17.5602 9.40464 17.3802 9.91264 17.3802 10.5526C17.3802 11.1926 17.5602 11.7046 17.9202 12.0886C18.2802 12.4646 18.7562 12.6526 19.3482 12.6526C20.0522 12.6526 20.6642 12.3246 21.1842 11.6686L22.9722 13.2646C22.5562 13.8086 22.0282 14.2246 21.3882 14.5126C20.7482 14.8006 20.0202 14.9446 19.2042 14.9446Z"}));function C(e){var t,r=e.tracks,n=e.onEditPress;return t=0===r.length?React.createElement("p",{className:"block-library-video-tracks-editor__tracks-informative-message"},p("Captions are .vtt files that help make your content more accesible to a wider range of users.","presto-player")):r.map((function(e,t){return React.createElement("div",{key:t,className:"block-library-video-tracks-editor__track-list-track"},React.createElement("span",null,e.label," "),React.createElement(g,{isTertiary:!0,onClick:function(){return n(t)},"aria-label":u(p("Edit %s","presto-player"),e.label)},p("Edit","presto-player")))})),React.createElement(v,{label:p("Captions","presto-player"),className:"block-library-video-tracks-editor__track-list"},t)}function S(e){var t=e.track,r=e.onChange,n=e.onClose,a=e.onRemove,o=t.src,l=void 0===o?"":o,c=t.label,s=void 0===c?"":c,u=t.srcLang,d=void 0===u?"":u,m=(t.kind,l.startsWith("blob:")?"":l.substring(l.lastIndexOf("/")+1));return React.createElement(b,null,React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor"},React.createElement("span",{className:"block-library-video-tracks-editor__single-track-editor-edit-track-label"},p("Edit caption track","presto-player")),React.createElement("span",null,p("File","presto-player"),": ",React.createElement("b",null,m)),React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor-label-language"},React.createElement(w,{autoFocus:!0,onChange:function(e){return r(i(i({},t),{},{label:e}))},label:p("Label","presto-player"),value:s,help:p("Title of track","presto-player")}),React.createElement(w,{onChange:function(e){return r(i(i({},t),{},{srcLang:e}))},label:p("Source language","presto-player"),value:d,help:p("Language tag (en, fr, etc.)","presto-player")})),React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor-buttons-container"},React.createElement(g,{isSecondary:!0,onClick:function(){var e={},a=!1;""===s&&(e.label=p("English","presto-player"),a=!0),""===d&&(e.srcLang="en",a=!0),a&&r(i(i({},t),e)),n()}},p("Close","presto-player")),React.createElement(g,{isDestructive:!0,isLink:!0,onClick:a},p("Remove track","presto-player")))))}function N(e){var t=e.tracks,r=void 0===t?[]:t,l=e.onChange,c=R((function(e){return e("core/block-editor").getSettings().mediaUpload}),[]),s=k(null),u=Object(o.a)(s,2),d=u[0],g=u[1];return c?React.createElement(O,{contentClassName:"block-library-video-tracks-editor",renderToggle:function(e){var t=e.isOpen,r=e.onToggle;return React.createElement(f,null,React.createElement(h,{label:p("Captions","presto-player"),showTooltip:!0,"aria-expanded":t,"aria-haspopup":"true",onClick:r,icon:x}))},renderContent:function(e){return Object(a.a)(e),null!==d?React.createElement(S,{track:r[d],onChange:function(e){var t=Object(n.a)(r);t[d]=e,l(t)},onClose:function(){return g(null)},onRemove:function(){l(r.filter((function(e,t){return t!==d}))),g(null)}}):React.createElement(React.Fragment,null,React.createElement(b,null,React.createElement(C,{tracks:r,onEditPress:g}),React.createElement(v,{className:"block-library-video-tracks-editor__add-tracks-container",label:p("Add caption languages","presto-player")},React.createElement(E,{onSelect:function(e){var t=e.url,a=r.length;l([].concat(Object(n.a)(r),[{src:t}])),g(a)},allowedTypes:P,render:function(e){var t=e.open;return React.createElement(m,{icon:"media",onClick:t},p("Open Media Library","presto-player"))}}),React.createElement(_,null,React.createElement(y,{onChange:function(e){var t=e.target.files,a=r.length;c({allowedTypes:P,filesList:t,onFileChange:function(e){var t=Object(o.a)(e,1)[0].url,c=Object(n.a)(r);c[a]||(c[a]={}),c[a]=i(i({},r[a]),{},{src:t}),l(c),g(a)}})},accept:".vtt,text/vtt",render:function(e){var t=e.openFileDialog;return React.createElement(m,{icon:"upload",onClick:function(){t()}},p("Upload","presto-player"))}})))))}}):null}},,function(e,t,r){"use strict";var n=r(4),a=r(1),o=r(23),l=r(7),c=r(12);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=wp.i18n.__,u=wp.components.Disabled,d=wp.element,b=d.useState,m=d.useEffect;t.a=function(e){var t,r=e.state,n=e.branding,i=e.menu,d=e.src,y=e.poster,v=e.currentTime,f=e.preload,h=e.overlays,O=e.isDisabled,g=void 0===O||O,w=b(1),j=Object(a.a)(w,2),E=j[0],_=j[1],R=r.email_collection,k=r.cta;m((function(){_(E+1)}),[r.skin,r["play-large"],r.rewind,r.play,r["fast-forward"],r.progress,r["current-time"],r.mute,r.volume,r.speed,r.pip,r.fullscreen,r.captions,r.hide_logo]);var P={email:!(null==R||!R.enabled)&&React.createElement(o.b,{className:"email-overlay",slot:"player-end",headline:null==R?void 0:R.headline,defaultHeadline:p("Enter your email to watch this video.","presto-player"),bottomText:null==R?void 0:R.bottom_text,allowSkip:null==R?void 0:R.allow_skip,skipText:p("Skip","presto-player"),buttonText:null==R?void 0:R.button_text,placeholder:p("Email address","presto-player"),i18n:window.prestoPlayer.i18n}),cta:!(null==k||!k.enabled)&&React.createElement(o.a,{className:"cta-overlay",style:s(s(s({"--presto-player-button-border-radius":"".concat(k.button_radius,"px")},null!=k&&k.background_opacity?{"--presto-player-cta-background-opacity":"".concat((null==k?void 0:k.background_opacity)/100)}:{}),k.button_color?{"--presto-player-button-color":"".concat(k.button_color)}:{}),k.button_text_color?{"--presto-player-button-text":"".concat(k.button_text_color)}:{}),slot:"player-end",headline:null==k?void 0:k.headline,"bottom-text":null==k?void 0:k.bottom_text,"button-link":null==k?void 0:k.button_link,"allow-skip":100!==(null==k?void 0:k.percentage)&&(null==k?void 0:k.show_skip),borderRadius:null==k?void 0:k.border_radius,"allow-rewatch":100===(null==k?void 0:k.percentage)&&(null==k?void 0:k.show_rewatch),"skip-text":p("Skip","presto-player"),"show-button":null==k?void 0:k.show_button,"button-text":null==k?void 0:k.button_text,i18n:window.prestoPlayer.i18n})};return React.createElement(u,{isDisabled:g,className:"disable-player"},React.createElement("div",{className:"presto-player__wrapper"},React.createElement(c.a,{src:d||"",preset:r,branding:n,i18n:null===(t=prestoPlayerAdmin)||void 0===t?void 0:t.i18n,preload:f,attributes:{chapters:[],poster:y},currentTime:v?Object(l.e)(v):"",overlays:h,key:E,adminPreview:(null==P?void 0:P[i])||""})))}},function(e,t,r){"use strict";var n=r(1),a=wp.i18n.__,o=wp.components.TextareaControl,l=wp.element.useState;t.a=function(e){var t=e.text,r=e.update,c=e.onFocus,i=l(!1),s=Object(n.a)(i,2),p=s[0],u=s[1];return React.createElement("div",{style:{display:"block",width:"100%"}},React.createElement(o,{label:"Text",help:React.createElement("span",null,a("This field accepts","presto-player")," ",React.createElement("a",{href:"#",onClick:function(e){u(!p),e.preventDefault()}},a("Dynamic Data","presto-player")),!!p&&React.createElement("div",{style:{marginTop:"20px"}},a("This field will also accept dynamic values that we will replace with dynamic content: {user.user_login}, {user.user_nicename}, {user.user_email}, {user.user_url},{user.user_registered}, {user.display_name}, {site.url}, {site.name}, {ip_address}","presto-player"))),className:"presto-player__overlay--text",placeholder:a("Enter some text.","presto-player"),value:t||"",onChange:function(e){return r({text:e})},autoComplete:"off",onFocus:c}))}},function(e,t,r){"use strict";var n=r(1),a=wp.components,o=a.Button,l=a.Placeholder,c=a.TextControl,i=a.Flex,s=a.FlexItem,p=a.FlexBlock,u=wp.element.useState,d=wp.i18n.__;t.a=function(e){var t=e.attributes,r=(e.setAttributes,e.icon),a=e.onSelectURL,b=e.label,m=e.instructions,y=e.placeholder,v=t.src,f=u({src:v}),h=Object(n.a)(f,2),O=h[0],g=h[1];return React.createElement(l,{icon:r,label:b||d("Presto Embedded Video","presto-player"),instructions:m||d("Enter video URL","presto-player")},React.createElement("form",{onSubmit:function(e){e.preventDefault(),a(O.url)}},React.createElement(i,{style:{width:"100%",maxWidth:"400px"}},React.createElement(p,null,React.createElement(c,{type:"url",className:"presto-link-placeholder-input",placeholder:y||d("Youtube URL","presto-player"),value:O.url,onChange:function(e){return g({url:e})}})),React.createElement(s,null,React.createElement(o,{isPrimary:!0,style:{marginBottom:"8px"},type:"submit"},d("Add Video","presto-player"))))))}},,,,,function(e,t,r){"use strict";(function(e){var n,a,o=r(3),l=r(6),c=r(4),i=r(1),s=r(39),p=r(0),u=r(27),d=r(38);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=wp.i18n.__,v=wp.components,f=v.Button,h=v.Flex,O=v.FlexItem,g=v.FlexBlock,w=v.Modal,j=wp.element,E=j.useState,_=j.useEffect,R=wp.data.useSelect;t.a=function(t){var r=t.closeModal,c=t.attributes,b=t.setAttributes,v=t.updateOverlayAttribute,j=E(!1),k=Object(i.a)(j,2),P=k[0],x=k[1],C=E(""),S=Object(i.a)(C,2),N=S[0],T=S[1],D=c.overlays,B=c.preset,L=c.src,A=c.poster,I=c.previewSrc,V=R((function(e){return e("presto-player/player").branding()})),F=R((function(e){return e("presto-player/player").getPreset(B)}));_((function(){D.length||M()}),[]);var M=function(){var e={startTime:"0:00",endTime:"0:05",text:y("Here's a link to click!","presto-player"),link:{},position:"top-right",color:"#fff",backgroundColor:"#000",opacity:75};D[D.length-1]&&(e=m({},D[D.length-1]));e.id=Object(s.a)(10),b({overlays:[].concat(Object(l.a)(D||[]),[e])})};return Object(p.b)(w,{title:y("Manage Video Overlays","presto-player"),onRequestClose:r,className:"presto-player__modal-presets",overlayClassName:"presto-player__modal-presets-overlay",shouldCloseOnClickOutside:!1},Object(p.b)("div",{className:"presto-player__preset-options","data-cy":"preset-modal"},Object(p.b)(h,{align:"stretch",className:"presto-player__style-preview-area"},Object(p.b)(O,{className:"presto-player__style-sidebar"},Object(p.b)("div",{css:{padding:"3px"}},(D||[]).sort((function(e,t){return parseInt(e.startTime.split(":")[0])-parseInt(t.startTime.split(":")[0])==0?parseInt(e.startTime.split(":")[1])-parseInt(t.startTime.split(":")[1]):parseInt(e.startTime.split(":")[0])-parseInt(t.startTime.split(":")[0])})).map((function(t,r){return Object(p.b)(d.a,{key:"".concat(r,"-").concat(t.startTime),overlayIndex:r,className:"presto-player__overlay",startTime:t.startTime,endTime:t.endTime,text:t.text,link:t.link,position:t.position,color:t.color,backgroundColor:t.backgroundColor,opacity:t.opacity,overlay:t,update:function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=D.indexOf(e),n=D.map((function(e,n){return n!==r?e:m(m({},e),t)}));b({overlays:n})}(t,e)},remove:function(){!function(e){var t=D.indexOf(e);b({overlays:D.filter((function(e,r){return r!==t}))})}(t)},updateCurrentTime:function(t){!function(t){T(""),e.nextTick((function(){T(t)}))}(t)}})})),Object(p.b)(f,{isPrimary:!0,onClick:M},y("Add An Overlay","presto-player")))),Object(p.b)(g,{className:"presto-player__style-preview-panel"},Object(p.b)(u.a,{preload:"auto",currentTime:N,src:I||L,isDisabled:!1,state:m(m({},F),{},{lazy_load_youtube:!1,invert_time:!1}),branding:V,poster:A,overlays:D}))),Object(p.b)("br",null),Object(p.b)("div",{css:Object(p.a)(n||(n=Object(o.a)(["\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n          "])))},Object(p.b)("div",{css:Object(p.a)(a||(a=Object(o.a)(["\n              opacity: 0.5;\n              font-size: 12px;\n            "])))}),Object(p.b)("div",null,Object(p.b)(f,{isTertiary:!0,onClick:r,style:{margin:"0 6px"}},y("Cancel","presto-player")),Object(p.b)(f,{isPrimary:!0,isBusy:P,disabled:P,onClick:function(){x(!0),v(D),x(!1),r()},"data-cy":"submit-preset"},y("Save Overlays","presto-player"))))))}}).call(this,r(49))},,,,function(e,t,r){"use strict";var n=r(1),a=r(0),o=r(7),l=r(20),c=r(28),i=r(10),s=wp.i18n.__,p=wp.components,u=p.Flex,d=p.FlexItem,b=p.TextControl,m=p.Button,y=p.BaseControl,v=p.RadioControl,f=p.RangeControl,h=(p.withFocusReturn,wp.element),O=h.useRef,g=h.useEffect,w=wp.element.useState;t.a=function(e){var t=e.overlayIndex,r=e.update,p=e.remove,h=e.className,j=e.startTime,E=e.endTime,_=e.text,R=e.link,k=e.position,P=e.color,x=e.backgroundColor,C=e.opacity,S=e.updateCurrentTime,N=w(j),T=Object(n.a)(N,2),D=T[0],B=T[1],L=w(E),A=Object(n.a)(L,2),I=A[0],V=A[1],F=w(k),M=Object(n.a)(F,2),U=M[0],z=M[1],H=O();g((function(){if(Object(o.e)(j)>=Object(o.e)(E)){var e=Object(o.b)(j),t=Object(o.e)(e)+1;e=Object(o.b)(Object(o.c)(t)),r({endTime:e}),V(e)}}),[j,E]);var W=function(){var e=Object(o.b)(D);r({startTime:e}),B(e),S(e)};return Object(a.b)("div",null,Object(a.b)(u,{align:"center",className:h},Object(a.b)(d,null,Object(a.b)(b,{ref:H,id:"start-time-".concat(t),label:s("Start Time","presto-player"),className:"presto-player__overlay--start-time",value:D,onChange:function(e){return B(e)},onBlur:W,onFocus:W,autoComplete:"off",placeholder:"0:00"})),Object(a.b)(d,null,Object(a.b)(b,{label:s("End Time","presto-player"),className:"presto-player__overlay--end-time",value:I,onChange:V,onBlur:function(){var e=Object(o.b)(I);r({endTime:e}),V(e)},autoComplete:"off",placeholder:"0:00"}))),Object(a.b)(c.a,{text:_,update:r,onFocus:function(){S(Object(o.b)(D))}}),Object(a.b)(y,{style:{width:"100%"}},Object(a.b)(y.VisualLabel,null,Object(a.b)("p",null," ",s("Link","presto-player"))),Object(a.b)(l.a,{onFocus:function(){S(Object(o.b)(D))},setSettings:function(e){return r({link:e})},settings:R||{}})),Object(a.b)(y,{className:h},Object(a.b)(v,{label:s("Position","presto-player"),options:[{label:"Top Right",value:"top-right"},{label:"Top Left",value:"top-left"}],selected:U||"right",onFocus:function(){S(Object(o.b)(D))},onChange:function(e){r({position:e}),z(e),S(Object(o.b)(D))}})),Object(a.b)(y,{className:"presto-player__control--overlay-text-color"},Object(a.b)(u,null,Object(a.b)(y.VisualLabel,null,s("Text Color","presto-player")),Object(a.b)(i.a,{onFocus:function(){S(Object(o.b)(D))},color:P,setColor:function(e){r({color:e&&e.hex})}}))),Object(a.b)(y,{className:"presto-player__control--overlay-background-color"},Object(a.b)(u,null,Object(a.b)(y.VisualLabel,null,s("Background Color","presto-player")),Object(a.b)(i.a,{onFocus:function(){S(Object(o.b)(D))},color:x,setColor:function(e){r({backgroundColor:e&&e.hex})}}))),Object(a.b)(y,null,Object(a.b)(f,{label:s("Opacity","presto-player"),help:s("Opacity percentage of the overlay.","presto-player"),value:C,onChange:function(e){return r({opacity:e})},min:0,max:100})),p&&Object(a.b)(y,{className:h},Object(a.b)(u,{justify:"flex-end"},Object(a.b)(m,{isDestructive:!0,isSmall:!0,onClick:p},s("Remove Overlay","presto-player")))),Object(a.b)("hr",{css:{marginBottom:"20px"}}))}},,,function(e,t,r){r(42),e.exports=r(54)},,,,function(e,t,r){var n={"./bunny/index.js":53,"./hosted/index.js":55,"./reusable-display/index.js":57,"./reusable-edit/index.js":51,"./vimeo/index.js":58,"./youtube/index.js":59};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=45},,,,,,function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return v})),r.d(t,"options",(function(){return f}));var n=wp.i18n.__,a=wp.blockEditor,o=a.InnerBlocks,l=a.useBlockProps,c=wp.data,i=c.useSelect,s=c.dispatch,p=wp.components,u=p.Button,d=p.Placeholder,b=wp.plugins,m=(b.getPlugins,b.unregisterPlugin),y=wp.element.useEffect,v="presto-player/reusable-edit",f={title:"Reusable Block Container",category:"presto",supports:{inserter:!1,reusable:!1,html:!1},icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("circle",{cx:"12",cy:"12",r:"10"}),React.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),React.createElement("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})),edit:function(e){var t=l(),r=e.clientId,a=e.isSelected,c=i((function(e){return e("core/block-editor").getBlock(r).innerBlocks}));y((function(){a&&wp.data.dispatch("core/edit-post").openGeneralSidebar("edit-post/block")}),[a]),s("core/block-editor").setTemplateValidity(!0),y((function(){m("presto-player")}),[]);var p,b=function(e){var t=wp.blocks.createBlock("presto-player/".concat(e));return s("core/block-editor").insertBlock(t,0,r)};return null!=c&&c.length?React.createElement("div",null,React.createElement("div",t,React.createElement(o,{templateLock:!1,renderAppender:function(){return 0===c.length&&React.createElement(o.ButtonBlockAppender,null)}}))):React.createElement("div",null,React.createElement("div",t,React.createElement(d,{icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),instructions:n("Choose a video type to get started.","presto-player"),label:n("Choose a Video Type","presto-player")},React.createElement(u,{isPrimary:!0,onClick:function(){b("self-hosted")}},n("Video","presto-player")),React.createElement(u,{isPrimary:!0,onClick:function(){b("youtube")}},n("Youtube","presto-player")),React.createElement(u,{isPrimary:!0,onClick:function(){b("vimeo")}},n("Vimeo","presto-player")),null!==(p=prestoPlayer)&&void 0!==p&&p.isPremium?React.createElement(u,{isPrimary:!0,onClick:function(){b("bunny")}},n("Bunny.net","presto-player")):""),React.createElement(o,{templateLock:!1,renderAppender:function(){return!1}})))},save:function(){var e=l.save();return React.createElement("div",e,React.createElement(o.Content,null))}}},function(e,t,r){var n={"./reusable-videos/index.js":56};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=52},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return Ca})),r.d(t,"options",(function(){return Sa}));var n={};r.r(n),r.d(n,"videos",(function(){return Q})),r.d(n,"collections",(function(){return X})),r.d(n,"uploads",(function(){return $})),r.d(n,"isPrivate",(function(){return J})),r.d(n,"isLoading",(function(){return ee})),r.d(n,"errors",(function(){return te})),r.d(n,"videosFetched",(function(){return re})),r.d(n,"currentCollection",(function(){return ne})),r.d(n,"ui",(function(){return ae})),r.d(n,"requestType",(function(){return oe}));var a={};r.r(a),r.d(a,"setVideos",(function(){return le})),r.d(a,"addVideos",(function(){return ce})),r.d(a,"removeVideo",(function(){return ie})),r.d(a,"setCollections",(function(){return se})),r.d(a,"addCollection",(function(){return pe})),r.d(a,"setIsPrivate",(function(){return ue})),r.d(a,"setSearch",(function(){return de})),r.d(a,"setCollectionRequest",(function(){return be})),r.d(a,"setUploads",(function(){return me})),r.d(a,"addUploads",(function(){return ye})),r.d(a,"removeUpload",(function(){return ve})),r.d(a,"setVideosFetched",(function(){return fe})),r.d(a,"setLoading",(function(){return he})),r.d(a,"setUI",(function(){return Oe})),r.d(a,"addError",(function(){return ge})),r.d(a,"removeError",(function(){return we}));var o,l,c=r(4),i=r(5),s=r(1),p=r(2),u=r.n(p),d=function(){var e=Object(i.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/sign",method:"POST",data:{url:t,id:0}});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=r(17),m=r(15),y=r(25),v=function(e){var t=e.file,r=e.path,n=e.onProgress,a=e.onComplete,o=e.onError,l=0,c=!1,s=Math.min(prestoPlayerAdmin.wp_max_upload_size-1e6,159e5),p=Math.max(s,19e5);p=Math.min(p,104857600);var d=function(){var e=Object(i.a)(u.a.mark((function e(i){var s,b,m,y,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=i+p+1,b=t.slice(i,s),m=Math.ceil(t.size/(p+1)),l++,n(l/m*100),(y=new FormData).append("file",b),y.append("name",t.name),y.append("chunk",l),y.append("chunks",m),e.prev=10,e.next=13,wp.apiFetch({path:r,method:"POST",body:y});case 13:if(v=e.sent,!c){e.next=17;break}return console.log("cancelled"),e.abrupt("return");case 17:s<t.size?(n(void 0),d(s)):a(v),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(10),o(e.t0),console.error(e.t0);case 24:case"end":return e.stop()}}),e,null,[[10,20]])})));return function(t){return e.apply(this,arguments)}}();return l=0,new FileReader,d(0),{cancel:function(){c=!0}}},f=r(3),h=function(e){var t=e.item,r=e.onClick,n=e.className;var a,o=function(){return!(null==t||!t.encodeProgress)&&100!==t.encodeProgress};return React.createElement("div",{className:"presto-player__media-list-item ".concat(n),onClick:r},React.createElement("div",{className:"presto-player__media-list-item-icon"},React.createElement("svg",Object(c.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},"strokeLinecap","round"),React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"}))),React.createElement("div",{className:"presto-player__media-list-item-title"},null==t?void 0:t.title),o()&&React.createElement("div",{className:"presto-player__media-list-item-size"},"Encoding..."),!o()&&React.createElement("div",{className:"presto-player__media-list-item-size"},function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}(null==t?void 0:t.size)),!o()&&React.createElement("div",{className:"presto-player__media-list-item-modified"},(a=t.updated_at,new Date(a).toLocaleString())))},O=function(e){var t,r=e.item,n=e.onClick,a=e.className;return React.createElement("div",{className:"presto-player__media-list-item ".concat(a),onClick:n},React.createElement("div",{className:"presto-player__media-list-item-icon"},React.createElement("svg",Object(c.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},"strokeLinecap","round"),React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"}))),React.createElement("div",{className:"presto-player__media-list-item-title"},null==r?void 0:r.title),React.createElement("div",{className:"presto-player__media-list-item-size"},function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}(null==r?void 0:r.size)),React.createElement("div",{className:"presto-player__media-list-item-modified"},(t=r.updated_at,new Date(t).toLocaleString())))},g=r(0),w=wp.i18n.__,j=wp.components,E=j.Modal,_=j.Spinner,R=j.Button,k=j.BaseControl,P=j.Flex,x=j.FlexBlock,C=j.Notice,S=j.Card,N=j.CardBody,T=j.Disabled,D=j.DropZone,B=j.FormFileUpload,L=j.DropZoneProvider,A=wp.element,I=A.useEffect,V=A.useState,F=A.useRef,M=function(e){var t=e.onClose,r=e.title,n=e.header,a=e.onLoad,c=e.items,i=e.folders,p=e.fetching,u=e.progressMessage,d=e.onSelect,b=e.error,m=e.onDelete,y=e.onUpload,v=e.progress,j=V({}),A=Object(s.a)(j,2),M=A[0],U=A[1],z=V(!1),H=Object(s.a)(z,2),W=H[0],Y=H[1],G=F();I((function(){a&&a()}),[]);var q,Z,K,Q,X=function(){m(M),Y(!1)},$=function(){return Object.keys(M||{}).length};return Object(g.b)(E,{title:n||w("Add Media","presto-player"),onRequestClose:t,className:"presto-player__media-modal presto-player__full-modal",overlayClassName:"presto-player__modal-overlay"},Object(g.b)("div",{className:"presto-player__media-modal-layout","data-cy":"media-modal"},Object(g.b)("div",{className:"presto-player__media-modal-header"},Object(g.b)("div",{className:"presto-player__media-modal-upload",css:Object(g.a)(o||(o=Object(f.a)(["\n              display: flex;\n              align-items: center;\n            "])))},Object(g.b)(B,{isPrimary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(y(e.target.files),jQuery(e.target).val(null))}},w("Upload New Video","presto-player")),Object(g.b)("div",{css:Object(g.a)(l||(l=Object(f.a)(["\n                margin-left: 10px;\n              "])))},w("Or drag a file here to upload.","presto-player"))),b&&Object(g.b)(C,{status:"error",isDismissible:!1},b)),Object(g.b)("div",{className:"presto-player__media-modal-content"},Object(g.b)(L,null,p?Object(g.b)(P,{className:"presto-player__media-loading"},Object(g.b)(x,{style:{textAlign:"center"}},v?Object(g.b)(React.Fragment,null,Object(g.b)("div",null,Object(g.b)("strong",null,u||w("Uploading","presto-player"))),Object(g.b)("div",null,w("Please don't navigate away from this page.","presto-player")),Object(g.b)("progress",{className:"presto-progress",max:"100",value:v,style:{width:"100px"}})):Object(g.b)(_,null))):null!=c&&c.length?Object(g.b)("div",{className:"presto-player__media-list"},Object(g.b)("h2",null,r),i&&Object(g.b)("div",{className:"presto-player__media-list-folders"},i.map((function(e){return Object(g.b)(O,{key:e.id,item:e})}))),Object(g.b)("div",{className:"presto-player__media-list-items"},c.map((function(e){return Object(g.b)(h,{item:e,key:e.id,onClick:function(){U(M===e?{}:e)},className:M===e?"is-selected":""})})))):Object(g.b)(P,{"align-items":"center",className:"presto-player__media-not-found"},Object(g.b)("div",null,Object(g.b)("h2",null,"Drop video files here to upload"),Object(g.b)("p",null,"or browse for a video"),Object(g.b)(B,{isSecondary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(y(e.target.files),jQuery(e.target).val(null))}},w("Upload New Video","presto-player")))),Object(g.b)(D,{label:"Drop files",onFilesDrop:y}))),Object(g.b)("div",{className:"presto-player__media-modal-sidebar"},$()?Object(g.b)("div",{className:"presto-player__media-modal-sidebar-content"},Object(g.b)(k,null,Object(g.b)(T,{key:M.id},null!=M&&M.thumbnail?Object(g.b)("img",{src:null==M?void 0:M.thumbnail,style:{maxWidth:"100%"}}):Object(g.b)("video",{preload:"metadata"},Object(g.b)("source",{src:M.previewUrl})))),Object(g.b)(k,null,Object(g.b)(k.VisualLabel,null,w("Name","presto-player")),Object(g.b)("h3",{style:{marginTop:"5px"}},M.title)),!(null==M||!M.visibility)&&Object(g.b)(k,null,Object(g.b)(k.VisualLabel,null,w("Visibility","presto-player")),Object(g.b)("h3",{style:{marginTop:"5px"}},M.visibility)),Object(g.b)(k,null,Object(g.b)(k.VisualLabel,null,w("Size","presto-player")),Object(g.b)("h3",{style:{marginTop:"5px"}},function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}((null==M?void 0:M.size)||0))),Object(g.b)(k,null,Object(g.b)(k.VisualLabel,null,w("Created","presto-player")),Object(g.b)("h3",{style:{marginTop:"5px"}},(q=null==M?void 0:M.created_at,Z=(q=new Date(q)).getHours(),K=q.getMinutes(),Q=Z>=12?"pm":"am",Z=(Z%=12)||12,K=K<10?"0"+K:K,q.getDate()+"-"+(q.getMonth()+1)+"-"+q.getFullYear()+" at "+Z+":"+K+Q))),Object(g.b)(k,null,W?Object(g.b)(S,null,Object(g.b)(N,null,Object(g.b)("p",null,Object(g.b)("strong",null,"Are you sure?")),Object(g.b)("p",null,"Are you sure you want to delete this video?"),Object(g.b)(R,{isDestructive:!0,onClick:X},"Yes"),Object(g.b)(R,{onClick:function(){return Y(!1)}},"Cancel"))):Object(g.b)(R,{isDestructive:!0,onClick:function(){Y(!W)}},w("Delete video","presto-player")))):Object(g.b)(React.Fragment,null)),Object(g.b)("div",{className:"presto-player__media-modal-footer"},Object(g.b)(R,{isPrimary:!0,disabled:!$(),onClick:function(){M&&(d(M),t())},ref:G},w("Choose","presto-player")))))},U=wp.i18n.__,z=wp.element,H=z.useState,W=z.useEffect,Y=function(e){var t=e.closePopup,r=e.noticeOperations,n=e.onSelect,a=e.isPrivate,o=H([]),l=Object(s.a)(o,2),c=l[0],p=l[1],d=H(!1),b=Object(s.a)(d,2),m=b[0],y=b[1],f=H(0),h=Object(s.a)(f,2),O=h[0],g=h[1],w=H(""),j=Object(s.a)(w,2),E=j[0],_=j[1],R=H(""),k=Object(s.a)(R,2),P=k[0],x=k[1],C=a?"private-videos":"public-videos";W((function(){g(0),x("")}),[]);var S=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(""),y(!0),_(U("Uploading","presto-player")),v({file:t[0],path:"presto-player/v1/bunny/upload",onProgress:function(e){g(e-10)},onComplete:N,onError:function(e){x(e.message),g(0),y(!1)}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.name,_(U("Storing","presto-player")),e.prev=2,e.next=5,wp.apiFetch({path:"presto-player/v1/bunny/".concat(C),method:"POST",data:{path:r,name:n}});case 5:a=e.sent,p(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),x(e.t0.message),console.error(e.t0);case 13:return e.prev=13,g(0),y(!1),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[2,9,13,17]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p((c||[]).filter((function(e){return e!==t}))),e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/".concat(C),method:"DELETE",data:{name:null==t?void 0:t.title}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),x(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/".concat(C)});case 4:t=e.sent,p(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),x(e.t0.message);case 11:return e.prev=11,y(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return React.createElement(M,{onClose:t,progressMessage:E,fetching:m,error:P,onUpload:S,onLoad:D,items:c,progress:O,onDelete:T,onSelect:n,onError:function(e){r.removeAllNotices(),r.createErrorNotice(e)},header:U(a?"Bunny.net Private Video Storage":"Bunny.net Public Video Storage","presto-player"),title:U(a?"Private Video Library":"Public Video Library","presto-player")})},G=r(6);function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var K=(0,wp.data.combineReducers)({videosReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEOS":return t.value;case"ADD_VIDEOS":return[].concat(Object(G.a)(e),Object(G.a)(t.value));case"ADD_VIDEO":return[].concat(Object(G.a)(e),[t.value]);case"UPDATE_VIDEO":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:Z(Z({},e),t.value)}));case"REMOVE_VIDEO":return e.filter((function(e){return e.guid!==t.value.guid}))}return e},collectionsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COLLECTIONS":return t.value;case"ADD_COLLECTION":return[].concat(Object(G.a)(e),[t.value]);case"UPDATE_COLLECTION":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:Z(Z({},e),t.value)}));case"REMOVE_COLLECTION":return e.filter((function(e){return e!==t.value}))}return e},uploadsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_UPLOADS":return t.value;case"ADD_UPLOADS":return[].concat(Object(G.a)(e),Object(G.a)(t.value));case"ADD_UPLOAD":return[].concat(Object(G.a)(e),[t.value]);case"UPDATE_UPLOAD":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:Z(Z({},e),t.value)}));case"REMOVE_UPLOAD":return e.filter((function(e){return e!==t.value}))}return e},requestReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{private:!1,collection:"",search:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRIVATE_REQUEST":return Z(Z({},e),{},{private:t.value});case"SET_SEARCH_REQUEST":return Z(Z({},e),{},{search:t.value});case"SET_COLLECTION_REQUEST":return Z(Z({},e),{},{collection:t.value})}return e},UIReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,videosFetched:!1,createCollection:!1,selectedId:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING":return Z(Z({},e),{},{loading:t.value});case"SET_VIDEOS_FETCHED":return Z(Z({},e),{},{videosFetched:t.value});case"SET_UI_ITEM":return Z(Z({},e),{},Object(c.a)({},t.item,t.value))}return e},errorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ERROR":return[].concat(Object(G.a)(e),[t.value]);case"REMOVE_ERROR":return e.filter((function(e){return e!==t.value}))}return e}});function Q(e){return(null==e?void 0:e.videosReducer)||[]}function X(e){return(null==e?void 0:e.collectionsReducer)||[]}function $(e){return(null==e?void 0:e.uploadsReducer)||[]}function J(e){var t;return!(null==e||null===(t=e.requestReducer)||void 0===t||!t.private)}function ee(e){var t;return(null==e||null===(t=e.UIReducer)||void 0===t?void 0:t.loading)||!1}function te(e){return(null==e?void 0:e.errorReducer)||[]}function re(e){var t;return(null==e||null===(t=e.UIReducer)||void 0===t?void 0:t.videosFetched)||!1}function ne(e){var t;return null==e||null===(t=e.requestReducer)||void 0===t?void 0:t.collection}function ae(e,t){var r;return null==e||null===(r=e.UIReducer)||void 0===r?void 0:r[t]}function oe(e){var t;return null!=e&&null!==(t=e.requestReducer)&&void 0!==t&&t.private?"private":"public"}function le(e){return{type:"SET_VIDEOS",value:e}}function ce(e){return{type:"ADD_VIDEOS",value:e}}function ie(e){return{type:"REMOVE_VIDEO",value:e}}function se(e){return{type:"SET_COLLECTIONS",value:e}}function pe(e){return{type:"ADD_COLLECTION",value:e}}function ue(e){return{type:"SET_PRIVATE_REQUEST",value:e}}function de(e){return{type:"SET_SEARCH",value:e}}function be(e){return{type:"SET_COLLECTION_REQUEST",value:e}}function me(e){return{type:"SET_UPLOADS",value:e}}function ye(e){return{type:"ADD_UPLOADS",value:e}}function ve(e){return{type:"REMOVE_UPLOAD",value:e}}function fe(e){return{type:"SET_VIDEOS_FETCHED",value:e}}function he(e){return{type:"SET_LOADING",value:e}}function Oe(e,t){return{type:"SET_UI_ITEM",item:e,value:t}}function ge(e){return{type:"ADD_ERROR",value:e}}function we(e){return{type:"REMOVE_ERROR",value:e}}(0,wp.data.registerStore)("presto-player/bunny-popup",{reducer:K,selectors:n,actions:a});var je,Ee,_e,Re,ke,Pe,xe,Ce,Se,Ne,Te,De,Be,Le,Ae,Ie,Ve,Fe,Me,Ue,ze,He=function(e){return 3==(null==e?void 0:e.status)&&(null==e?void 0:e.availableResolutions.length)},We=function(e){return He(e)||4===(null==e?void 0:e.status)},Ye=function(e){return 0==(null==e?void 0:e.status)?"Processing":1==(null==e?void 0:e.status)?"Uploaded":2==(null==e?void 0:e.status)?"Processing":He(e)?"Playable":3==(null==e?void 0:e.status)?"Encoding":4==(null==e?void 0:e.status)?"Live":5==(null==e?void 0:e.status)?"Error":6==(null==e?void 0:e.status)?"Upload Failed":void 0},Ge=function(e){return null==e||null==e?"":new Date(1e3*e).toISOString().substr(11,8)},qe=function(e){if(null==e||0==e)return"Unknown";if(0==e)return"0 b";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)).toString());return(e/Math.pow(1024,t)).toFixed(2)+" "+["b","KB","MB","GB","TB"][t]},Ze=wp.i18n.__,Ke=wp.components,Qe=Ke.Button,Xe=Ke.BaseControl,$e=Ke.Disabled,Je=Ke.Card,et=Ke.CardBody,tt=wp.element,rt=tt.useState,nt=(tt.useContext,tt.useEffect),at=wp.data,ot=at.dispatch,lt=at.useSelect,ct=function(){var e=rt(!1),t=Object(s.a)(e,2),r=t[0],n=t[1],a=rt(!1),o=Object(s.a)(a,2),l=o[0],c=o[1],p=rt(null),d=Object(s.a)(p,2),b=d[0],m=d[1],y=lt((function(e){return e("presto-player/bunny-popup").isPrivate()})),v=lt((function(e){return e("presto-player/bunny-popup").ui("selectedId")})),h=lt((function(e){return e("presto-player/bunny-popup").videos()}));nt((function(){m(v?h.find((function(e){return e.guid===v})):null)}),[h,v]);var O=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wp.apiFetch({path:"presto-player/v1/bunny/stream/videos/".concat(b.id),method:"DELETE",data:{type:y?"private":"public"}});case 2:ot("presto-player/bunny-popup").removeVideo(b),ot("presto-player/bunny-popup").setUI("selectedId",null),c(!1),n(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=Object(g.a)(je||(je=Object(f.a)(["\n    margin-top: 5px;\n  "])));if(!b)return"";var j,E,_,R,k=function(e){return y?null==e?void 0:e.webPURLSigned:null==e?void 0:e.webPURL};return b&&Object(g.b)("div",{className:"presto-player__media-modal-sidebar-content"},Object(g.b)(Xe,{css:Object(g.a)(Ee||(Ee=Object(f.a)(["\n            position: relative;\n          "])))},Object(g.b)($e,{key:b.id},We(b)&&k(b)&&Object(g.b)("img",{src:k(b),css:{maxWidth:"100%"}})),Object(g.b)(Qe,{isSmall:!0,isPrimary:!0,isBusy:!We(b),css:Object(g.a)(_e||(_e=Object(f.a)(["\n              ","\n              top: 8px;\n              right: 8px;\n              font-size: 11px;\n              color: #ffffff;\n              padding: 2px 10px;\n              border-radius: 9999px;\n            "])),We(b)?"position: absolute;":"")},Ye(b))),Object(g.b)(Xe,null,Object(g.b)(Xe.VisualLabel,null,Ze("Name","presto-player")),Object(g.b)("h3",{css:w},b.title)),!(null==b||!b.visibility)&&Object(g.b)(Xe,null,Object(g.b)(Xe.VisualLabel,null,Ze("Visibility","presto-player")),Object(g.b)("h3",{css:w},b.visibility)),Object(g.b)(Xe,null,Object(g.b)(Xe.VisualLabel,null,Ze("Size","presto-player")),Object(g.b)("h3",{css:w},qe((null==b?void 0:b.size)||0))),Object(g.b)(Xe,null,Object(g.b)(Xe.VisualLabel,null,Ze("Length","presto-player")),Object(g.b)("h3",{css:w},Ge(null==b?void 0:b.length))),Object(g.b)(Xe,null,Object(g.b)(Xe.VisualLabel,null,Ze("Created","presto-player")),Object(g.b)("h3",{css:w},(j=null==b?void 0:b.created_at,E=(j=new Date(j)).getHours(),_=j.getMinutes(),R=E>=12?"pm":"am",E=(E%=12)||12,_=_<10?"0"+_:_,j.getDate()+"-"+(j.getMonth()+1)+"-"+j.getFullYear()+" at "+E+":"+_+R))),Object(g.b)(Xe,null,r?Object(g.b)(Je,null,Object(g.b)(et,null,Object(g.b)("p",null,Object(g.b)("strong",null,Ze("Are you sure?","presto-player"))),Object(g.b)("p",null,Ze("Are you sure you want to delete this video?","presto-player")),Object(g.b)(Qe,{isDestructive:!0,disabled:l,isBusy:l,onClick:function(e){e.preventDefault(),O(),c(!0)}},Ze("Yes","presto-player")),Object(g.b)(Qe,{onClick:function(){return n(!1)}},Ze("Cancel","presto-player")))):Object(g.b)(Qe,{isDestructive:!0,onClick:function(){n(!r)}},Ze("Delete video","presto-player"))))},it=function(e){var t=e.className,r=e.progress;return Object(g.b)("div",{className:t},Object(g.b)("div",{css:Object(g.a)(Re||(Re=Object(f.a)(["\n          height: 100%;\n          background-color: var(--wp-admin-theme-color, #007cba);\n        "]))),style:{width:"".concat(r,"%")}}))},st=function(e){var t=e.progress;return Object(g.b)("div",{css:Object(g.a)(ke||(ke=Object(f.a)(["\n        max-width: 100%;\n        object-fit: cover;\n        width: 100%;\n        height: 140px;\n        background-color: #222;\n        color: white;\n        text-decoration: none;\n        text-align: center;\n        box-sizing: border-box;\n        box-sizing: border-box;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      "])))},Object(g.b)(it,{progress:t,css:Object(g.a)(Pe||(Pe=Object(f.a)(["\n          width: 100%;\n          border-radius: 0px;\n          margin: 0 15px;\n          background-color: #e3e3e3;\n          height: 3px;\n        "])))}))},pt=function(e){var t=e.thumbnail,r=e.title,n=e.footer,a=e.badge,o=e.before,l=e.after;return Object(g.b)("div",Object.assign({className:"presto-player__video-thumb",css:Object(g.a)(xe||(xe=Object(f.a)(["\n        cursor: pointer;\n        user-select: none;\n        display: inline-block;\n        position: relative;\n        margin-right: 20px;\n        font-weight: bold;\n        margin-bottom: 20px;\n        width: 220px;\n        flex: 0 0 220px;\n        border: 1px solid #e0e0e0;\n        border-radius: 4px;\n        overflow: hidden;\n      "])))},e),!!o&&o,!!t&&t,Object(g.b)("div",{css:Object(g.a)(Ce||(Ce=Object(f.a)(["\n          margin: 14px;\n        "])))},!!a&&Object(g.b)("div",{css:Object(g.a)(Se||(Se=Object(f.a)(["\n              position: absolute;\n              top: 8px;\n              right: 8px;\n            "])))},a),!!r&&Object(g.b)("span",{css:Object(g.a)(Ne||(Ne=Object(f.a)(["\n              text-overflow: ellipsis;\n              white-space: nowrap;\n              overflow: hidden;\n              width: 100%;\n              max-width: 100%;\n              display: inline-block;\n              margin-bottom: 7px;\n              font-size: 13px;\n            "])))},r),!!n&&Object(g.b)("div",{css:Object(g.a)(Te||(Te=Object(f.a)(["\n              font-size: 12px;\n              opacity: 0.75;\n              margin-bottom: 7px;\n            "])))},n)),!!l&&l)},ut=wp.components,dt=ut.Icon,bt=ut.Button,mt=wp.element,yt=mt.useEffect,vt=mt.useState,ft=wp.data,ht=ft.useSelect,Ot=ft.dispatch,gt=function(e){var t=e.video,r=vt(),n=Object(s.a)(r,2),a=n[0],o=n[1],l=ht((function(e){return e("presto-player/bunny-popup").isPrivate()})),c=ht((function(e){return e("presto-player/bunny-popup").ui("selectedId")}));yt((function(){o(c?c===t.guid:null)}),[c]);return Object(g.b)(pt,{onClick:function(){Ot("presto-player/bunny-popup").setUI("selectedId",null==t?void 0:t.guid)},css:Object(g.a)(Me||(Me=Object(f.a)(["\n        ","\n        border: 1px solid\n          ",";\n      "])),a&&"box-shadow: 0 0 0 0px #fff, 0 0 0 3px var(--wp-admin-theme-color, #007cba);",a?"var(--wp-admin-theme-color, #007cba)":"#e0e0e0"),thumbnail:function(){if(t.status<3)return Object(g.b)(st,{progress:t.encodeProgress});var e=l?null==t?void 0:t.thumbnailURLSigned:null==t?void 0:t.thumbnailURL;return e?Object(g.b)("img",{css:Object(g.a)(Be||(Be=Object(f.a)(["\n            max-width: 100%;\n            object-fit: cover;\n            width: 100%;\n            height: 140px;\n            display: block;\n          "]))),src:e}):void 0}(),badge:Object(g.b)(bt,{isSmall:!0,isPrimary:!0,isBusy:!We(t),css:Object(g.a)(De||(De=Object(f.a)(["\n        font-size: 11px;\n        color: #ffffff;\n        padding: 2px 10px;\n        border-radius: 9999px;\n      "])))},Ye(t)),title:t.title,footer:Object(g.b)("div",{css:Object(g.a)(Le||(Le=Object(f.a)(["\n        display: flex;\n        align-items: center;\n      "])))},Object(g.b)("span",{css:Object(g.a)(Ae||(Ae=Object(f.a)(["\n          margin-right: 10px;\n          display: flex;\n          align-items: center;\n        "])))},Object(g.b)(dt,{css:Object(g.a)(Ie||(Ie=Object(f.a)(["\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n            opacity: 0.5;\n          "]))),icon:"clock",size:14}),Object(g.b)("span",null,Ge(t.length))),Object(g.b)("span",{css:Object(g.a)(Ve||(Ve=Object(f.a)(["\n          display: flex;\n          align-items: center;\n        "])))},Object(g.b)(dt,{css:Object(g.a)(Fe||(Fe=Object(f.a)(["\n            opacity: 0.5;\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n          "]))),icon:"database",size:14}),Object(g.b)("span",null,qe(t.storageSize)))),after:3===t.status?Object(g.b)(it,{css:Object(g.a)(Ue||(Ue=Object(f.a)(["\n              width: 100%;\n              border-radius: 0px;\n              margin: 0;\n              background-color: #e3e3e3;\n              height: 3px;\n            "]))),progress:t.encodeProgress}):""})},wt=wp.components,jt=wt.Flex,Et=wt.FlexBlock,_t=wt.Spinner,Rt=function(e){var t=e.className;return Object(g.b)(jt,{className:t},Object(g.b)(Et,{css:{textAlign:"center"}},Object(g.b)(_t,null)))};function kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xt,Ct,St,Nt,Tt,Dt,Bt,Lt,At,It,Vt=wp.i18n.__,Ft=wp.element,Mt=Ft.useState,Ut=Ft.useEffect,zt=Ft.Fragment,Ht=wp.components,Wt=Ht.Flex,Yt=Ht.FormFileUpload,Gt=Ht.Notice,qt=wp.data,Zt=qt.dispatch,Kt=qt.useSelect,Qt=function(){var e=Mt(!1),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Mt(""),o=Object(s.a)(a,2),l=o[0],c=o[1],p=Kt((function(e){return e("presto-player/bunny-popup").videosFetched()})),d=Kt((function(e){return e("presto-player/bunny-popup").videos()})),b=Kt((function(e){return e("presto-player/bunny-popup").requestType()})),m=Kt((function(e){return e("presto-player/bunny-popup").currentCollection()}));Ut((function(){p||y()}),[p]),Ut((function(){var e=setInterval((function(){y({sync:!0})}),3e3);return function(){return clearInterval(e)}}),[p]);var y=function(){var e=Object(i.a)(u.a.mark((function e(){var t,r,n,a,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{sync:!1},r=t.sync,e.prev=1,e.next=4,wp.apiFetch({path:wp.url.addQueryArgs("presto-player/v1/bunny/stream/videos",Pt(Pt({type:b},null!=m&&m.guid?{collection:null==m?void 0:m.guid}:{}),{},{items_per_page:500}))});case 4:n=e.sent,Zt("presto-player/bunny-popup").setVideos(null==n?void 0:n.items),c(""),e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(1),401!==(null===e.t0||void 0===e.t0||null===(a=e.t0.data)||void 0===a?void 0:a.status)){e.next=14;break}return c(Vt("Please wait. Pullzone cache is clearing. This may take a minute or two...")),e.abrupt("return");case 14:r||Zt("presto-player/bunny-popup").addError(e.t0.message);case 15:return e.prev=15,Zt("presto-player/bunny-popup").setVideosFetched(!0),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,9,15,18]])})));return function(){return e.apply(this,arguments)}}();return l?Object(g.b)(Gt,{status:"warning",isDismissible:!1},Object(g.b)("div",{css:{display:"flex",alignItems:"center"}},Object(g.b)(Rt,{css:{flex:1}}),l)):p?Object(g.b)(zt,null,d&&d.length?Object(g.b)("div",null,!(null!=m&&m.guid)&&Object(g.b)("h2",null,Vt("Videos","presto-player")),d.map((function(e){if((null==e?void 0:e.collectionId)===((null==m?void 0:m.guid)||""))return Object(g.b)(gt,{key:e.id,video:e,onClick:function(){n(r.guid===e.guid?{}:e)},selected:r.guid===e.guid})}))):Object(g.b)(Wt,{align:"center",justify:"center",css:Object(g.a)(ze||(ze=Object(f.a)(["\n          height: 100%;\n          text-align: center;\n        "])))},Object(g.b)("div",null,Object(g.b)("h2",null,Vt("Drop video files here to upload","presto-player")),Object(g.b)("p",null,Vt("or browse for a video","presto-player")),Object(g.b)(Yt,{isSecondary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(Zt("presto-player/bunny-popup").addUploads(e.target.files),jQuery(e.target).val(null))}},Vt("Upload New Video","presto-player"))))):Object(g.b)(Rt,{css:{flex:1}})},Xt=wp.components.Icon,$t=wp.data.dispatch,Jt=function(e){var t=e.collection;return Object(g.b)(pt,{onClick:function(e){e.preventDefault(),$t("presto-player/bunny-popup").setCollectionRequest(t),$t("presto-player/bunny-popup").setVideosFetched(!1)},title:Object(g.b)("div",null,Object(g.b)(Xt,{icon:"open-folder",css:Object(g.a)(xt||(xt=Object(f.a)(["\n              color: var(--wp-admin-theme-color);\n              margin-right: 10px;\n            "])))}),t.name),footer:Object(g.b)("div",null,t.videoCount," Videos")})},er=wp.i18n.__,tr=wp.element.useEffect,rr=wp.data,nr=rr.useSelect,ar=rr.dispatch,or=function(){var e=nr((function(e){return e("presto-player/bunny-popup").collections()})),t=nr((function(e){return e("presto-player/bunny-popup").requestType()})),r=function(){var e=Object(i.a)(u.a.mark((function e(){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:wp.url.addQueryArgs("presto-player/v1/bunny/stream/collections",{type:t})});case 3:r=e.sent,ar("presto-player/bunny-popup").setCollections(null==r?void 0:r.items),e.next=12;break;case 7:if(e.prev=7,e.t0=e.catch(0),401!==(null===e.t0||void 0===e.t0||null===(n=e.t0.data)||void 0===n?void 0:n.status)){e.next=11;break}return e.abrupt("return");case 11:ar("presto-player/bunny-popup").addError(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return tr((function(){r()}),[]),!!e.length&&Object(g.b)("div",null,Object(g.b)("h2",null,er("Collections","presto-player")),Object(g.b)("div",{css:Object(g.a)(Ct||(Ct=Object(f.a)(["\n            display: flex;\n            align-items: stretch;\n            overflow: auto;\n          "])))},e.map((function(e){return Object(g.b)(Jt,{collection:e,key:e.guid})}))))},lr=wp.i18n.__,cr=wp.components,ir=cr.Button,sr=cr.TextControl,pr=cr.Modal,ur=cr.BaseControl,dr=wp.element,br=dr.useState,mr=dr.Fragment,yr=wp.data,vr=yr.dispatch,fr=yr.useSelect,hr=function(){var e=br(""),t=Object(s.a)(e,2),r=t[0],n=t[1],a=br(!1),o=Object(s.a)(a,2),l=o[0],c=o[1],p=fr((function(e){return e("presto-player/bunny-popup").requestType()})),d=fr((function(e){return e("presto-player/bunny-popup").ui("createCollection")})),b=function(e){vr("presto-player/bunny-popup").setUI("createCollection",e)},m=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/stream/collections",method:"POST",data:{type:p,name:r}});case 4:t=e.sent,vr("presto-player/bunny-popup").addCollection(t),vr("presto-player/bunny-popup").setCollectionRequest(t),vr("presto-player/bunny-popup").setVideosFetched(!1),n(""),b(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:return e.prev=15,c(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}();return Object(g.b)(mr,null,Object(g.b)(ir,{isSecondary:!0,onClick:function(){return b(!0)}},lr("Create Collection","presto-player")),d&&Object(g.b)(pr,{overlayClassName:"presto-modal",title:"Create New Collection",shouldCloseOnClickOutside:!1,isDismissible:!1},Object(g.b)(sr,{css:Object(g.a)(St||(St=Object(f.a)(["\n              margin-bottom: 15px;\n            "]))),tabIndex:"0",placeholder:lr("Enter a collection name","presto-player"),value:r,onChange:function(e){return n(e)}}),Object(g.b)(ur,null,Object(g.b)(ir,{isBusy:l,disabled:l,isPrimary:!0,onClick:function(){m()}},lr("Create","presto-player"))," ",Object(g.b)(ir,{onClick:function(){return b(!1)}},lr("Cancel","presto-player")))))},Or=wp.i18n.__,gr=wp.components,wr=gr.Flex,jr=gr.FlexBlock,Er=gr.FlexItem,_r=(gr.Button,gr.FormFileUpload),Rr=wp.data.dispatch,kr=function(e){var t=e.afterUpload;return Object(g.b)(wr,null,Object(g.b)(jr,null,Object(g.b)(wr,{justify:"flex-start"},Object(g.b)(_r,{multiple:!0,isPrimary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(Rr("presto-player/bunny-popup").addUploads(e.target.files),jQuery(e.target).val(null))}},Or("Upload Videos","presto-player"))," ",Object(g.b)(hr,null),!!t&&t)),Object(g.b)(Er,null))},Pr=wp.i18n.__,xr=wp.components.Button,Cr=wp.element,Sr=Cr.useState,Nr=Cr.useEffect,Tr=wp.data.useSelect,Dr=function(e){var t=e.onChoose,r=Sr(null),n=Object(s.a)(r,2),a=n[0],o=n[1],l=Sr(!1),c=Object(s.a)(l,2),i=c[0],p=c[1],u=Tr((function(e){return e("presto-player/bunny-popup").ui("selectedId")})),d=Tr((function(e){return e("presto-player/bunny-popup").videos()}));return Nr((function(){o(u?d.find((function(e){return e.guid===u})):null)}),[d,u]),Nr((function(){3==(null==a?void 0:a.status)&&null!=a&&a.availableResolutions.length?p(!0):p((null==a?void 0:a.status)>3&&(null==a?void 0:a.status)<5)}),[null==a?void 0:a.availableResolutions]),React.createElement(xr,{isPrimary:!0,disabled:!i,onClick:function(){return t(a)}},null!=a&&a.id&&!i?Pr("Please wait, video is encoding...","presto-player"):Pr("Choose","presto-player"))},Br=wp.components.Icon,Lr=function(e){var t=e.children,r=e.onClick;return Object(g.b)("span",{onClick:r,css:Object(g.a)(Nt||(Nt=Object(f.a)(["\n        display: inline-flex;\n        align-items: center;\n        cursor: pointer;\n        color: var(--wp-admin-theme-color, #007cba);\n        padding: 6px 0;\n      "])))},Object(g.b)(Br,{css:Object(g.a)(Tt||(Tt=Object(f.a)(["\n          width: 14px;\n          height: 14px;\n          font-size: 14px;\n          margin-right: 5px;\n        "]))),icon:"arrow-left-alt",size:14}),Object(g.b)("span",null,t))},Ar=wp.i18n.__,Ir=wp.element.useState,Vr=wp.data,Fr=Vr.dispatch,Mr=Vr.useSelect,Ur=wp.components,zr=Ur.Button,Hr=Ur.Modal,Wr=Ur.BaseControl,Yr=function(){var e=Ir(!1),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Ir(!1),o=Object(s.a)(a,2),l=o[0],c=o[1],p=Ir(""),d=Object(s.a)(p,2),b=(d[0],d[1],Mr((function(e){return e("presto-player/bunny-popup").currentCollection()}))),m=Mr((function(e){return e("presto-player/bunny-popup").requestType()})),y=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/stream/collections/".concat(null==b?void 0:b.guid),method:"DELETE",data:{type:m}});case 4:n(!1),Fr("presto-player/bunny-popup").setCollectionRequest(""),Fr("presto-player/bunny-popup").setVideosFetched(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n(!1),Fr("presto-player/bunny-popup").addError(e.t0.message);case 13:return e.prev=13,c(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(g.b)("div",{css:Object(g.a)(Dt||(Dt=Object(f.a)(["\n        margin-bottom: 2em;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      "])))},Object(g.b)("div",null,Object(g.b)(Lr,{onClick:function(){Fr("presto-player/bunny-popup").setCollectionRequest(""),Fr("presto-player/bunny-popup").setVideosFetched(!1)}},Ar("Back To Main Folder","presto-player")),Object(g.b)("h2",null,b.name)),Object(g.b)(zr,{isDestructive:!0,onClick:function(){return n(!0)}},Ar("Delete Collection","presto-player")),r&&Object(g.b)(Hr,{shouldCloseOnClickOutside:!1,overlayClassName:"presto-modal",title:"Delete Collection",onRequestClose:function(){return n(!1)}},Object(g.b)("h2",null,Ar("Are you sure you want to delete the collection? ","presto-player")),Object(g.b)("p",null,Ar("This will also delete all videos inside of the collection.","presto-player")),Object(g.b)(Wr,null,Object(g.b)(zr,{isDestructive:!0,disabled:l,isBusy:l,onClick:y},Ar("Delete","presto-player"))," ",Object(g.b)(zr,{onClick:function(){return n(!1)}},Ar("Cancel","presto-player")))))};function Gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}wp.components.Icon;var Zr,Kr,Qr,Xr,$r,Jr,en,tn,rn,nn,an,on,ln,cn=wp.element,sn=cn.useState,pn=cn.useEffect,un=(cn.useContext,wp.data),dn=un.useSelect,bn=(un.dispatch,wp.i18n.__),mn=function(e){var t,r=e.file,n=e.name,a=e.onComplete,o=sn(0),l=Object(s.a)(o,2),c=l[0],p=l[1],d=sn(bn("Uploading","presto-player")),b=Object(s.a)(d,2),m=(b[0],b[1]),y=sn(""),h=Object(s.a)(y,2),O=h[0],w=h[1],j=sn(!1),E=Object(s.a)(j,2),_=E[0],R=E[1],k=dn((function(e){return e("presto-player/bunny-popup").requestType()})),P=dn((function(e){return e("presto-player/bunny-popup").currentCollection()})),x=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(bn("Uploading","presto-player")),t=v({file:null!=r&&r[0]?null==r?void 0:r[0]:r,path:"presto-player/v1/bunny/stream/upload",onProgress:function(e){p(e)},onComplete:C,onError:function(e){w(e.message),m(bn("Error","presto-player")),p(0)}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.name,m(bn("Creating","presto-player")),e.prev=2,e.next=5,wp.apiFetch({path:"presto-player/v1/bunny/stream/videos",method:"POST",data:qr({type:k,name:n},null!=P&&P.guid?{collection:P.guid}:{})});case 5:a=e.sent,R(!0),S({path:r,video:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),w(e.t0.message);case 13:return e.prev=13,p(0),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.video,e.next=3,wp.apiFetch({path:"presto-player/v1/bunny/stream/store",method:"POST",data:{type:k,path:r,guid:n.guid}});case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return pn((function(){return x(),function(){t&&t.cancel()}}),[]),_?"":Object(g.b)("div",{css:Object(g.a)(Bt||(Bt=Object(f.a)(["\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        animation: components-button__busy-animation 2500ms infinite linear;\n        opacity: 1;\n        padding: 6px 12px;\n        border-radius: 99999px;\n        border: 1px solid #dddddd;\n        background-size: 100px 100%;\n        background-image: linear-gradient(\n          -45deg,\n          #ffffff 33%,\n          #f3f3f3 33%,\n          #f3f3f3 70%,\n          #ffffff 70%\n        );\n      "])))},Object(g.b)("div",{css:Object(g.a)(Lt||(Lt=Object(f.a)(["\n          flex: 1;\n          white-space: nowrap;\n          overflow: hidden;\n          max-width: 150px;\n          text-overflow: ellipsis;\n          font-weight: bold;\n        "])))},!!O&&O,!!n&&n," ",r.name,"..."),Object(g.b)("div",{css:Object(g.a)(At||(At=Object(f.a)(["\n          display: flex;\n          align-items: center;\n        "])))},Object(g.b)(it,{css:Object(g.a)(It||(It=Object(f.a)(["\n            width: 50px;\n            height: 3px;\n            margin: 0 5px;\n            background: #e3e3e3;\n            border-radius: 9999px;\n            overflow: hidden;\n          "]))),progress:c})))},yn=wp.data.useSelect,vn=function(e){var t=e.removeUpload,r=(e.isPrivate,yn((function(e){return e("presto-player/bunny-popup").uploads()})));return r.length?Object(g.b)("div",{css:Object(g.a)(Zr||(Zr=Object(f.a)(["\n        overflow: auto;\n        display: flex;\n        align-items: center;\n        position: relative;\n      "])))},r.length&&r.map((function(e){return Object(g.b)(mn,{css:Object(g.a)(Kr||(Kr=Object(f.a)(["\n                margin-right: 0px;\n              "]))),file:e,onComplete:function(){return t(e)}})}))):""},fn=wp.i18n.__,hn=wp.components.Modal,On=function(e){var t=e.onClose,r=e.title,n=e.header,a=e.error,o=e.mainContent,l=e.sidebar,c=e.footer;return Object(g.b)(hn,{title:r||fn("Add Media","presto-player"),onRequestClose:t,css:Object(g.a)(Qr||(Qr=Object(f.a)(["\n        width: 100%;\n        height: 100%;\n        max-width: calc(100% - 32px);\n        max-height: calc(100% - 32px);\n\n        .components-modal__content {\n          position: relative;\n          display: flex;\n          flex-direction: column;\n        }\n      "]))),overlayClassName:"presto-player__modal-overlay"},Object(g.b)("div",{css:Object(g.a)(Xr||(Xr=Object(f.a)(['\n          @media screen and (min-width: 780px) {\n            margin: -24px;\n            display: grid;\n            flex: 1;\n            max-height: calc(100vh - 68px);\n            grid-template-columns: 1fr 1fr minmax(0px, 267px);\n            grid-template-rows: minmax(50px, auto) 1fr 60px;\n            grid-template-areas:\n              "header header sidebar"\n              "main main sidebar"\n              "footer footer footer";\n            overflow: hidden;\n          }\n        ']))),"data-cy":"media-modal"},Object(g.b)("div",{css:Object(g.a)($r||($r=Object(f.a)(["\n            grid-area: header;\n            padding: 24px 24px 12px 24px;\n          "])))},Object(g.b)("div",{css:Object(g.a)(Jr||(Jr=Object(f.a)(["\n              display: flex;\n              align-items: center;\n\n              > * {\n                margin-right: 10px;\n              }\n            "])))},n),a),Object(g.b)("div",{css:Object(g.a)(en||(en=Object(f.a)(["\n            grid-area: main;\n            display: grid;\n            overflow: hidden;\n\n            .components-drop-zone__provider {\n              overflow: hidden;\n              display: grid;\n            }\n\n            .components-drop-zone {\n              z-index: 99;\n            }\n          "])))},o),Object(g.b)("div",{css:Object(g.a)(tn||(tn=Object(f.a)(["\n            display: none;\n            grid-area: sidebar;\n            padding: 0 16px;\n            z-index: 75;\n            background: #f3f3f3;\n            border-left: 1px solid #ddd;\n            overflow: auto;\n\n            @media screen and (min-width: 780px) {\n              display: block;\n            }\n\n            .sidebar-content {\n              padding: 16px 0;\n            }\n          "])))},l),Object(g.b)("div",{css:Object(g.a)(rn||(rn=Object(f.a)(["\n            grid-area: footer;\n            border-top: 1px solid #ddd;\n            display: flex;\n            align-items: center;\n            justify-content: flex-end;\n            padding: 8px;\n          "])))},c)))},gn=wp.i18n.__,wn=wp.components,jn=(wn.Button,wn.DropZone),En=wn.DropZoneProvider,_n=wn.Notice,Rn=wp.element,kn=(Rn.useState,Rn.useEffect),Pn=(Rn.Fragment,wp.data),xn=Pn.dispatch,Cn=Pn.useSelect,Sn=function(e){var t=e.onClose,r=e.onChoose,n=Cn((function(e){return e("presto-player/bunny-popup").isPrivate()})),a=Cn((function(e){return e("presto-player/bunny-popup").uploads()})),o=Cn((function(e){return e("presto-player/bunny-popup").currentCollection()})),l=Cn((function(e){return e("presto-player/bunny-popup").errors()}));kn((function(){xn("presto-player/bunny-popup").setVideosFetched(!1),xn("presto-player/bunny-popup").setCollections([]),xn("presto-player/bunny-popup").setVideos([])}),[]);var c=function(e){xn("presto-player/bunny-popup").addUploads(e)},i=gn(n?"Private Stream Library":"Public Stream Library","presto-player"),s=Object(g.b)(kr,{afterUpload:Object(g.b)(vn,{uploads:a,removeUpload:function(e){xn("presto-player/bunny-popup").removeUpload(e)},isPrivate:n})}),p=Object(g.b)(ct,null),u=Object(g.b)(Dr,{onChoose:r});return Object(g.b)(On,{title:i,header:s,mainContent:Object(g.b)(En,{css:Object(g.a)(nn||(nn=Object(f.a)(["\n          overflow: auto;\n          display: flex;\n          flex-direction: column;\n        "])))},Object(g.b)("div",{css:Object(g.a)(an||(an=Object(f.a)(["\n            padding: 12px 24px;\n            overflow: auto;\n            display: flex;\n            flex-direction: column;\n          "])))},!!l.length&&l.map((function(e){return Object(g.b)(_n,{css:Object(g.a)(on||(on=Object(f.a)(["\n                    margin: 0 0 20px 0;\n                  "]))),status:"error",onRemove:function(){return xn("presto-player/bunny-popup").removeError(e)}},e)})),o?Object(g.b)(Yr,null):Object(g.b)(or,null),Object(g.b)("div",{css:Object(g.a)(ln||(ln=Object(f.a)(["\n              display: flex;\n              align-items: stretch;\n            "])))},Object(g.b)(Qt,null)),Object(g.b)(jn,{label:"Drop files",onFilesDrop:c}))),onClose:function(){a.length?confirm("Discard your uploads?")&&(t(),xn("presto-player/bunny-popup").setUploads([])):t()},footer:u,sidebar:p})},Nn=wp.i18n.__,Tn=wp.element.useEffect,Dn=wp.data.dispatch,Bn=function(e){var t=e.closePopup,r=e.onSelect,n=e.isPrivate;return Tn((function(){Dn("presto-player/bunny-popup").setIsPrivate(n)}),[n]),React.createElement(Sn,{onClose:t,onChoose:function(e){e.url=e.playlistURL,e.thumbnail=e.thumbnailURL,e.preview=e.webPURL,r(e)},header:Nn(n?"Private Stream Library":"Public Stream Library","presto-player"),title:Nn(n?"Private Video Stream":"Public Video Stream","presto-player")})},Ln=wp.i18n.__,An=wp.element.useState,In="".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"bunny/"),Vn=wp.i18n.__,Fn=wp.element.useState,Mn="".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"bunny/stream/"),Un=wp.i18n.__,zn=wp.components,Hn=zn.Button,Wn=zn.TextControl,Yn=zn.Placeholder,Gn=zn.Flex,qn=zn.FlexBlock,Zn=zn.ExternalLink,Kn=zn.Spinner,Qn=zn.FlexItem,Xn=zn.Notice,$n=wp.element.useEffect,Jn=function(e){var t=e.onRefetch,r=e.type,n=e.autoSubmit,a="stream"===r?function(e){var t=Fn(""),r=Object(s.a)(t,2),n=r[0],a=r[1],o=Fn(""),l=Object(s.a)(o,2),c=l[0],p=l[1],d=Fn(!1),b=Object(s.a)(d,2),m=b[0],y=b[1],v=Fn(0),f=Object(s.a)(v,2),h=f[0],O=f[1],g=Fn(""),w=Object(s.a)(g,2),j=w[0],E=w[1],_=function(e){return e.includes("Authorization has been denied")?"Your API key is incorrect. Please double-check to make sure you've copied it correctly.":e.includes("localhost")?"You cannot use a CDN on a local site. Please use Bunny.net on a live, publicly accessible site.":e};return{saveKey:function(){var t=Object(i.a)(u.a.mark((function t(){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(""),t.prev=1,y(!0),O(0),p(Vn("Validating API Key...","presto-player")),t.next=7,wp.apiFetch({url:"".concat(Mn,"api-key"),method:"POST",data:{api_key:n}});case 7:if(r=t.sent,r.success){t.next=11;break}throw{message:"Could not save the API key. Please double check it to make sure it's correct."};case 11:t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(1),O(0),E(null!==t.t0&&void 0!==t.t0&&t.t0.message?_(t.t0.message):"Something went wrong. Please try again"),t.abrupt("return");case 18:return t.prev=18,O(1),y(!1),p(""),t.finish(18);case 23:return t.prev=23,y(!0),p(Vn("Setting up public video library. This make take a few moments...","presto-player")),t.next=28,wp.apiFetch({url:"".concat(Mn,"library"),method:"POST",data:{type:"public"}});case 28:a=t.sent,a.id,t.next=37;break;case 32:return t.prev=32,t.t1=t.catch(23),O(0),E(null!==t.t1&&void 0!==t.t1&&t.t1.message?_(t.t1.message):"Something went wrong. Please try again"),t.abrupt("return");case 37:return t.prev=37,O(2),y(!1),p(""),t.finish(37);case 42:return t.prev=42,y(!0),p(Vn("Setting up private video library. This make take a few moments...","presto-player")),t.next=47,wp.apiFetch({url:"".concat(Mn,"library"),method:"POST",data:{type:"private"}});case 47:t.next=54;break;case 49:return t.prev=49,t.t2=t.catch(42),O(0),E(null!==t.t2&&void 0!==t.t2&&t.t2.message?_(t.t2.message):"Something went wrong. Please try again"),t.abrupt("return");case 54:return t.prev=54,O(2),y(!1),p(""),t.finish(54);case 59:e();case 60:case"end":return t.stop()}}),t,null,[[1,13,18,23],[23,32,37,42],[42,49,54,59]])})));return function(){return t.apply(this,arguments)}}(),setApikey:a,step:h,saveMessage:c,saving:m,error:j,totalSteps:3}}(t):function(e){var t=An(""),r=Object(s.a)(t,2),n=r[0],a=r[1],o=An(""),l=Object(s.a)(o,2),c=l[0],p=l[1],d=An(!1),b=Object(s.a)(d,2),m=b[0],y=b[1],v=An(0),f=Object(s.a)(v,2),h=f[0],O=f[1],g=An(""),w=Object(s.a)(g,2),j=w[0],E=w[1],_=function(e){return e.includes("Authorization has been denied")?"Your API key is incorrect. Please double-check to make sure you've copied it correctly.":e.includes("localhost")?"You cannot use a CDN on a local site. Please use Bunny.net on a live, publicly accessible site.":e};return{saveKey:function(){var t=Object(i.a)(u.a.mark((function t(){var r,a,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(""),t.prev=1,y(!0),O(0),p(Ln("Validating API Key...","presto-player")),t.next=7,wp.apiFetch({url:"".concat(In,"api-key"),method:"POST",data:{api_key:n}});case 7:if(r=t.sent,r.success){t.next=11;break}throw{message:"Could not save the API key. Please double check it to make sure it's correct."};case 11:t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(1),O(0),E(null!==t.t0&&void 0!==t.t0&&t.t0.message?_(t.t0.message):"Something went wrong. Please try again"),t.abrupt("return");case 18:return t.prev=18,O(1),y(!1),p(""),t.finish(18);case 23:return t.prev=23,y(!0),p(Ln("Setting up storage zones. This make take a few minutes...","presto-player")),t.next=28,wp.apiFetch({url:"".concat(In,"storage-zones"),method:"POST"});case 28:a=t.sent,a.id,t.next=37;break;case 32:return t.prev=32,t.t1=t.catch(23),O(0),E(null!==t.t1&&void 0!==t.t1&&t.t1.message?_(t.t1.message):"Something went wrong. Please try again"),t.abrupt("return");case 37:return t.prev=37,O(2),y(!1),p(""),t.finish(37);case 42:return t.prev=42,y(!0),p(Ln("Setting up pull zones. This make take a few minutes...","presto-player")),t.next=47,wp.apiFetch({url:"".concat(In,"pull-zones"),method:"POST"});case 47:o=t.sent,o.id,t.next=56;break;case 51:return t.prev=51,t.t2=t.catch(42),O(0),E(null!==t.t2&&void 0!==t.t2&&t.t2.message?_(t.t2.message):"Something went wrong. Please try again"),t.abrupt("return");case 56:return t.prev=56,O(3),y(!1),p(""),t.finish(56);case 61:e();case 62:case"end":return t.stop()}}),t,null,[[1,13,18,23],[23,32,37,42],[42,51,56,61]])})));return function(){return t.apply(this,arguments)}}(),setApikey:a,step:h,saveMessage:c,saving:m,error:j,totalSteps:3}}(t),o=a.saveKey,l=a.apikey,c=a.setApikey,p=a.saveMessage,d=a.saving,b=a.totalSteps,m=a.step,y=a.error;return $n((function(){n&&o()}),[n]),React.createElement(Yn,{label:Un("Bunny.net Video","presto-player"),instructions:React.createElement(React.Fragment,null,Un("Enter your Bunny.net API key, which can be found on your Bunny CDN Account page.","presto-player")," ",React.createElement(Zn,{href:"https://bunnycdn.com/dashboard/account"},Un("Get My API Key","presto-player")))},d?React.createElement(Gn,null,React.createElement(Qn,null,React.createElement(Kn,null)),React.createElement(qn,null,p,React.createElement("progress",{className:"presto-progress",max:b,value:m,style:{width:"100%"}}))):React.createElement("form",{onSubmit:function(e){e.preventDefault(),o()}},y&&React.createElement(Gn,{style:{width:"100%"}},React.createElement(qn,null,React.createElement(Xn,{status:"error",isDismissible:!1},y))),React.createElement(Gn,{style:{width:"100%",maxWidth:"400px"}},React.createElement(qn,null,React.createElement(Wn,{value:l,onChange:function(e){return c(e)},className:"presto-link-placeholder-input",type:"password",autoComplete:"off",placeholder:Un("Your Bunny.net API Key","presto-player"),required:!0})),React.createElement(Qn,null,React.createElement(Hn,{isPrimary:!0,style:{marginBottom:"8px"},type:"submit"},Un("Next","presto-player")," →")))))},ea=r(16),ta=r(12);function ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ra(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var aa=wp.components,oa=aa.Button,la=aa.Disabled,ca=aa.DropdownMenu,ia=aa.Spinner,sa=aa.Toolbar,pa=aa.withNotices,ua=aa.BaseControl,da=aa.Placeholder,ba=aa.ToggleControl,ma=wp.editor,ya=ma.BlockControls,va=ma.InspectorControls,fa=wp.i18n.__,ha=wp.compose.compose,Oa=wp.element,ga=Oa.useEffect,wa=Oa.useState,ja=Oa.Fragment,Ea=wp.data.dispatch,_a=ha([Object(m.a)(),Object(b.a)()])(pa((function(e){var t,r,n=e.attributes,a=e.setAttributes,o=e.noticeOperations,l=e.branding,c=(e.isSelected,e.presetData),p=e.createVideo,b=e.lockSave,m=e.unlockSave,v=e.onRemoveSrc,f=e.renderKey,h=e.defaultPreset,O=n.poster,g=n.src,w=n.id,j=n.tracks,E=n.visibility,_=n.previewSrc,R=n.thumbnail,k=wa(""),P=Object(s.a)(k,2),x=P[0],C=P[1],S=wa(!1),N=Object(s.a)(S,2),T=N[0],D=N[1],B=wa(""),L=Object(s.a)(B,2),A=L[0],I=L[1],V=wa({stream:!1,storage:!1}),F=Object(s.a)(V,2),M=F[0],U=F[1],z=wa(!1),H=Object(s.a)(z,2),W=H[0],G=H[1],q=wa(!1),Z=Object(s.a)(q,2),K=Z[0],Q=Z[1],X=wa(!1),$=Object(s.a)(X,2),J=($[0],$[1]),ee=wa(!1),te=Object(s.a)(ee,2),re=te[0],ne=te[1],ae=wp.data.useSelect((function(e){return e("core").canUser("read","settings")})),oe="private"===E,le=null===(t=prestoPlayerAdmin)||void 0===t||null===(r=t.bunny)||void 0===r?void 0:r.disable_legacy_storage;function ce(e){e.url?(a(na(na({src:e.url,preset:null==h?void 0:h.id},null!=e&&e.thumbnail?{thumbnail:e.thumbnail}:{}),null!=e&&e.preview?{preview:e.preview}:{})),console.log({media:e}),D(!0),b(),p(na({src:e.url,type:"bunny",title:e.title},null!=e&&e.guid?{external_id:e.guid}:{})).catch((function(e){a({src:""}),console.error(e)})).finally((function(){m(),D(!1)}))):a({src:void 0,id:void 0})}ga((function(){Ea("presto-player/bunny-popup").setIsPrivate("private"===E)}),[E]),ga((function(){var e,t,r,n,a,o;U({storage:null===(e=prestoPlayerAdmin)||void 0===e||null===(t=e.isSetup)||void 0===t||null===(r=t.bunny)||void 0===r?void 0:r.storage,stream:null===(n=prestoPlayerAdmin)||void 0===n||null===(a=n.isSetup)||void 0===a||null===(o=a.bunny)||void 0===o?void 0:o.stream})}),[]);var ie=function(){var e=Object(i.a)(u.a.mark((function e(){var t,r,n,a,o,l,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:"wp/v2/settings"});case 3:t=e.sent,r=t.presto_player_bunny_pull_zones,n=t.presto_player_bunny_storage_zones,a=t.presto_player_bunny_stream_private,o=t.presto_player_bunny_stream_public,Q(!0),a||G(!0),c=(l=function(e){return!(null==e||!e.private_id||null==e||!e.public_id)})(r)||l(n),i=(null==a?void 0:a.pull_zone_url)&&(null==o?void 0:o.pull_zone_url),U({storage:c,stream:i}),I(c||i?"":"stream");case 15:return e.prev=15,J(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,,15,18]])})));return function(){return e.apply(this,arguments)}}();ga((function(){ae?ie():Q(!0)}),[ae]);var se=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!oe){e.next=7;break}return e.next=3,d(g);case 3:t=e.sent,a({previewSrc:t}),e.next=8;break;case 7:a({previewSrc:g});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();ga((function(){se()}),[g]);var pe=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!oe){e.next=7;break}return e.next=3,d(R);case 3:(t=e.sent)&&a({previewThumbnail:t}),e.next=8;break;case 7:a({previewThumbnail:R});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();ga((function(){pe()}),[R]);var ue=function(){var e=[];return!W&&e.push({title:M.stream?fa("Reconnect Stream","presto-player"):fa("Connect Stream","presto-player"),onClick:function(){I("stream"),ne(!1)}}),!le&&e.push({title:M.storage?fa("Reconnect Storage (Classic)","presto-player"):fa("Connect Storage (Classic)","presto-player"),onClick:function(){return I("storage")}}),React.createElement(ca,{icon:"ellipsis",label:fa("Connection Options","presto-player"),controls:e})};return T||!K?React.createElement(da,{className:"presto-player__placeholder is-loading"},React.createElement(ia,null)):"stream"===A?React.createElement(Jn,{type:"stream",autoSubmit:re,onRefetch:function(){Q(!1),ie()}}):"storage"===A?React.createElement(Jn,{type:"storage",onRefetch:function(){Q(!1),ie()}}):w?React.createElement(React.Fragment,null,React.createElement(ya,null,React.createElement(y.a,{tracks:j,onChange:function(e){a({tracks:e})}}),React.createElement(sa,null,React.createElement(oa,{onClick:function(){return v()}},fa("Replace","presto-player")))),React.createElement(va,null,React.createElement(ea.a,{setAttributes:a,attributes:n})),React.createElement("figure",{className:"wp-block-video"},React.createElement(la,null,React.createElement(ta.a,{poster:O,src:_,id:w,type:"bunny",attributes:n,setAttributes:a,preset:c,branding:l,key:f})))):React.createElement("div",null,React.createElement(da,{label:fa(oe?"Bunny.net Private Video":"Bunny.net Video","presto-player"),icon:oe?React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})):React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polyline",{points:"8 17 12 21 16 17"}),React.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),React.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"})),instructions:React.createElement(React.Fragment,null,fa("Add or select a Bunny.net video","presto-player"))},React.createElement(ua,{className:"presto-player__placeholder-control"},React.createElement(ba,{label:"Private Video",help:oe?"Video is only accessible to those who are logged in.":"Video is accessible to everyone.",checked:oe,onChange:function(e){a({visibility:e?"private":"public"})}})),React.createElement(ja,null,M.stream&&React.createElement(oa,{isPrimary:!0,onClick:function(){return C("stream")}},fa(oe?"Add/Select Private Video Stream":"Add/Select Video Stream","presto-player")),!le&&M.storage&&React.createElement(oa,{isSecondary:M.stream,isPrimary:!M.stream,onClick:function(){return C("storage")}},fa(oe?"Add/Select Private Video (Classic)":"Add/Select Video (Classic)","presto-player")),!M.stream&&!W&&M.storage&&React.createElement(oa,{isSecondary:!0,onClick:function(){ne(!0),I("stream")}},fa("Enable Bunny.net Stream!","presto-player")),!!ae&&ue())),"storage"===x&&React.createElement(Y,{isPrivate:oe,closePopup:function(){return C("")},noticeOperations:o,onSelect:ce}),"stream"===x&&React.createElement(Bn,{isPrivate:oe,closePopup:function(){return C("")},noticeOperations:o,onSelect:ce}))}))),Ra=r(11);function ka(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ka(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xa=wp.i18n.__,Ca="presto-player/bunny",Sa=Pa(Pa({},Ra.a),{},{attributes:Pa(Pa({},Ra.a.attributes),{thumbnail:{type:String,default:""},preview:{type:String,default:""}}),premium:!0,title:xa("Presto Bunny.net Video","presto-player"),description:xa("Serve video through Bunny.net CDN.","presto-player"),variations:[{name:"public",isDefault:!0,title:xa("Presto Bunny.net Video","presto-player"),description:xa("Serve public video through Bunny.net CDN.","presto-player"),attributes:{visibility:"public"}},{name:"private",title:xa("Presto Bunny.net Private Video","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})),description:xa("Serve private, secure video through Bunny.net CDN.","presto-player"),attributes:{visibility:"private"}}],icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polyline",{points:"8 17 12 21 16 17"}),React.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),React.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"})),edit:_a})},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"getPresets",(function(){return v})),r.d(n,"getPreset",(function(){return f})),r.d(n,"getReusableVideos",(function(){return h})),r.d(n,"getReusableVideo",(function(){return O})),r.d(n,"getDefaultPreset",(function(){return g})),r.d(n,"presetsLoading",(function(){return w})),r.d(n,"branding",(function(){return j})),r.d(n,"playerCSS",(function(){return E})),r.d(n,"youtube",(function(){return _})),r.d(n,"proModal",(function(){return R}));var a={};r.r(a),r.d(a,"setPresetLoading",(function(){return P})),r.d(a,"setVideosLoading",(function(){return x})),r.d(a,"setProModal",(function(){return C})),r.d(a,"setVideos",(function(){return S})),r.d(a,"updateVideos",(function(){return N})),r.d(a,"appendVideos",(function(){return T})),r.d(a,"addVideo",(function(){return D})),r.d(a,"setPresets",(function(){return B})),r.d(a,"addPreset",(function(){return L})),r.d(a,"updatePreset",(function(){return A})),r.d(a,"removePreset",(function(){return I})),r.d(a,"setBranding",(function(){return V})),r.d(a,"updateBranding",(function(){return F})),r.d(a,"saveOptions",(function(){return M})),r.d(a,"fetchOptions",(function(){return U})),r.d(a,"fetchFromAPI",(function(){return z})),r.d(a,"fetchFromWPAPI",(function(){return H})),r.d(a,"setYoutube",(function(){return W})),r.d(a,"updateYoutube",(function(){return Y})),r.d(a,"setPresetSettings",(function(){return G}));var o=r(4),l=r(6);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=wp.data,p=s.combineReducers,u=s.dispatch,d=wp.apiFetch,b=lodash.pick,m=function(e,t){return e.find((function(e){return e.id===t.id}))?e:[].concat(Object(l.a)(e),[t])},y=p({presetReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRESET":return t.value;case"ADD_PRESET":return[].concat(Object(l.a)(e),[t.value]);case"UPDATE_PRESET":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:i(i({},e),t.value)}));case"REMOVE_PRESET":return e.filter((function(e){return e!==t.value}))}return e},presetLoadingReducer:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PRESET_LOADING":return e.value}},videosLoadingReducer:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_VIDEOS_LOADING":return e.value}},videosReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{total:0,total_pages:0,videos:[],hasResolved:!1,isError:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEOS":return t.value;case"UPDATE_VIDEOS":return i(i({},e),t.value);case"APPEND_VIDEOS":var r=e;return(t.value||[]).forEach((function(e){r.videos=m(r.videos,e)})),r;case"ADD_VIDEO":return i(i({},e),{},{videos:m(e.videos,t.value)});case"UPDATE_VIDEO":return i(i({},e),{},{videos:e.videos.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:i(i({},e),t.value)}))});case"REMOVE_VIDEO":return i(i({},e),{},{videos:e.videos.filter((function(e){return e!==t.value}))})}return e},proModalReducer:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PRO_MODAL":return e.value}},brandingReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BRANDING":return t.value;case"UPDATE_BRANDING":return i(i({},e),{},Object(o.a)({},t.name,t.value))}return e},youtubeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_YOUTUBE":return t.value;case"UPDATE_YOUTUBE":return i(i({},e),{},Object(o.a)({},t.name,t.value))}return e},presetSettingsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRESET_SETTINGS":return t.value}return e},optionsApi:function(e,t){switch(t.type){case"FETCH_OPTIONS":return d({path:"/presto-player/v1/settings/"}).then((function(e){u("presto-player/player").setBranding(e.presto_player_branding),u("presto-player/player").setYoutube(e.presto_player_youtube),u("presto-player/player").setPresetSettings(e.presto_player_presets)}));case"SAVE_OPTIONS":var r={presto_player_branding:b(null==t?void 0:t.branding,["logo","color","logo_width","player_css"])};return Object.keys(r).forEach((function(e){return(null==r[e]||!Object.keys((null==r?void 0:r[e])||{}).length)&&delete r[e]})),d({path:"/presto-player/v1/settings",method:"POST",data:r}),r}}});function v(e){return(null==e?void 0:e.presetReducer)||[]}function f(e,t){var r;return null!=e&&null!==(r=e.presetReducer)&&void 0!==r&&r.length?null==e?void 0:e.presetReducer.find((function(e){return e.id===t})):[]}function h(e){return(null==e?void 0:e.videosReducer)||[]}function O(e,t){var r,n;return(null==e||null===(r=e.videosReducer)||void 0===r||null===(n=r.videos)||void 0===n?void 0:n.find((function(e){return(null==e?void 0:e.id)===t})))||[]}function g(e){var t,r=null==e||null===(t=e.presetSettingsReducer)||void 0===t?void 0:t.default_player_preset,n=r&&((null==e?void 0:e.presetReducer)||[]).find((function(e){return e.id&&e.id===r}));return n||(n=((null==e?void 0:e.presetReducer)||[]).find((function(e){return"default"==e.slug}))),n||(n=((null==e?void 0:e.presetReducer)||[])[0]),n}function w(e){return!(null==e||!e.presetLoadingReducer)}function j(e){return null==e?void 0:e.brandingReducer}function E(e){var t;return null==e||null===(t=e.brandingReducer)||void 0===t?void 0:t.player_css}function _(e){return null==e?void 0:e.youtubeReducer}function R(e){return null==e?void 0:e.proModalReducer}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){return{type:"SET_PRESET_LOADING",value:e}}function x(e){return{type:"SET_VIDEOS_LOADING",value:e}}function C(e){return{type:"SET_PRO_MODAL",value:e}}function S(e){return{type:"SET_VIDEOS",value:e}}function N(e){return{type:"UPDATE_VIDEOS",value:e}}function T(e){return{type:"APPEND_VIDEOS",value:e}}function D(e){return{type:"ADD_VIDEO",value:e}}function B(e){return{type:"SET_PRESET",value:e}}function L(e){return{type:"ADD_PRESET",value:e}}function A(e){return{type:"UPDATE_PRESET",value:e}}function I(e){return{type:"REMOVE_PRESET",value:e}}function V(e){return{type:"SET_BRANDING",value:e}}function F(e,t){return{type:"UPDATE_BRANDING",name:e,value:t}}function M(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type:"SAVE_OPTIONS"},e)}function U(){return{type:"FETCH_OPTIONS"}}function z(e){return{type:"FETCH_FROM_API",path:e}}function H(e,t){return{type:"FETCH_FROM_WP_API",path:e,args:t}}function W(e){return{type:"SET_YOUTUBE",value:e}}function Y(e,t){return{type:"UPDATE_YOUTUBE",name:e,value:t}}function G(e){return{type:"SET_PRESET_SETTINGS",value:e}}var q=r(5),Z=r(2),K=r.n(Z);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $=wp.apiFetch,J={FETCH_FROM_API:function(e){return $({url:prestoPlayer.root+prestoPlayer.prestoVersionString+e.path})},FETCH_FROM_WP_API:function(e){return Object(q.a)(K.a.mark((function t(){var r,n,a,o,l,c,i;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.args,n=e.path,a=void 0===n?"":n,t.next=3,$(X(X(X({path:wp.url.addQueryArgs("wp/v2/".concat(a),null==r?void 0:r.query)},null!=r&&r.data?{data:r.data}:{}),null==r?void 0:r.options),{},{parse:!1}));case 3:return o=t.sent,t.next=6,o.json();case 6:return l=t.sent,c=o.headers&&o.headers.get("X-WP-Total"),i=o.headers&&o.headers.get("X-WP-TotalPages"),t.abrupt("return",new Promise((function(e,t){e({data:l,total:c,total_pages:i})})));case 10:case"end":return t.stop()}}),t)})))()}},ee={getPresets:K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,z("preset");case 3:return t=e.sent,P(!1),e.abrupt("return",B(t));case 6:case"end":return e.stop()}}),e)})),getReusableVideo:K.a.mark((function e(t){var r,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="presto-videos/".concat(t),e.next=3,H(r,{});case 3:return n=e.sent,e.abrupt("return",D((null==n?void 0:n.data)||{}));case 5:case"end":return e.stop()}}),e)}))},te=(0,wp.data.registerStore)("presto-player/player",{reducer:y,selectors:n,actions:a,controls:J,resolvers:ee}),re=r(8),ne=wp.components,ae=ne.Modal,oe=ne.Button,le=wp.data,ce=le.dispatch,ie=le.useSelect,se=function(){return ie((function(e){return e("presto-player/player").proModal()}))?React.createElement(ae,{title:"Pro Feature",onRequestClose:function(){ce("presto-player/player").setProModal(!1)}},React.createElement("h2",null,"Unlock Presto Player ",React.createElement(re.a,null)),React.createElement("p",null,"Get this feature and more with the Pro version of Presto Player!"),React.createElement(oe,{href:"https://prestoplayer.com",target:"_blank",isPrimary:!0},"Learn More")):""},pe=wp.blocks,ue=pe.registerBlockType,de=pe.unregisterBlockType,be=wp.plugins,me=be.registerPlugin,ye=be.unregisterPlugin,ve=wp.data,fe=ve.select,he=ve.dispatch,Oe=wp.element.render,ge=function(){return null},we=function(e){var t=e.getContext,r=e.register,n=e.unregister,a=e.before,o=void 0===a?ge:a,l=e.after,c=void 0===l?ge:l,i={};!function(){o();var e=t(),a=[];e.keys().forEach((function(t){var o=e(t);o!==i[t]&&(i[t]&&n(i[t]),r(o),a.push(o.name),i[t]=o)})),c(a)}()},je=null;we({getContext:function(){return r(45)},register:function(e){var t,r=e.name,n=e.options;null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium?ue(r,n):n.premium||ue(r,n)},unregister:function(e){var t=e.name;return de(t)},before:function(){je=fe("core/editor").getSelectedBlockClientId(),he("core/editor").clearSelectedBlock()},after:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];fe("core/editor").getBlocks().forEach((function(t){var r=t.name,n=t.clientId;e.includes(r)&&he("core/editor").selectBlock(n)})),je?he("core/editor").selectBlock(je):he("core/editor").clearSelectedBlock(),je=null}}),we({getContext:function(){return r(52)},register:function(e){var t=e.name,r=e.options;return me(t,r)},unregister:function(e){var t=e.name;return ye(t)}}),jQuery("body").append('<div id="presto-plugin-app"></div>'),Oe(React.createElement(se,null),document.getElementById("presto-plugin-app")),he("presto-player/player").fetchOptions();var Ee=!1;wp.data.subscribe((function(){var e=wp.data.select("core/editor").isSavingPost(),t=wp.data.select("core/editor").isAutosavingPost();if(e&&!t){if(Ee)return;Ee=!0;var r=te.getState().brandingReducer;he("presto-player/player").saveOptions({branding:r}).then((function(){Ee=!1}))}}))},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return ye})),r.d(t,"options",(function(){return ve}));var n=r(6),a=r(4),o=r(1),l=r(13),c=r(17),i=r(15),s=r(18),p=r.n(s);var u={setUrlPrivate:function(){var e=-1===window.location.href.indexOf("?")?"?":"&",t=window.location.href+e+"presto_video_type=private";window.history.pushState({path:t},"",t)},setUrlPublic:function(){var e=-1===window.location.href.indexOf("?")?"?":"&",t=window.location.href+e+"presto_video_type=public";window.history.pushState({path:t},"",t)},unsetUrlParams:function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=new URL(e);return t.forEach((function(e){r.searchParams.delete(e)})),r.href}(window.location.href,["presto_video_type"]);window.history.pushState({path:e},"",e)}},d=(lodash.noop,window.location.href),b=wp.components,m=b.Button,y=(b.Notice,b.Placeholder),v=(b.DropZone,b.withFilters),f=(b.BaseControl,b.ToggleControl,b.FormFileUpload,wp.i18n.__),h=wp.element,O=h.useState,g=h.useEffect,w=wp.data.useSelect,j=(wp.deprecated,wp.editor),E=j.MediaUpload,_=j.MediaUploadCheck,R=j.URLPopover,k=function(e){var t=e.src,r=e.onChange,n=e.onSubmit,a=e.onClose;return React.createElement(R,{onClose:a},React.createElement("form",{className:"block-editor-media-placeholder__url-input-form",onSubmit:n},React.createElement("input",{"data-cy":"url-input",className:"block-editor-media-placeholder__url-input-field",type:"url","aria-label":f("URL","presto-player"),placeholder:f("Paste or type a Youtube, Vimeo or .mp4 video URL","presto-player"),onChange:r,value:t}),React.createElement(m,{"data-cy":"url-submit",className:"block-editor-media-placeholder__url-input-submit-button",icon:"editor-break",label:f("Apply","presto-player"),type:"submit"})))};var P,x=v("editor.MediaPlaceholder")((function(e){var t=e.value,r=void 0===t?{}:t,n=e.allowedTypes,a=void 0===n?[]:n,l=e.className,c=e.icon,i=e.url,s=void 0===i||i,b=e.labels,v=void 0===b?{}:b,h=e.mediaPreview,j=e.notices,R=e.isAppender,P=e.isPrivate,x=e.addToGallery,C=e.onSelect,S=e.onCancel,N=e.onSelectURL,T=e.onDoubleClick,D=e.children,B=e.allowURLs,L=w((function(e){return(0,e("core/block-editor").getSettings)().mediaUpload}),[]),A=O(""),I=Object(o.a)(A,2),V=I[0],F=I[1],M=O(!1),U=Object(o.a)(M,2),z=U[0],H=U[1];g((function(){var e;F(null!==(e=null==r?void 0:r.src)&&void 0!==e?e:"")}),[r]);var W=function(e){F(e.target.value)},Y=function(){H(!0)},G=function(){H(!1)},q=function(e){e.preventDefault(),V&&N&&(N(V),G())},Z=function(e,t){var r=v.instructions,n=v.title;L||N||(r=f("To edit this block, you need permission to upload media.","presto-player"));var a=p()("block-editor-media-placeholder",l,{"is-appender":R});return React.createElement(y,{icon:c,label:n,instructions:r,className:a,notices:j,onClick:t,onDoubleClick:T,preview:h},D,e)},K=function(){return N&&React.createElement("div",{className:"block-editor-media-placeholder__url-input-container"},s&&React.createElement(m,{"data-cy":"video-url",className:"block-editor-media-placeholder__button",onClick:Y,isPressed:z,isTertiary:!0},f("Video URL","presto-player")),z&&React.createElement(k,{src:V,onChange:W,onSubmit:q,onClose:G}))};return React.createElement(_,{fallback:Z(K())},function(){var e=React.createElement(E,{title:f(P?"Select or Upload Private Video":"Select or Upload Video","presto-player"),addToGallery:x,gallery:!1,multiple:!1,onSelect:function(e){u.unsetUrlParams(),C(e)},onClose:function(){u.unsetUrlParams()},allowedTypes:a,value:Array.isArray(r)?r.map((function(e){return e.id})):r.id,render:function(e){var t=e.open;return React.createElement(m,{"data-cy":"add-video",isPrimary:!0,onClick:function(e){e.stopPropagation(),u.unsetUrlParams(),P?u.setUrlPrivate(d):u.setUrlPublic(d),t()}},f(P?"Add/Select Private Video":"Add/Select Video","presto-player"))}});if(L){var t=React.createElement(React.Fragment,null,e,!!B&&K(),S&&React.createElement(m,{className:"block-editor-media-placeholder__cancel-button",title:f("Cancel","presto-player"),isLink:!0,onClick:S},f("Cancel","presto-player")));return Z(t)}return Z(e)}())})),C=r(8),S=wp.i18n.__,N=wp.components,T=N.withNotices,D=N.BaseControl,B=N.ToggleControl,L=N.Notice,A=wp.data.dispatch,I=["video"],V=T((function(e){var t,r=e.noticeUI,n=e.onSelect,a=e.children,o=e.onSelectURL,l=e.onUploadError,c=e.setAttributes,i=e.attributes,s="private"===i.visibility;return React.createElement("div",null,React.createElement(x,{icon:s?React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),React.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})):React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),labels:{title:S(s?"Presto Private Video":"Presto Video","presto-player"),instructions:S(s?"Upload a video file, or pick one from your media library.":"Upload a video file, pick one from your media library, or add one with a URL.","presto-player")},onSelect:n,onSelectURL:o,switcher:!0,isPrivate:s,allowURLs:!s,accept:"video/*",setAttributes:c,allowedTypes:I,value:i,notices:r,onError:l},React.createElement("div",{style:{width:"100%"}},React.createElement(D,{className:"presto-player__placeholder-control"},React.createElement(B,{label:React.createElement("div",null,S("Make Private","presto-player")," ",!(null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium)&&React.createElement(C.a,null)),help:S(s?"This video is only accessible to those who are logged in.":"This video is currently accessible to everyone.","presto-player"),checked:s,onChange:function(e){var t;null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium?c({visibility:e?"private":"public"}):A("presto-player/player").setProModal(!0)}})),!!a&&React.createElement("div",{style:{width:"100%"}},a),!!s&&React.createElement(L,{status:"warning",isDismissible:!1},React.createElement("div",null,React.createElement("div",null,React.createElement("strong",null,S("Note","presto-player"))),S("Private videos use php to stream your video. Keep in mind this will use up disk space and bandwidth so it may not be an appropriate choice for some hosts.","presto-player"))))))})),F=r(25),M=r(16),U=r(12),z=wp.i18n.__,H=wp.blob,W=H.getBlobByURL,Y=H.isBlobURL,G=wp.components,q=G.Button,Z=G.Disabled,K=G.Toolbar,Q=G.Notice,X=G.withNotices,$=G.Placeholder,J=G.Spinner,ee=wp.editor,te=ee.BlockControls,re=ee.InspectorControls,ne=wp.compose.compose,ae=wp.element,oe=ae.useEffect,le=ae.useState,ce=wp.data.dispatch,ie=wp.blocks.createBlock,se=["video"],pe=ne([Object(i.a)(),Object(c.a)()])(X((function(e){e.noticeUI;var t=e.attributes,r=e.setAttributes,n=(e.isSelected,e.noticeOperations),a=e.branding,c=e.loading,i=e.presetData,s=e.createVideo,p=e.onRemoveSrc,u=e.renderKey,d=e.lockSave,b=e.unlockSave,m=e.clientId,y=e.defaultPreset,v=t.poster,f=t.src,h=t.id,O=t.tracks,g=le(""),w=Object(o.a)(g,2),j=w[0],E=w[1],_=function(e){n.removeAllNotices(),n.createErrorNotice(null==e?void 0:e.message)};return oe((function(){if(!h&&Y(f)){var e=W(f);e&&mediaUpload({filesList:[e],onFileChange:function(e){var t=Object(o.a)(e,1)[0].url;r({src:t})},onError:function(e){n.createErrorNotice(e)},allowedTypes:se})}}),[]),f?c||!h?React.createElement($,{className:"presto-player__placeholder is-loading"},React.createElement(J,null)):React.createElement("div",null,React.createElement(te,null,React.createElement(F.a,{tracks:O,onChange:function(e){r({tracks:e})}}),React.createElement(K,null,React.createElement(q,{onClick:function(){return p()}},z("Replace","presto-player")))),React.createElement(re,null,React.createElement(M.a,{setAttributes:r,attributes:t})),React.createElement("figure",null,React.createElement(Z,null,React.createElement(U.a,{poster:v,src:f,id:h,type:"hosted",attributes:t,setAttributes:r,preset:i,branding:a,key:u})))):React.createElement("div",null,React.createElement(V,{onSelect:function(e){e&&e.url?(r({src:e.url,preset:null==y?void 0:y.id,attachment_id:e.id}),d(),s({src:e.url,type:"attachment",attachment_id:e.id}).catch((function(e){r({src:""}),_(e)})).finally(b)):r({src:void 0,id:void 0})},onSelectURL:function(e){var t;if(r({attachment_id:null}),e&&Object(l.d)(e)&&(null===(t=prestoPlayer)||void 0===t||!t.isPremium))return void E(React.createElement(Q,{status:"info",onRemove:function(){return E("")}},React.createElement("div",null,React.createElement("div",null,React.createElement("strong",null,z("Get HLS Streaming and more with Presto Player Pro!","presto-player"))),z("Stream HLS links and more with Presto Player Pro.","presto-player"),React.createElement("div",{style:{marginTop:"1em"}},React.createElement(q,{isPrimary:!0},z("Upgrade","presto-player"))))));if(e!==f){var n=Object(l.a)(e).type;if("youtube"===n){var a=ie("presto-player/youtube",{src:e});return void ce("core/editor").replaceBlock(m,a)}if("vimeo"===n){var o=ie("presto-player/vimeo",{src:e});return void ce("core/editor").replaceBlock(m,o)}r({src:e,attachmend_id:null}),r({preset:null==y?void 0:y.id}),d(),s({src:e,type:"link"}).catch((function(e){r({src:""}),_(e)})).finally(b)}},setAttributes:r,attributes:t,onError:function(e){n.removeAllNotices(),n.createErrorNotice(e)}},j))}))),ue=r(11);function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me=wp.i18n.__,ye="presto-player/self-hosted",ve=be(be({},ue.a),{},{title:me("Presto Video","presto-player"),description:me("Presto Self-hosted video block.","presto-player"),variations:[{name:"public",isDefault:!0,title:me("Presto Video","presto-player"),description:me("Presto Self-hosted video block.","presto-player"),attributes:{visibility:"public"}}].concat(Object(n.a)(null!==(P=prestoPlayer)&&void 0!==P&&P.isPremium?[{name:"private",title:me("Private Private Video","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),React.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})),description:me("Private video self-hosted block.","presto-player"),attributes:{visibility:"private"}}]:[])),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),edit:pe})},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return V})),r.d(t,"options",(function(){return F}));var n=r(5),a=r(1),o=r(2),l=r.n(o),c=(r(18),wp.compose.useInstanceId),i=wp.i18n.__,s=wp.components,p=s.VisuallyHidden,u=s.Button,d=s.Icon,b=wp.element.useRef;var m=function e(t){t.className;var r=t.onChange,n=t.value,a=t.placeholder,o=c(e),l=b();return React.createElement("div",{className:"block-editor-inserter__search",style:{padding:0}},React.createElement(p,{as:"label",htmlFor:"block-editor-inserter__search-".concat(o)},a),React.createElement("input",{ref:l,className:"block-editor-inserter__search-input",id:"block-editor-inserter__search-".concat(o),type:"search",placeholder:a,onChange:function(e){return r(e.target.value)},autoComplete:"off",value:n||""}),React.createElement("div",{className:"block-editor-inserter__search-icon"},!!n&&React.createElement(u,{icon:"close-small",label:i("Reset search","presto-player"),onClick:function(){r(""),l.current.focus()}}),!n&&React.createElement(d,{icon:"search"})))},y=function(e){var t=e.icon,r=e.title,n=e.id,a=e.selectBlock,o=e.i;return React.createElement("button",{type:"button",id:"video-".concat(n),tabIndex:o,onClick:a,role:"option",className:"components-button block-editor-block-types-list__item editor-block-list-item-kadence-spacer"},React.createElement("span",{className:"block-editor-block-types-list__item-icon"},React.createElement("span",{className:"block-editor-block-icon has-colors"},t)),React.createElement("span",{className:"block-editor-block-types-list__item-title"},r))},v=wp.i18n.__,f=wp.components,h=(f.Panel,f.PanelBody),O=f.Button,g=f.Spinner,w=wp.editPost,j=w.PluginSidebar,E=w.PluginSidebarMoreMenuItem,R=wp.element,k=R.Fragment,P=R.useEffect,x=R.useState,C=R.useCallback,S=wp.data,N=S.dispatch,T=S.useSelect,D=wp.blocks,B=D.createBlock,L=D.getBlockType,A=wp.apiFetch,I=wp.blockSerializationDefaultParser.parse;var V="presto-player",F={render:function(){var e,t,r,o=(e=x(0),(t=Object(a.a)(e,2))[0],r=t[1],function(){return r((function(e){return e+1}))}),c=React.createElement("svg",{viewBox:"0 0 35 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",{"clip-path":"url(#clip0)"},React.createElement("path",{d:"M23.3722 16.9766L33.2059 11.2991L33.2059 22.6541L23.3722 16.9766Z",fillOpacity:"0.7"}),React.createElement("path",{d:"M23.3745 5.6227L33.2082 11.3002L23.3745 16.9776L23.3745 5.6227Z",fillOpacity:"0.75"}),React.createElement("path",{d:"M23.3745 5.62242L23.3745 16.9773L13.5409 11.2999L23.3745 5.62242Z",fillOpacity:"0.8"}),React.createElement("path",{d:"M23.399 5.613L13.5654 11.2905L13.5654 -0.0644536L23.399 5.613Z",fillOpacity:"0.85"}),React.createElement("path",{d:"M13.5699 11.3038L13.5699 22.6587L3.73623 16.9813L13.5699 11.3038Z",fillOpacity:"0.8"}),React.createElement("path",{d:"M13.5699 -0.0245525L13.5699 11.3304L3.73623 5.6529L13.5699 -0.0245525Z",fillOpacity:"0.9"}),React.createElement("path",{d:"M13.5699 22.6451L13.5699 34L3.73623 28.3226L13.5699 22.6451Z",fillOpacity:"0.7"}),React.createElement("path",{d:"M23.3745 16.9774L33.2082 22.6549L23.3745 28.3323L23.3745 16.9774Z",fillOpacity:"0.65"}),React.createElement("path",{d:"M3.73774 16.9774L13.5714 22.6549L3.73774 28.3323L3.73774 16.9774Z",fillOpacity:"0.75"}),React.createElement("path",{d:"M3.73774 5.63149L13.5714 11.3089L3.73774 16.9864L3.73774 5.63149Z",fillOpacity:"0.85"}),React.createElement("path",{d:"M23.3745 16.9772L23.3745 28.3321L13.5409 22.6546L23.3745 16.9772Z",fillOpacity:"0.6"})),React.createElement("defs",null,React.createElement("clipPath",{id:"clip0"},React.createElement("rect",{width:"35",height:"34",fill:"white"})))),i=x(!1),s=Object(a.a)(i,2),p=s[0],u=s[1],d=x(1),b=Object(a.a)(d,2),f=b[0],w=b[1],R=x(!1),S=Object(a.a)(R,2),D=S[0],V=S[1],F=x(""),M=Object(a.a)(F,2),U=M[0],z=M[1],H=C(_.debounce((function(e){Z({replace:!0,term:e})}),250),[]);P((function(){H(U)}),[U]),P((function(){V(!0),Z({replace:!1})}),[f]);var W=T((function(e){return e("presto-player/player").getReusableVideos()}),[U,f]),Y=W.videos,G=W.total_pages,q=W.hasResolved,Z=function(){var e=Object(n.a)(l.a.mark((function e(t){var r,n,a,c,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.replace,n=t.term,e.next=3,A({path:wp.url.addQueryArgs("wp/v2/presto-videos",{search:n,page:f,per_page:10}),parse:!1});case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,i=a.headers&&parseInt(a.headers.get("X-WP-Total")),s=a.headers&&parseInt(a.headers.get("X-WP-TotalPages")),r?N("presto-player/player").updateVideos({videos:c,hasResolved:!0,total:i,total_pages:s}):(N("presto-player/player").appendVideos(c),N("presto-player/player").updateVideos({hasResolved:!0,total:i,total_pages:s})),o(),V(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();P((function(){u(f<G)}),[f,G]);var K=function(){var e=f+1;w(e=e>G?G:e)},Q=function(e){var t,r,n,a,o=I(null==e||null===(t=e.content)||void 0===t?void 0:t.raw);if(null!=o&&null!==(r=o[0])&&void 0!==r&&null!==(n=r.innerBlocks)&&void 0!==n&&null!==(a=n[0])&&void 0!==a&&a.blockName){var l,c,i,s,p=L(null==o||null===(l=o[0])||void 0===l||null===(c=l.innerBlocks)||void 0===c||null===(i=c[0])||void 0===i?void 0:i.blockName);return null!=p&&null!==(s=p.icon)&&void 0!==s&&s.src?p.icon.src:""}return""};return React.createElement(k,null,React.createElement(E,{target:"presto-player-sidebar",icon:c},v("Presto Player","presto-player")),React.createElement(j,{name:"presto-player-sidebar",title:v("Presto Player","presto-player"),icon:c},React.createElement(h,null,React.createElement("h2",{style:{marginTop:0}},v("Media Hub","presto-player")),React.createElement(m,{placeholder:"Search media...",value:U,onChange:function(e){return t=e,w(1),void z(t);var t}}),React.createElement("div",{className:"block-editor-inserter__panel-content"},q?React.createElement("div",{role:"listbox",className:"block-editor-block-types-list presto-player__panel-grid-list","aria-label":v("Media Hub","presto-player")},Y.length?Y.map((function(e,t){var r;return React.createElement(y,{selectBlock:function(t){N("core/editor").insertBlock(B("presto-player/reusable-display",{id:null==e?void 0:e.id}))},icon:Q(e),title:(null==e||null===(r=e.title)||void 0===r?void 0:r.raw)||"Untitled",id:null==e?void 0:e.id,i:t,key:null==e?void 0:e.id})})):function(){if(!Y.length)return U?React.createElement("p",null,v("No videos found.","presto-player")):React.createElement(O,{href:"post-new.php?post_type=pp_video_block",isSecondary:!0},v("Create A Reusable Video","presto-player"))}(),!U&&p&&Y.length?React.createElement("div",{style:{"margin-top":"20px","text-align":"center",display:"flex","justify-content":"center",width:"100%"}},React.createElement(O,{isSecondary:!0,isSmall:!0,onClick:K,isBusy:D},"Load More")):""):React.createElement(g,null)))))}}},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return _})),r.d(t,"options",(function(){return R}));var n=r(1),a=wp.i18n.__,o=wp.blockEditor,l=o.InnerBlocks,c=o.useBlockProps,i=wp.editor,s=(i.BlockControls,i.InspectorControls),p=wp.components,u=p.Disabled,d=(p.Toolbar,p.Button),b=p.PanelBody,m=(p.Panel,p.Placeholder),y=p.Spinner,v=wp.data,f=v.useSelect,h=v.dispatch,O=wp.element,g=O.useState,w=O.useEffect,j=wp.blockSerializationDefaultParser.parse,E=wp.blockEditor,_=(E.InnerBlocks,E.useBlockProps,"presto-player/reusable-display"),R={title:"Reusable Block Display",category:"presto",attributes:{id:Number},supports:{align:!0,inserter:!1,reusable:!1,html:!1},icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("circle",{cx:"12",cy:"12",r:"10"}),React.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),React.createElement("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})),edit:function(e){var t,r=e.attributes,o=e.isSelected,i=e.clientId,p=r.id,v=c(),O=g(!1),E=Object(n.a)(O,2),_=E[0],R=E[1],k=g([]),P=Object(n.a)(k,2),x=P[0],C=P[1],S=g(""),N=Object(n.a)(S,2),T=N[0],D=N[1],B=f((function(e){if(p)return e("presto-player/player").getReusableVideo(p)}));w((function(){wp.data.dispatch("core/block-editor").selectBlock(i)}),[_]);var L=f((function(e){return e("core/editor").getBlocksByClientId(i)[0].innerBlocks}));return L&&null!=B&&B.id&&L.forEach((function(e){h("core/editor").updateBlockAttributes(e.clientId,{selectionOverrideClientId:i})})),w((function(){if(B.id){var e,t,r;R(!0);var n=j(null==B||null===(e=B.content)||void 0===e?void 0:e.raw);C([null==n||null===(t=n[0])||void 0===t?void 0:t.innerBlocks[0].blockName,null==n||null===(r=n[0])||void 0===r?void 0:r.innerBlocks[0].attrs]),D("post.php?post=".concat(B.id,"&action=edit"))}}),[B]),_?x?React.createElement(React.Fragment,null,React.createElement(s,null,React.createElement(b,null,React.createElement("p",null,"This is a reusable video that you can edit once and place anywhere."),React.createElement(d,{isSecondary:!0,href:"edit.php?post_type=pp_video_block"},a("Manage Media Hub","presto-player")))),React.createElement("div",{className:"block-library-block__reusable-block-container"},React.createElement("div",v,o&&React.createElement("div",{className:"reusable-block-edit-panel"},React.createElement("b",{className:"reusable-block-edit-panel__info"},null==B||null===(t=B.title)||void 0===t?void 0:t.raw),React.createElement(d,{isSecondary:!0,href:T,className:"reusable-block-edit-panel__button"},a("Edit Reusable Video","presto-player"))),React.createElement(u,null,React.createElement(l,{template:[x],templateLock:"all",renderAppender:!1}))))):void 0:React.createElement("div",v,React.createElement(m,null,React.createElement(y,null)))},save:function(){return null}}},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return x})),r.d(t,"options",(function(){return C}));var n=r(4),a=r(17),o=r(15),l=r(16),c=r(12),i=r(29),s=r(13),p=r(7),u=wp.components,d=u.Button,b=u.Disabled,m=u.Toolbar,y=u.Placeholder,v=u.Spinner,f=u.withNotices,h=wp.editor,O=h.BlockControls,g=h.InspectorControls,w=wp.element.useEffect,j=wp.i18n.__,E=(0,wp.compose.compose)([Object(o.a)(),Object(a.a)()])(f((function(e){var t=e.attributes,r=e.setAttributes,n=e.branding,a=e.noticeOperations,o=e.loading,u=e.createVideo,f=e.lockSave,h=e.unlockSave,E=e.presetData,_=e.onRemoveSrc,R=e.renderKey,k=t.poster,P=t.src,x=t.id,C=Object(p.f)(P);return w((function(){C&&r({id:0});var e=Object(s.b)(P);r({video_id:e}),f(),u({src:P,external_id:e,type:"vimeo"}).catch((function(e){r({src:""}),function(e){a.removeAllNotices(),a.createErrorNotice(null==e?void 0:e.message)}(e)})).finally(h)}),[P]),P?o||!x?React.createElement(y,{className:"presto-player__placeholder is-loading"},React.createElement(v,null)):React.createElement(React.Fragment,null,React.createElement(O,null,React.createElement(m,null,React.createElement(d,{onClick:function(){return _()}},j("Replace","presto-player")))),React.createElement(g,null,React.createElement(l.a,{setAttributes:r,attributes:t})),React.createElement("figure",null,React.createElement(b,null,React.createElement(c.a,{poster:k,src:P,type:"vimeo",id:x,attributes:t,setAttributes:r,preset:E,branding:n,key:R})))):React.createElement("div",null,React.createElement(i.a,{icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.875 10.063c-2.442 5.217-8.337 12.319-12.063 12.319-3.672 0-4.203-7.831-6.208-13.043-.987-2.565-1.624-1.976-3.474-.681l-1.128-1.455c2.698-2.372 5.398-5.127 7.057-5.28 1.868-.179 3.018 1.098 3.448 3.832.568 3.593 1.362 9.17 2.748 9.17 1.08 0 3.741-4.424 3.878-6.006.243-2.316-1.703-2.386-3.392-1.663 2.673-8.754 13.793-7.142 9.134 2.807z"})),label:j("Presto Vimeo Video","presto-player"),instructions:j("Enter Vimeo Video URL","presto-player"),placeholder:j("Vimeo URL","presto-player"),attributes:t,setAttributes:r,onSelectURL:function(e){e!==P&&r({src:e})}}))}))),_=r(11);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=wp.i18n.__,x="presto-player/vimeo",C=k(k({},_.a),{},{attributes:k(k({},_.a.attributes),{},{video_id:{type:String}}),title:P("Presto Vimeo Video","presto-player"),description:P("A vimeo video wrapped in an awesome player.","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.875 10.063c-2.442 5.217-8.337 12.319-12.063 12.319-3.672 0-4.203-7.831-6.208-13.043-.987-2.565-1.624-1.976-3.474-.681l-1.128-1.455c2.698-2.372 5.398-5.127 7.057-5.28 1.868-.179 3.018 1.098 3.448 3.832.568 3.593 1.362 9.17 2.748 9.17 1.08 0 3.741-4.424 3.878-6.006.243-2.316-1.703-2.386-3.392-1.663 2.673-8.754 13.793-7.142 9.134 2.807z"})),edit:E})},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return x})),r.d(t,"options",(function(){return C}));var n=r(4),a=r(17),o=r(15),l=r(16),c=r(12),i=r(29),s=r(13),p=r(7),u=wp.components,d=u.Button,b=u.Disabled,m=u.Toolbar,y=u.Placeholder,v=u.Spinner,f=u.withNotices,h=wp.editor,O=h.BlockControls,g=h.InspectorControls,w=wp.element.useEffect,j=wp.i18n.__,E=(0,wp.compose.compose)([Object(o.a)(),Object(a.a)()])(f((function(e){var t=e.attributes,r=e.setAttributes,n=e.noticeOperations,a=e.branding,o=e.createVideo,u=e.loading,f=e.presetData,h=e.onRemoveSrc,E=e.lockSave,_=e.unlockSave,R=e.renderKey,k=t.poster,P=t.src,x=t.id,C=Object(p.f)(P);return w((function(){C&&r({id:0});var e=Object(s.c)(P);r({video_id:e}),E(),o({src:P,external_id:e,type:"youtube"}).catch((function(e){r({src:""}),function(e){n.removeAllNotices(),n.createErrorNotice(null==e?void 0:e.message)}(e)})).finally(_)}),[P]),P?u||!x?React.createElement(y,{className:"presto-player__placeholder is-loading"},React.createElement(v,null)):React.createElement(React.Fragment,null,React.createElement(O,null,React.createElement(m,null,React.createElement(d,{onClick:function(){return h()}},j("Replace","presto-player")))),React.createElement(g,null,React.createElement(l.a,{setAttributes:r,attributes:t})),React.createElement("figure",null,React.createElement(b,null,React.createElement(c.a,{poster:k,src:P,type:"youtube",id:x,attributes:t,setAttributes:r,preset:f,branding:a,key:R})))):React.createElement("div",null,React.createElement(i.a,{icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"}),React.createElement("polygon",{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"})),label:j("Presto Youtube Video","presto-player"),instructions:j("Enter Youtube Video URL","presto-player"),placeholder:j("Youtube URL","presto-player"),attributes:t,setAttributes:r,onSelectURL:function(e){e!==P&&r({src:e})}}))}))),_=r(11);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=wp.i18n.__,x="presto-player/youtube",C=k(k({},_.a),{},{attributes:k(k({},_.a.attributes),{},{video_id:{type:String}}),title:P("Presto Youtube Video","presto-player"),description:P("A youtube video wrapped in an awesome player.","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"}),React.createElement("polygon",{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"})),edit:E})}],[[41,1,2]]]);
//# sourceMappingURL=admin-f6268c78.js.map